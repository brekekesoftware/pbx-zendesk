(this.webpackJsonpbrekekephone=this.webpackJsonpbrekekephone||[]).push([[0],[,,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.intlDebug=t.intl=void 0;var a=r(n(677)),o=r(n(678)),i=n(80);a.default.registerHelper("moment",o.default);var l=function(e,t){var n=i.labels[e],r=i.enLabelsMapIndex[t],o=n[r];return o&&"function"===typeof o||(o=a.default.compile(o||t)),void 0!==r&&(n[r]=o),o},s=function(e,t){return l(i.intlStore.locale,e)(t)},u=function(e,t){return{label:s(e,t),en:l("en",e)(t)}};t.intlDebug=u;var c=s;t.intl=c},,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.v=t.currentVersion=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(662)),o=n(2),i=r(n(667));function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var s={fn:a,fontSize:14,lineHeight:20,get fontSizeTitle(){return 1.8*s.fontSize},get lineHeightTitle(){return 1.8*s.lineHeight},get fontSizeSubTitle(){return 1.2*s.fontSize},get lineHeightSubTitle(){return 1.2*s.lineHeight},get fontSizeSmall(){return.8*s.fontSize},get lineHeightSmall(){return.8*s.lineHeight},iconSize:24,fontWeight:"normal",fontFamily:"web"===o.Platform.OS?"'-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'":void 0,borderRadius:3,maxModalWidth:380,bg:"white",revBg:a.darken(.9,"white"),color:"black",revColor:"white",hoverBg:a.darken(.05,"white"),subColor:a.darken(.75,"white"),borderBg:a.darken(.15,"white"),layerBg:a.transparentize(.2,"black"),layerBgVideo:"#00000080",boxShadow:{shadowColor:"black",shadowOffset:{width:0,height:1},shadowOpacity:.3,shadowRadius:2,elevation:3},backdropZindex:{zIndex:999,elevation:999},colors:{greyTextChat:"#9e9e9e",primary:"#609B3A",warning:"#F1AF20",danger:"#DC0F39",primaryFn:function(e){return e>0?a.lighten(e,s.colors.primary):a.darken(-e,s.colors.primary)},warningFn:function(e){return e>0?a.lighten(e,s.colors.warning):a.darken(-e,s.colors.warning)},dangerFn:function(e){return e>0?a.lighten(e,s.colors.danger):a.darken(-e,s.colors.danger)}}};t.v=s;var u=i.default.version;t.currentVersion=u},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AudioPlayer",{enumerable:!0,get:function(){return i.AudioPlayer}}),Object.defineProperty(t,"RnAsyncStorage",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"RnIcon",{enumerable:!0,get:function(){return l.RnIcon}}),Object.defineProperty(t,"RnImage",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"RnImageVideoLoader",{enumerable:!0,get:function(){return s.RnImageVideoLoader}}),Object.defineProperty(t,"RnStatusBar",{enumerable:!0,get:function(){return u.RnStatusBar}}),Object.defineProperty(t,"RnSwitch",{enumerable:!0,get:function(){return c.RnSwitch}}),Object.defineProperty(t,"RnText",{enumerable:!0,get:function(){return d.RnText}}),Object.defineProperty(t,"RnTextInput",{enumerable:!0,get:function(){return f.RnTextInput}}),Object.defineProperty(t,"RnTouchableOpacity",{enumerable:!0,get:function(){return p.RnTouchableOpacity}});var a=r(n(312)),o=r(n(96)),i=n(652),l=n(125),s=n(669),u=n(670),c=n(671),d=n(70),f=n(672),p=n(43)},,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.setNav=t.Nav=void 0;t.setNav=function(e){n=e};t.Nav=function(){return n}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.waitUc=t.waitSip=t.waitPbx=t.setAuthStore=t.reconnectAndWaitSip=t.getAuthStore=void 0;var a,o=r(n(12)),i=r(n(13)),l=n(33);t.setAuthStore=function(e){a=e};t.getAuthStore=function(){return a};var s=function(){var e=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.reconnectSip(),e.next=3,c();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.reconnectAndWaitSip=s;var u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;if("success"!==a[t])var r=Date.now(),o=l.BackgroundTimer.setInterval((function(){"success"===a[t]?(l.BackgroundTimer.clearInterval(o),e(!0)):Date.now()-r>n&&(l.BackgroundTimer.clearInterval(o),e(!1))}),500);else e(!0)};t.waitPbx=function(e){return new Promise((function(t){return u(t,"pbxState",e)}))};var c=function(e){return new Promise((function(t){return u(t,"sipState",e)}))};t.waitSip=c;t.waitUc=function(e){return new Promise((function(t){return u(t,"ucState",e)}))}},,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnAlertStore=t.RnAlert=void 0;var a,o,i,l,s,u=r(n(34)),c=r(n(22)),d=r(n(5)),f=r(n(20)),p=(r(n(23)),n(9)),g=n(2),h=(a=function e(){(0,d.default)(this,e),(0,c.default)(this,"alertsCount",o,this),this.alerts=[],(0,c.default)(this,"prompt",i,this),(0,c.default)(this,"error",l,this),(0,c.default)(this,"dismiss",s,this)},o=(0,f.default)(a.prototype,"alertsCount",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i=(0,f.default)(a.prototype,"prompt",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.alerts.push({prompt:t}),e.alertsCount=e.alerts.length}}}),l=(0,f.default)(a.prototype,"error",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n,r,a,o=t.unexpectedErr||t.err,i=null===(n=t.message)||void 0===n?void 0:n.en;o&&(r=console).error.apply(r,(0,u.default)(i?[i,o]:[o]));"active"===g.AppState.currentState&&(e.alerts.push({error:Object.assign({},t,{message:null===(a=t.message)||void 0===a?void 0:a.label})}),e.alertsCount=e.alerts.length)}}}),s=(0,f.default)(a.prototype,"dismiss",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.alerts.shift(),e.alertsCount=e.alerts.length}}}),a);t.RnAlertStore=h;var b=new h;t.RnAlert=b},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mdiWeb=t.mdiVolumeMedium=t.mdiVolumeHigh=t.mdiVideoOff=t.mdiVideo=t.mdiUnfoldMoreHorizontal=t.mdiTranslate=t.mdiServerNetwork=t.mdiSend=t.mdiRecordCircle=t.mdiRecord=t.mdiRadioboxMarked=t.mdiRadioboxBlank=t.mdiPlus=t.mdiPlayCircleOutline=t.mdiPlayCircle=t.mdiPlay=t.mdiPhoneOutline=t.mdiPhoneOutgoingOutline=t.mdiPhoneOutgoing=t.mdiPhoneOff=t.mdiPhoneMissed=t.mdiPhoneIncoming=t.mdiPhoneInTalkOutline=t.mdiPhoneHangup=t.mdiPhoneForward=t.mdiPhone=t.mdiPauseCircle=t.mdiPause=t.mdiPaperclip=t.mdiMoreHoriz=t.mdiMicrophoneOff=t.mdiMicrophone=t.mdiMenuRight=t.mdiMenuLeft=t.mdiMenuDown=t.mdiMagnify=t.mdiLadybug=t.mdiKeyboardOutline=t.mdiKeyboardOffOutline=t.mdiKeyboardBackspace=t.mdiKeyboard=t.mdiInformation=t.mdiImageBrokenVariant=t.mdiHome=t.mdiFolderPlus=t.mdiFile=t.mdiEmoticon=t.mdiDotsVertical=t.mdiDotsHorizontal=t.mdiDialpad=t.mdiCogOutline=t.mdiCloseCircleOutline=t.mdiCloseCircle=t.mdiClose=t.mdiCheck=t.mdiCellphone=t.mdiCardsDiamond=t.mdiCameraRearVariant=t.mdiCameraFrontVariant=t.mdiCallSplit=t.mdiCached=t.mdiBriefcase=t.mdiBackspace=t.mdiArrowRight=t.mdiApplicationOutline=t.mdiApple=t.mdiAndroid=t.mdiAlphaPCircle=t.mdiAccountGroup=t.mdiAccountCircleOutline=void 0;t.mdiWeb="M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";t.mdiAndroid="M16.61 15.15C16.15 15.15 15.77 14.78 15.77 14.32S16.15 13.5 16.61 13.5H16.61C17.07 13.5 17.45 13.86 17.45 14.32C17.45 14.78 17.07 15.15 16.61 15.15M7.41 15.15C6.95 15.15 6.57 14.78 6.57 14.32C6.57 13.86 6.95 13.5 7.41 13.5H7.41C7.87 13.5 8.24 13.86 8.24 14.32C8.24 14.78 7.87 15.15 7.41 15.15M16.91 10.14L18.58 7.26C18.67 7.09 18.61 6.88 18.45 6.79C18.28 6.69 18.07 6.75 18 6.92L16.29 9.83C14.95 9.22 13.5 8.9 12 8.91C10.47 8.91 9 9.24 7.73 9.82L6.04 6.91C5.95 6.74 5.74 6.68 5.57 6.78C5.4 6.87 5.35 7.08 5.44 7.25L7.1 10.13C4.25 11.69 2.29 14.58 2 18H22C21.72 14.59 19.77 11.7 16.91 10.14H16.91Z";t.mdiApple="M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z";t.mdiRecord="M19,12C19,15.86 15.86,19 12,19C8.14,19 5,15.86 5,12C5,8.14 8.14,5 12,5C15.86,5 19,8.14 19,12Z";t.mdiMicrophone="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z";t.mdiMicrophoneOff="M19,11C19,12.19 18.66,13.3 18.1,14.28L16.87,13.05C17.14,12.43 17.3,11.74 17.3,11H19M15,11.16L9,5.18V5A3,3 0 0,1 12,2A3,3 0 0,1 15,5V11L15,11.16M4.27,3L21,19.73L19.73,21L15.54,16.81C14.77,17.27 13.91,17.58 13,17.72V21H11V17.72C7.72,17.23 5,14.41 5,11H6.7C6.7,14 9.24,16.1 12,16.1C12.81,16.1 13.6,15.91 14.31,15.58L12.65,13.92L12,14A3,3 0 0,1 9,11V10.28L3,4.27L4.27,3Z";t.mdiPause="M14,19H18V5H14M6,19H10V5H6V19Z";t.mdiPhoneInTalkOutline="M20 15.5C18.8 15.5 17.5 15.3 16.4 14.9H16.1C15.8 14.9 15.6 15 15.4 15.2L13.2 17.4C10.4 15.9 8 13.6 6.6 10.8L8.8 8.6C9.1 8.3 9.2 7.9 9 7.6C8.7 6.5 8.5 5.2 8.5 4C8.5 3.5 8 3 7.5 3H4C3.5 3 3 3.5 3 4C3 13.4 10.6 21 20 21C20.5 21 21 20.5 21 20V16.5C21 16 20.5 15.5 20 15.5M5 5H6.5C6.6 5.9 6.8 6.8 7 7.6L5.8 8.8C5.4 7.6 5.1 6.3 5 5M19 19C17.7 18.9 16.4 18.6 15.2 18.2L16.4 17C17.2 17.2 18.1 17.4 19 17.4V19M15 12H17A5 5 0 0 0 12 7V9A3 3 0 0 1 15 12M19 12H21C21 7 16.97 3 12 3V5C15.86 5 19 8.13 19 12Z";t.mdiPhoneOutgoingOutline="M20 15.5C18.8 15.5 17.5 15.3 16.4 14.9H16.1C15.8 14.9 15.6 15 15.4 15.2L13.2 17.4C10.4 15.9 8 13.6 6.6 10.8L8.8 8.6C9.1 8.3 9.2 7.9 9 7.6C8.7 6.5 8.5 5.2 8.5 4C8.5 3.5 8 3 7.5 3H4C3.5 3 3 3.5 3 4C3 13.4 10.6 21 20 21C20.5 21 21 20.5 21 20V16.5C21 16 20.5 15.5 20 15.5M5 5H6.5C6.6 5.9 6.8 6.8 7 7.6L5.8 8.8C5.4 7.6 5.1 6.3 5 5M19 19C17.7 18.9 16.4 18.6 15.2 18.2L16.4 17C17.2 17.2 18.1 17.4 19 17.4V19M15 3V4.5H18.5L13 10L14 11L19.5 5.5V9H21V3H15Z";t.mdiPlay="M8,5.14V19.14L19,12.14L8,5.14Z";t.mdiVolumeHigh="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z";t.mdiVolumeMedium="M5,9V15H9L14,20V4L9,9M18.5,12C18.5,10.23 17.5,8.71 16,7.97V16C17.5,15.29 18.5,13.76 18.5,12Z";t.mdiPhoneHangup="M12,9C10.4,9 8.85,9.25 7.4,9.72V12.82C7.4,13.22 7.17,13.56 6.84,13.72C5.86,14.21 4.97,14.84 4.17,15.57C4,15.75 3.75,15.86 3.5,15.86C3.2,15.86 2.95,15.74 2.77,15.56L0.29,13.08C0.11,12.9 0,12.65 0,12.38C0,12.1 0.11,11.85 0.29,11.67C3.34,8.77 7.46,7 12,7C16.54,7 20.66,8.77 23.71,11.67C23.89,11.85 24,12.1 24,12.38C24,12.65 23.89,12.9 23.71,13.08L21.23,15.56C21.05,15.74 20.8,15.86 20.5,15.86C20.25,15.86 20,15.75 19.82,15.57C19.03,14.84 18.14,14.21 17.16,13.72C16.83,13.56 16.6,13.22 16.6,12.82V9.72C15.15,9.25 13.6,9 12,9Z";t.mdiBackspace="M22,3H7C6.31,3 5.77,3.35 5.41,3.88L0,12L5.41,20.11C5.77,20.64 6.31,21 7,21H22A2,2 0 0,0 24,19V5A2,2 0 0,0 22,3M19,15.59L17.59,17L14,13.41L10.41,17L9,15.59L12.59,12L9,8.41L10.41,7L14,10.59L17.59,7L19,8.41L15.41,12";t.mdiKeyboard="M19,10H17V8H19M19,13H17V11H19M16,10H14V8H16M16,13H14V11H16M16,17H8V15H16M7,10H5V8H7M7,13H5V11H7M8,11H10V13H8M8,8H10V10H8M11,11H13V13H11M11,8H13V10H11M20,5H4C2.89,5 2,5.89 2,7V17A2,2 0 0,0 4,19H20A2,2 0 0,0 22,17V7C22,5.89 21.1,5 20,5Z";t.mdiPhoneForward="M20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.18L13.21,17.38C10.38,15.94 8.06,13.62 6.62,10.79L8.82,8.59C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5M18,11L23,6L18,1V4H14V8H18V11Z";t.mdiPhone="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z";t.mdiCheck="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z";t.mdiClose="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z";t.mdiDotsHorizontal="M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z";t.mdiFile="M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z";t.mdiAccountGroup="M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z";t.mdiPhoneIncoming="M4,3A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.17L13.21,17.37C10.38,15.93 8.06,13.62 6.62,10.78L8.82,8.57C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4M19,11V9.5H15.5L21,4L20,3L14.5,8.5V5H13V11H19Z";t.mdiPhoneMissed="M23.71,16.67C20.66,13.77 16.54,12 12,12C7.46,12 3.34,13.77 0.29,16.67C0.11,16.85 0,17.1 0,17.38C0,17.65 0.11,17.9 0.29,18.08L2.77,20.56C2.95,20.74 3.2,20.86 3.5,20.86C3.75,20.86 4,20.75 4.18,20.57C4.97,19.83 5.86,19.21 6.84,18.72C7.17,18.56 7.4,18.22 7.4,17.82V14.72C8.85,14.25 10.39,14 12,14C13.6,14 15.15,14.25 16.6,14.72V17.82C16.6,18.22 16.83,18.56 17.16,18.72C18.14,19.21 19.03,19.83 19.82,20.57C20,20.75 20.25,20.86 20.5,20.86C20.8,20.86 21.05,20.74 21.23,20.56L23.71,18.08C23.89,17.9 24,17.65 24,17.38C24,17.1 23.89,16.85 23.71,16.67M6.5,5.5L12,11L19,4L18,3L12,9L7.5,4.5H11V3H5V9H6.5V5.5Z";t.mdiPhoneOutgoing="M4,3A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.17L13.21,17.37C10.38,15.93 8.06,13.62 6.62,10.78L8.82,8.57C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4M15,3V4.5H18.5L13,10L14,11L19.5,5.5V9H21V3H15Z";t.mdiPlus="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";t.mdiCardsDiamond="M19,12L12,22L5,12L12,2";t.mdiUnfoldMoreHorizontal="M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z";t.mdiKeyboardBackspace="M21,11H6.83L10.41,7.41L9,6L3,12L9,18L10.41,16.58L6.83,13H21V11Z";t.mdiCached="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12";t.mdiEmoticon="M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M15.5,8A1.5,1.5 0 0,1 17,9.5A1.5,1.5 0 0,1 15.5,11A1.5,1.5 0 0,1 14,9.5A1.5,1.5 0 0,1 15.5,8M8.5,8A1.5,1.5 0 0,1 10,9.5A1.5,1.5 0 0,1 8.5,11A1.5,1.5 0 0,1 7,9.5A1.5,1.5 0 0,1 8.5,8M12,17.5C9.67,17.5 7.69,16.04 6.89,14H17.11C16.3,16.04 14.33,17.5 12,17.5Z";t.mdiPaperclip="M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z";t.mdiSend="M2,21L23,12L2,3V10L17,12L2,14V21Z";t.mdiKeyboardOffOutline="M1,4.27L2.47,5.74C2.18,6.08 2,6.5 2,7V17A2,2 0 0,0 4,19H15.73L18.73,22L20,20.72L2.28,3L1,4.27M4,17V7.27L5,8.27V10H6.73L8,11.27V13H9.73L10.73,14H8V16H12.73L13.73,17H4M5,11H7V13H5V11M17,11H19V13H17V11M19,10H17V8H19V10M14,11H16V13H14.83L14,12.17V11M13,10H11.83L11,9.17V8H13V10M22,7V17C22,17.86 21.45,18.58 20.7,18.87L18.83,17H20V7H8.83L6.83,5H20A2,2 0 0,1 22,7M16,10H14V8H16V10Z";t.mdiKeyboardOutline="M4,5A2,2 0 0,0 2,7V17A2,2 0 0,0 4,19H20A2,2 0 0,0 22,17V7A2,2 0 0,0 20,5H4M4,7H20V17H4V7M5,8V10H7V8H5M8,8V10H10V8H8M11,8V10H13V8H11M14,8V10H16V8H14M17,8V10H19V8H17M5,11V13H7V11H5M8,11V13H10V11H8M11,11V13H13V11H11M14,11V13H16V11H14M17,11V13H19V11H17M8,14V16H16V14H8Z";t.mdiDotsVertical="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z";t.mdiCloseCircle="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z";t.mdiAccountCircleOutline="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7.07,18.28C7.5,17.38 10.12,16.5 12,16.5C13.88,16.5 16.5,17.38 16.93,18.28C15.57,19.36 13.86,20 12,20C10.14,20 8.43,19.36 7.07,18.28M18.36,16.83C16.93,15.09 13.46,14.5 12,14.5C10.54,14.5 7.07,15.09 5.64,16.83C4.62,15.5 4,13.82 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,13.82 19.38,15.5 18.36,16.83M12,6C10.06,6 8.5,7.56 8.5,9.5C8.5,11.44 10.06,13 12,13C13.94,13 15.5,11.44 15.5,9.5C15.5,7.56 13.94,6 12,6M12,11A1.5,1.5 0 0,1 10.5,9.5A1.5,1.5 0 0,1 12,8A1.5,1.5 0 0,1 13.5,9.5A1.5,1.5 0 0,1 12,11Z";t.mdiCogOutline="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z";t.mdiPhoneOutline="M20,15.5C18.8,15.5 17.5,15.3 16.4,14.9C16.3,14.9 16.2,14.9 16.1,14.9C15.8,14.9 15.6,15 15.4,15.2L13.2,17.4C10.4,15.9 8,13.6 6.6,10.8L8.8,8.6C9.1,8.3 9.2,7.9 9,7.6C8.7,6.5 8.5,5.2 8.5,4C8.5,3.5 8,3 7.5,3H4C3.5,3 3,3.5 3,4C3,13.4 10.6,21 20,21C20.5,21 21,20.5 21,20V16.5C21,16 20.5,15.5 20,15.5M5,5H6.5C6.6,5.9 6.8,6.8 7,7.6L5.8,8.8C5.4,7.6 5.1,6.3 5,5M19,19C17.7,18.9 16.4,18.6 15.2,18.2L16.4,17C17.2,17.2 18.1,17.4 19,17.4V19Z";t.mdiApplicationOutline="M21 2H3C1.9 2 1 2.9 1 4V20C1 21.1 1.9 22 3 22H21C22.1 22 23 21.1 23 20V4C23 2.9 22.1 2 21 2M21 20H3V6H21V20Z";t.mdiServerNetwork="M13,19H14A1,1 0 0,1 15,20H22V22H15A1,1 0 0,1 14,23H10A1,1 0 0,1 9,22H2V20H9A1,1 0 0,1 10,19H11V17H4A1,1 0 0,1 3,16V12A1,1 0 0,1 4,11H20A1,1 0 0,1 21,12V16A1,1 0 0,1 20,17H13V19M4,3H20A1,1 0 0,1 21,4V8A1,1 0 0,1 20,9H4A1,1 0 0,1 3,8V4A1,1 0 0,1 4,3M9,7H10V5H9V7M9,15H10V13H9V15M5,5V7H7V5H5M5,13V15H7V13H5Z";t.mdiCloseCircleOutline="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z";t.mdiPlayCircleOutline="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z";t.mdiImageBrokenVariant="M21,5V11.59L18,8.58L14,12.59L10,8.59L6,12.59L3,9.58V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5M18,11.42L21,14.43V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V12.42L6,15.41L10,11.41L14,15.41";t.mdiCameraFrontVariant="M6,0H18A2,2 0 0,1 20,2V22A2,2 0 0,1 18,24H6A2,2 0 0,1 4,22V2A2,2 0 0,1 6,0M12,6A3,3 0 0,1 15,9A3,3 0 0,1 12,12A3,3 0 0,1 9,9A3,3 0 0,1 12,6M11,1V3H13V1H11M6,4V16.5C6,15.12 8.69,14 12,14C15.31,14 18,15.12 18,16.5V4H6M13,18H9V20H13V22L16,19L13,16V18Z";t.mdiCameraRearVariant="M6,0H18A2,2 0 0,1 20,2V22A2,2 0 0,1 18,24H6A2,2 0 0,1 4,22V2A2,2 0 0,1 6,0M12,2A2,2 0 0,0 10,4A2,2 0 0,0 12,6A2,2 0 0,0 14,4A2,2 0 0,0 12,2M13,18H9V20H13V22L16,19L13,16V18Z";t.mdiAlphaPCircle="M9,7V17H11V13H13A2,2 0 0,0 15,11V9A2,2 0 0,0 13,7H9M11,9H13V11H11V9M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2Z";t.mdiCallSplit="M14,4L16.29,6.29L13.41,9.17L14.83,10.59L17.71,7.71L20,10V4M10,4H4V10L6.29,7.71L11,12.41V20H13V11.59L7.71,6.29";t.mdiDialpad="M12,19A2,2 0 0,0 10,21A2,2 0 0,0 12,23A2,2 0 0,0 14,21A2,2 0 0,0 12,19M6,1A2,2 0 0,0 4,3A2,2 0 0,0 6,5A2,2 0 0,0 8,3A2,2 0 0,0 6,1M6,7A2,2 0 0,0 4,9A2,2 0 0,0 6,11A2,2 0 0,0 8,9A2,2 0 0,0 6,7M6,13A2,2 0 0,0 4,15A2,2 0 0,0 6,17A2,2 0 0,0 8,15A2,2 0 0,0 6,13M18,5A2,2 0 0,0 20,3A2,2 0 0,0 18,1A2,2 0 0,0 16,3A2,2 0 0,0 18,5M12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17A2,2 0 0,0 14,15A2,2 0 0,0 12,13M18,13A2,2 0 0,0 16,15A2,2 0 0,0 18,17A2,2 0 0,0 20,15A2,2 0 0,0 18,13M18,7A2,2 0 0,0 16,9A2,2 0 0,0 18,11A2,2 0 0,0 20,9A2,2 0 0,0 18,7M12,7A2,2 0 0,0 10,9A2,2 0 0,0 12,11A2,2 0 0,0 14,9A2,2 0 0,0 12,7M12,1A2,2 0 0,0 10,3A2,2 0 0,0 12,5A2,2 0 0,0 14,3A2,2 0 0,0 12,1Z";t.mdiPauseCircle="M15,16H13V8H15M11,16H9V8H11M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";t.mdiPlayCircle="M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";t.mdiRecordCircle="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z";t.mdiVideoOff="M3.27,2L2,3.27L4.73,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16C16.2,18 16.39,17.92 16.54,17.82L19.73,21L21,19.73M21,6.5L17,10.5V7A1,1 0 0,0 16,6H9.82L21,17.18V6.5Z";t.mdiVideo="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z";t.mdiMagnify="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z";t.mdiArrowRight="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z";t.mdiPhoneOff="M20.22,2.5L2.5,20.22L3.77,21.5L8.65,16.62C11.76,19.43 15.81,21 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.18L13.21,17.38C12.06,16.8 11,16.06 10.06,15.21L21.5,3.77L20.22,2.5M4,3A1,1 0 0,0 3,4C3,7.57 4.14,11.05 6.24,13.94L7.66,12.5C7.28,11.97 6.93,11.39 6.62,10.79L8.82,8.59C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4Z";t.mdiBriefcase="M10,2H14A2,2 0 0,1 16,4V6H20A2,2 0 0,1 22,8V19A2,2 0 0,1 20,21H4C2.89,21 2,20.1 2,19V8C2,6.89 2.89,6 4,6H8V4C8,2.89 8.89,2 10,2M14,6V4H10V6H14Z";t.mdiCellphone="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z";t.mdiHome="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z";t.mdiInformation="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";t.mdiLadybug="M12,5C12.74,5 13.47,5.1 14.15,5.29L15.78,2.46C16.06,2 16.67,1.82 17.15,2.1C17.63,2.37 17.79,3 17.5,3.46L16,6.07C17.22,6.78 18.23,7.79 18.93,9H5.07C5.77,7.79 6.78,6.78 8,6.07L6.5,3.46C6.21,3 6.37,2.37 6.85,2.1C7.33,1.82 7.94,2 8.22,2.46L9.85,5.29C10.53,5.1 11.26,5 12,5M20,13C20,17.17 16.82,20.59 12.75,20.97V10.5H19.6C19.86,11.29 20,12.13 20,13M4,13C4,12.13 4.14,11.29 4.4,10.5H11.25V20.97C7.18,20.59 4,17.17 4,13Z";t.mdiTranslate="M12.87,15.07L10.33,12.56L10.36,12.53C12.1,10.59 13.34,8.36 14.07,6H17V4H10V2H8V4H1V6H12.17C11.5,7.92 10.44,9.75 9,11.35C8.07,10.32 7.3,9.19 6.69,8H4.69C5.42,9.63 6.42,11.17 7.67,12.56L2.58,17.58L4,19L9,14L12.11,17.11L12.87,15.07M18.5,10H16.5L12,22H14L15.12,19H19.87L21,22H23L18.5,10M15.88,17L17.5,12.67L19.12,17H15.88Z";t.mdiRadioboxBlank="M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";t.mdiRadioboxMarked="M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z";t.mdiMoreHoriz="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z";t.mdiMenuDown="M7,10L12,15L17,10H7Z";t.mdiMenuLeft="M14,7L9,12L14,17V7Z";t.mdiMenuRight="M10,17L15,12L10,7V17Z";t.mdiFolderPlus="M10,4L12,6H20A2,2 0 0,1 22,8V18A2,2 0 0,1 20,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10M15,9V12H12V14H15V17H17V14H20V12H17V9H15Z"},,,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.setCallStore=t.getCallStore=void 0;t.setCallStore=function(e){n=e};t.getCallStore=function(){return n}},,,,,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getPartyName=t.contactStore=void 0;var a,o,i,l,s,u,c,d,f,p,g,h,b,v,m,y,C,S,x,k,P,w,A,T,I,j,_,R=r(n(12)),O=r(n(34)),B=r(n(13)),M=r(n(22)),U=r(n(5)),L=r(n(14)),F=r(n(20)),D=(r(n(23)),n(21)),V=n(9),N=n(50),E=n(49),H=n(11),z=n(4),W=n(80),G=n(15),K=new(a=function(){function e(){var t=this;(0,U.default)(this,e),(0,M.default)(this,"usersSearchTerm",o,this),(0,M.default)(this,"phonebookSearchTerm",i,this),(0,M.default)(this,"chatSearchTerm",l,this),(0,M.default)(this,"callSearchRecents",s,this),(0,M.default)(this,"loading",u,this),(0,M.default)(this,"hasLoadmore",c,this),(0,M.default)(this,"offset",d,this),this.numberOfContactsPerPage=20,this.loadContacts=(0,B.default)(R.default.mark((function e(){return R.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.waitPbx)();case 2:if("success"===(0,H.getAuthStore)().pbxState&&!t.loading){e.next=4;break}return e.abrupt("return");case 4:return t.loading=!0,e.next=7,N.pbx.getContacts({search_text:t.phonebookSearchTerm,offset:t.offset,limit:t.numberOfContactsPerPage}).then((function(e){e&&(t.setPhonebook(e),t.hasLoadmore=e.length===t.numberOfContactsPerPage)})).catch((function(e){G.RnAlert.error({message:(0,z.intlDebug)("Failed to load contact list",{}),err:e})}));case 7:t.loading=!1;case 8:case"end":return e.stop()}}),e)}))),(0,M.default)(this,"alreadyLoadContactsFirstTime",f,this),(0,M.default)(this,"loadContactsFirstTime",p,this),(0,M.default)(this,"loadMoreContacts",g,this),(0,M.default)(this,"refreshContacts",h,this),(0,M.default)(this,"selectedContactIds",b,this),(0,M.default)(this,"isDeleteState",v,this),(0,M.default)(this,"selectContactId",m,this),(0,M.default)(this,"removeContacts",y,this),(0,M.default)(this,"showPickerItem",C,this),(0,M.default)(this,"openPicker",S,this),(0,M.default)(this,"dismissPicker",x,this),this.getManagerContact=function(e){return window.Brekeke.Phonebook.getManager(e||W.intlStore.locale)},this.getItemPhonebook=function(e){var t;return null===(t=window.Brekeke.Phonebook.getManager(e||W.intlStore.locale))||void 0===t?void 0:t.item},this.getManageItems=function(e){var t,n=null===(t=window.Brekeke.Phonebook.getManager(e||W.intlStore.locale))||void 0===t?void 0:t.item;return n&&n.length?n.map((function(e){return Object.assign({},e,{name:e.id,disabled:void 0,label:e.id.startsWith("$")?e.caption:e.id,keyboardType:"phone"===e.type?"numeric":"default",maxLength:50})})):[]},(0,M.default)(this,"pbxUsers",k,this),this.getPbxUsers=(0,B.default)(R.default.mark((function e(){var n,r;return R.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=(0,H.getAuthStore)().getCurrentAccount()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,N.pbx.getUsers(n.pbxTenant);case 6:if(r=e.sent){e.next=9;break}return e.abrupt("return");case 9:t.pbxUsers=r.filter((function(e){return e[0]!==n.pbxUsername})).map((function(e){return{id:e[0],name:e[1]}})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),G.RnAlert.error({message:(0,z.intlDebug)("Failed to load PBX users",{}),err:e.t0});case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),this.setTalkerStatus=function(e,n,r){var a=t.getPbxUserById(e);if(a){if(a.talkers||(a.talkers=[]),r){var o=a.talkers.find((function(e){return e.id===n}));o?o.status=r:a.talkers.push({id:n,status:r})}else a.talkers=a.talkers.filter((function(e){return e.id!==n}));t.pbxUsers=(0,O.default)(t.pbxUsers)}},(0,M.default)(this,"extraPbxUsersMap",P,this),this.getPbxUserById=function(e){var n=t.pbxUsersMap[e]||t.extraPbxUsersMap[e];return n||t.extraPbxUsersLoadingMap[e]||(t.extraPbxUsersLoadingMap[e]=!0,t.extraPbxUsersBatch.push(e),t.getExtraPbxUsersBatch()),n},this.extraPbxUsersLoadingMap={},this.extraPbxUsersBatch=[],this.getExtraPbxUsersBatch=(0,D.debounce)((function(){var e=t.extraPbxUsersBatch;t.extraPbxUsersBatch=[],N.pbx.getExtraUsers(e).then((0,V.action)((function(e){null===e||void 0===e||e.forEach((function(e){t.extraPbxUsersMap[e.id]=e}))}))).catch((function(){})).then((function(){return e.forEach((function(e){delete t.extraPbxUsersLoadingMap[e]}))}))}),17),(0,M.default)(this,"ucUsers",w,this),this.updateUcUser=function(e){var n=t.getUcUserById(e.id);n&&((0,D.isEqual)(n,e)||(Object.assign(n,e),t.ucUsers=(0,O.default)(t.ucUsers)))},this.getUcUserById=function(e){return t.ucUsersMap[e]},(0,M.default)(this,"phoneBooks",A,this),(0,M.default)(this,"pbxBooks",T,this),(0,M.default)(this,"loadPbxBoook",I,this),(0,M.default)(this,"upsertPhonebook",j,this),(0,M.default)(this,"setPhonebook",_,this),this.getPhoneBookByPhoneNumber=function(e){var n;if(e)return null===(n=t.phoneBooks.filter((function(t){return t.info.$tel_mobile===e||t.info.$tel_home===e||t.info.$tel_work===e})))||void 0===n?void 0:n[0]},this.getParkNameByParkNumber=function(e){var t,n;if(e){var r=(0,H.getAuthStore)().getCurrentAccount();if(r){var a=(null===(t=r.parks)||void 0===t?void 0:t.map((function(e,t){var n;return{park:e,name:(null===(n=r.parkNames)||void 0===n?void 0:n[t])||""}})))||[];return null===(n=(0,D.uniqBy)(a,"park").find((function(t){return t.park===e})))||void 0===n?void 0:n.name}}},this.getPhonebookById=function(e){return t.phoneBooksMap[e]},this.clearStore=function(){t.phoneBooks=[],t.ucUsers=[],t.pbxUsers=[],t.loading=!1,t.hasLoadmore=!1,t.showPickerItem=null,t.pbxBooks=[],t.alreadyLoadContactsFirstTime=!1,t.selectedContactIds={}}}return(0,L.default)(e,[{key:"pbxUsersMap",get:function(){return(0,E.arrToMap)(this.pbxUsers,"id",(function(e){return e}))}},{key:"ucUsersMap",get:function(){return(0,E.arrToMap)(this.ucUsers,"id",(function(e){return e}))}},{key:"phoneBooksMap",get:function(){return(0,E.arrToMap)(this.phoneBooks,"id",(function(e){return e}))}}]),e}(),o=(0,F.default)(a.prototype,"usersSearchTerm",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=(0,F.default)(a.prototype,"phonebookSearchTerm",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=(0,F.default)(a.prototype,"chatSearchTerm",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=(0,F.default)(a.prototype,"callSearchRecents",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=(0,F.default)(a.prototype,"loading",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=(0,F.default)(a.prototype,"hasLoadmore",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=(0,F.default)(a.prototype,"offset",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=(0,F.default)(a.prototype,"alreadyLoadContactsFirstTime",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=(0,F.default)(a.prototype,"loadContactsFirstTime",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.alreadyLoadContactsFirstTime||e.loadContacts().then((function(){e.alreadyLoadContactsFirstTime=!0}))}}}),g=(0,F.default)(a.prototype,"loadMoreContacts",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.offset+=e.numberOfContactsPerPage,e.loadContacts()}}}),h=(0,F.default)(a.prototype,"refreshContacts",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.offset=0,e.loadContacts()}}}),b=(0,F.default)(a.prototype,"selectedContactIds",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),v=(0,F.default)(a.prototype,"isDeleteState",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=(0,F.default)(a.prototype,"selectContactId",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedContactIds[t]?delete e.selectedContactIds[t]:e.selectedContactIds[t]=!0}}}),y=(0,F.default)(a.prototype,"removeContacts",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.forEach((function(t){delete e.phoneBooksMap[t.toString()]})),e.phoneBooks=Object.values(e.phoneBooksMap)}}}),C=(0,F.default)(a.prototype,"showPickerItem",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=(0,F.default)(a.prototype,"openPicker",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.showPickerItem=t}}}),x=(0,F.default)(a.prototype,"dismissPicker",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showPickerItem=null}}}),k=(0,F.default)(a.prototype,"pbxUsers",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,F.default)(a.prototype,"pbxUsersMap",[V.computed],Object.getOwnPropertyDescriptor(a.prototype,"pbxUsersMap"),a.prototype),P=(0,F.default)(a.prototype,"extraPbxUsersMap",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=(0,F.default)(a.prototype,"ucUsers",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,F.default)(a.prototype,"ucUsersMap",[V.computed],Object.getOwnPropertyDescriptor(a.prototype,"ucUsersMap"),a.prototype),A=(0,F.default)(a.prototype,"phoneBooks",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=(0,F.default)(a.prototype,"pbxBooks",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=(0,F.default)(a.prototype,"loadPbxBoook",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.pbxBooks=[],N.pbx.getPhonebooks().then((function(t){t&&(e.pbxBooks=t)}))}}}),j=(0,F.default)(a.prototype,"upsertPhonebook",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n,r,a,o=e.getPhonebookById(t.id);o?Object.assign(o,t):e.phoneBooks.push(t);var i=(null===(n=t.info)||void 0===n?void 0:n.$tel_mobile)||(null===(r=t.info)||void 0===r?void 0:r.$tel_work)||(null===(a=t.info)||void 0===a?void 0:a.$tel_home);i&&(0,H.getAuthStore)().updatePartyNameRecentCall({partyName:t.display_name,partyNumber:i});e.phoneBooks=(0,O.default)(e.phoneBooks)}}}),_=(0,F.default)(a.prototype,"setPhonebook",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t&&(Array.isArray(t)||(t=[t]),e.offset>0?e.phoneBooks=(0,D.uniqBy)([].concat((0,O.default)(e.phoneBooks),(0,O.default)(t)),"id"):e.phoneBooks=(0,D.uniqBy)((0,O.default)(t),"id"))}}}),(0,F.default)(a.prototype,"phoneBooksMap",[V.computed],Object.getOwnPropertyDescriptor(a.prototype,"phoneBooksMap"),a.prototype),a);t.contactStore=K;t.getPartyName=function(e){var t,n;return e&&(null===(t=K.getPbxUserById(e))||void 0===t?void 0:t.name)||(null===(n=K.getPhoneBookByPhoneNumber(e))||void 0===n?void 0:n.display_name)||K.getParkNameByParkNumber(e)}},,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0;var a=r(n(35)),o=n(21),i=n(6),l=n(1),s=n(2),u=n(210),c=n(71),d=n(689),f=n(697),p=n(703),g=n(7),h=n(3),b=s.StyleSheet.create({Layout:{flex:1,height:"100%",backgroundColor:"white"},Layout__transparent:{backgroundColor:"transparent"},Scroller:{flexGrow:1},FooterSpaceInsideScroller:{height:15},LoadMore:{alignSelf:"center",paddingBottom:15,fontSize:g.v.fontSizeSmall,paddingHorizontal:10},LoadMore__btn:{color:g.v.colors.primary},LoadMore__finished:{color:g.v.colors.warning}}),v=(0,i.observer)((function(e){var t=(0,l.useState)(!1),n=(0,a.default)(t,2),r=n[0],i=n[1],g=Object.assign({},e),v=g.noScroll?s.View:s.ScrollView,m=Object.entries(g).reduce((function(e,t){var n=(0,a.default)(t,2),r=n[0],i=n[1];return r.startsWith("container")&&(delete g[r],r=r.replace("container",""),e[r=(0,o.lowerFirst)(r)]=i),e}),{});Object.assign(m,{style:[b.Layout,g.transparent&&b.Layout__transparent]}),g.noScroll||Object.assign(m,{contentContainerStyle:[b.Scroller],keyboardShouldPersistTaps:"always",onScroll:function(t){var n;t.nativeEvent.contentOffset.y>60!==r&&i(!r),null===(n=e.containerOnScroll)||void 0===n||n.call(e,t)},scrollEventThrottle:170,showsVerticalScrollIndicator:!1}),g.compact&&(g.transparent=!1);var y=101;g.menu&&(y+=35),g.compact&&(y-=46);var C=(0,u.getBottomSpace)();return g.fabRender?C+=40:c.RnKeyboard.isKeyboardShowing||(g.menu&&(C+=48),g.fabOnNext&&(C+=56)),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(v,Object.assign({},m,{children:[(0,h.jsx)(s.View,{style:{height:y}}),g.children,(0,h.jsx)(s.View,{style:b.FooterSpaceInsideScroller})]})),g.isShowToastMessage&&(0,h.jsx)(p.Toast,{isVisible:g.isShowToastMessage,title:g.incomingMessage||"new message",containerStyles:{marginTop:y,backgroundColor:"yellow"}}),!g.isTab&&(0,h.jsx)(s.View,{style:{height:C}}),(0,h.jsx)(d.Footer,Object.assign({},g,{menu:g.menu})),(0,h.jsx)(f.Header,Object.assign({},g,{compact:g.compact||r}))]})}));t.Layout=v},,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.saveLastSignedInId=t.getLastSignedInId=t.getAccountUniqueId=t.compareAccount=t.accountStore=void 0;var a,o,i,l,s,u,c,d,f=r(n(12)),p=r(n(34)),g=r(n(13)),h=r(n(22)),b=r(n(5)),v=r(n(14)),m=r(n(20)),y=(r(n(23)),r(n(103))),C=n(21),S=n(9),x=n(2),k=n(121),P=n(124),w=n(8),A=n(7),T=n(49),I=n(62),j=n(46),_=n(105),R=n(4),O=n(15),B=new Promise((function(e){d=e})),M=(a=function(){function e(){var t=this;(0,b.default)(this,e),(0,h.default)(this,"appInitDone",o,this),(0,h.default)(this,"pnSyncLoadingMap",i,this),this.waitStorageLoaded=function(){return B},(0,h.default)(this,"accounts",l,this),(0,h.default)(this,"accountData",s,this),this.genEmptyAccount=function(){return{id:(0,k.v4)(),pbxTenant:"",pbxUsername:"",pbxHostname:"",pbxPort:"",pbxPassword:"",pbxPhoneIndex:"",pbxTurnEnabled:!1,pushNotificationEnabled:"web"!==x.Platform.OS,parks:[],parkNames:[],ucEnabled:!1,navIndex:-1,navSubMenus:[]}},this.loadAccountsFromLocalStorage=(0,g.default)(f.default.mark((function e(){var n,r,a,o,i,l;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.RnAsyncStorage.getItem("_api_profiles");case 2:if((r=e.sent)&&!Array.isArray(r))try{a=JSON.parse(r)}catch(s){a=void 0}a&&(i=(o=a).profileData,l=o.profiles,Array.isArray(a)&&(l=a,i=[]),l.forEach((function(e){e.pbxTenant=e.pbxTenant||"-"})),(0,S.runInAction)((function(){t.accounts=l.filter((function(e){return e.id&&e.pbxUsername})),l.length!==t.accounts.length&&console.error("loadAccountsFromLocalStorage error missing id or pbxUsername"),t.accountData=(0,C.uniqBy)(i,"id")}))),null===(n=d)||void 0===n||n(),d=void 0;case 7:case"end":return e.stop()}}),e)}))),this.saveAccountsToLocalStorage=(0,g.default)(f.default.mark((function e(){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=t.accounts.filter((function(e){return e.id&&e.pbxUsername}))).length!==t.accounts.length&&console.error("saveAccountsToLocalStorage error missing id or pbxUsername"),e.next=5,w.RnAsyncStorage.setItem("_api_profiles",JSON.stringify({profiles:n,profileData:t.accountData}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O.RnAlert.error({message:(0,R.intlDebug)("Failed to save accounts to local storage",{}),err:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this._saveAccountsToLocalStorageDebounced=(0,C.debounce)(this.saveAccountsToLocalStorage,100,{maxWait:1e3}),this.saveAccountsToLocalStorageDebounced=function(){return t.accounts.forEach((function(e){e.pbxTenant=e.pbxTenant||"-"})),t._saveAccountsToLocalStorageDebounced()},(0,h.default)(this,"upsertAccount",u,this),(0,h.default)(this,"removeAccount",c,this),this.find=function(){var e=(0,g.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B;case 2:return e.abrupt("return",D.accounts.find((function(e){return F(e,t)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.findByPn=function(e){return t.find({pbxUsername:e.to,pbxTenant:e.tenant,pbxHostname:e.pbxHostname,pbxPort:e.pbxPort})},this.findData=function(){var e=(0,g.default)(f.default.mark((function e(n){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B;case 2:return e.abrupt("return",t.findDataSync(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.findDataSync=function(e){if(e&&e.pbxUsername&&e.pbxTenant&&e.pbxHostname&&e.pbxPort){var n=U(e);return t.accountData.find((function(e){return e.id===n}))}},this.findDataByPn=function(){var e=(0,g.default)(f.default.mark((function e(n){var r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.findByPn(n);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",t.findData(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.findDataAsync=function(){var e=(0,g.default)(f.default.mark((function e(n){var r,a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.findData(n);case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return a={id:U(n),accessToken:"",recentCalls:[],recentChats:[],pbxBuddyList:void 0},e.next=8,(0,j.waitTimeout)(17);case 8:return t.updateAccountData(a),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateAccountData=function(e){var n=[e].concat((0,p.default)(t.accountData.filter((function(t){return t.id!==e.id}))));n.length>20&&n.pop(),(0,S.runInAction)((function(){t.accountData=n})),t.saveAccountsToLocalStorageDebounced()}}return(0,v.default)(e,[{key:"accountsMap",get:function(){return(0,T.arrToMap)(this.accounts,"id",(function(e){return e}))}}]),e}(),o=(0,m.default)(a.prototype,"appInitDone",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,m.default)(a.prototype,"pnSyncLoadingMap",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=(0,m.default)(a.prototype,"accounts",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,m.default)(a.prototype,"accountsMap",[S.computed],Object.getOwnPropertyDescriptor(a.prototype,"accountsMap"),a.prototype),s=(0,m.default)(a.prototype,"accountData",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,m.default)(a.prototype,"upsertAccount",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.accounts.find((function(e){return e.id===t.id}));if(n){var r=Object.assign({},n);Object.assign(n,t),U(r)!==U(n)?(r.pushNotificationEnabled=!1,(0,P.SyncPnToken)().sync(r,{noUpsert:!0})):"boolean"===typeof t.pushNotificationEnabled&&t.pushNotificationEnabled!==r.pushNotificationEnabled&&(n.pushNotificationEnabledSynced=!1,(0,P.SyncPnToken)().sync(n,{onError:function(t){O.RnAlert.error({message:(0,R.intlDebug)("Failed to sync Push Notification settings for {{$0}}",{$0:n.pbxUsername}),err:t}),n.pushNotificationEnabled=r.pushNotificationEnabled,n.pushNotificationEnabledSynced=r.pushNotificationEnabledSynced,e.saveAccountsToLocalStorageDebounced()}}))}else e.accounts.push(t);e.saveAccountsToLocalStorageDebounced()}}}),c=(0,m.default)(a.prototype,"removeAccount",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.accounts.find((function(e){return e.id===t}));e.accounts=e.accounts.filter((function(e){return e.id!==t})),e.saveAccountsToLocalStorageDebounced(),n&&(n.pushNotificationEnabled=!1,(0,P.SyncPnToken)().sync(n,{noUpsert:!0}))}}}),a),U=function(e){return(0,y.default)({u:e.pbxUsername,t:e.pbxTenant||"-",h:e.pbxHostname,p:e.pbxPort})};t.getAccountUniqueId=U;var L=function(e,t,n){var r=e[n],a=t[n];return!r||!a||r===a},F=function(e,t){return e.pbxUsername&&L(e,t,"pbxUsername")&&L(e,t,"pbxTenant")&&L(e,t,"pbxHostname")&&L(e,t,"pbxPort")};t.compareAccount=F;var D=new M;t.accountStore=D;var V=function(){var e=(0,g.default)(f.default.mark((function e(t){var n,r,a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.RnAsyncStorage.getItem("lastSignedInId");case 2:r=e.sent,a=void 0;try{a=r&&JSON.parse(r)}catch(o){}if(a&&"h"in a&&(a=r),null!==(n=a)&&void 0!==n&&n.id||(a={id:a||r||"",at:Date.now(),version:A.currentVersion}),t){e.next=9;break}return e.abrupt("return",a);case 9:if(!(a.logoutPressed||(0,_.compareSemVer)(A.currentVersion,a.version)>0)){e.next=12;break}return a.autoSignInBrekekePhone=!1,e.abrupt("return",a);case 12:return e.next=14,I.BrekekeUtils.systemUptimeMs();case 14:return a.uptime=e.sent,a.autoSignInBrekekePhone=a.uptime>0&&a.uptime>Date.now()-a.at,e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getLastSignedInId=V;var N=function(){var e=(0,g.default)(f.default.mark((function e(t){var n,r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t){e.next=8;break}return e.next=3,V();case 3:return(n=e.sent).logoutPressed=!0,e.next=7,w.RnAsyncStorage.setItem("lastSignedInId",JSON.stringify(n));case 7:return e.abrupt("return");case 8:return r=JSON.stringify({id:t,at:Date.now(),version:A.currentVersion}),e.next=11,w.RnAsyncStorage.setItem("lastSignedInId",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.saveLastSignedInId=N},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundTimer=void 0;var a=n(2),o=r(n(63)),i="web"===a.Platform.OS?window:o.default;t.BackgroundTimer=i},,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.chatStore=t.TIMEOUT_TRANSFER_VIDEO=t.TIMEOUT_TRANSFER_IMAGE=t.FileEvent=void 0;var a,o,i,l,s,u,c=r(n(12)),d=r(n(86)),f=r(n(13)),p=r(n(34)),g=r(n(22)),h=r(n(5)),b=r(n(14)),v=r(n(20)),m=(r(n(23)),r(n(213))),y=n(21),C=n(9),S=n(2),x=r(n(325)),k=n(40),P=n(49),w=n(33),A=n(88),T=n(695),I=n(106),j=n(321),_=n(328),R=n(32),O=n(11),B=n(19),M=n(26),U=n(4),L=n(10),F=n(15),D=n(75),V={onFileReceived:"onFileReceived",onFileProgress:"onFileProgress",onFileFinished:"onFileFinished"};t.FileEvent=V;t.TIMEOUT_TRANSFER_IMAGE=6e4;var N=18e4;t.TIMEOUT_TRANSFER_VIDEO=N;var E=(a=function(){function e(){var t=this;(0,h.default)(this,e),this.timeoutTransferImage={},(0,g.default)(this,"messagesByThreadId",o,this),this.getMessagesByThreadId=function(e){return t.messagesByThreadId[e]||[]},(0,g.default)(this,"threadConfig",i,this),this.getNumberWebchatNoti=function(){var e;return null===(e=t.groups.filter((function(e){return e.webchat&&e.webchat.conf_status===k.Constants.CONF_STATUS_INVITED_WEBCHAT})))||void 0===e?void 0:e.length},this.pushChatNotification=function(e,t,n,r){"web"!==S.Platform.OS&&("android"===S.Platform.OS?x.default.presentLocalNotification({title:e,body:t,threadId:n,isGroupChat:r,number:0,sound:"ding.mp3",priority:"high",show_in_foreground:!0,local_notification:!0,wake_screen:!1,ongoing:!1,lights:!0,channel:"channel-"+Date.now(),icon:"ic_launcher",id:"message-"+Date.now(),pre_app_state:S.AppState.currentState,my_custom_data:"local_notification",is_local_notification:"local_notification"}):m.default.getApplicationIconBadgeNumber((function(a){a=Number(a)||0,m.default.addNotificationRequest({id:"message-"+Date.now(),title:e,body:t,badge:a,sound:"ding.mp3",userInfo:{id:"message-"+Date.now(),aps:{title:e,threadId:n,isGroupChat:r,body:t,my_custom_data:"local_notification",pre_app_state:S.AppState.currentState,local_notification:!0,is_local_notification:"local_notification"}}})})))},this.pushMessages=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.groups.some((function(t){return t.id===e})),o=t.isWebchatJoined(e),i=t.isWebchat(e);Array.isArray(n)||(n=[n]);var l=t.getMessagesByThreadId(e);l.push.apply(l,(0,p.default)(n)),t.messagesByThreadId[e]=(0,y.sortBy)((0,y.uniqBy)(l,"id"),"created");var s=(0,A.filterTextOnly)(n);if(s.length&&(!i||o)){t.updateThreadConfig(e,a,{isUnread:r});var u,c,d="";if(a)d=null===(u=H.getGroupById(e))||void 0===u?void 0:u.name;else d=(0,M.getPartyName)(e)||e;if("web"===S.Platform.OS&&t.getThreadConfig(e).isUnread&&1===n.length){var f,g=d+": "+(null===(f=n[0])||void 0===f?void 0:f.text)||"";(0,_.webShowNotification)(g,d)}if(1===n.length&&"active"!==S.AppState.currentState)t.pushChatNotification(d,(null===(c=n[0])||void 0===c?void 0:c.text)||"",e,a);var h=(0,B.getCallStore)(),b=h.calls.some((function(e){return e.answered}))||Object.values(h.callkeepActionMap).some((function(e){return"answerCall"===e})),v=D.RnStacker.stacks[D.RnStacker.stacks.length-1],m=!b&&"active"===S.AppState.currentState&&(a?!("PageChatGroupDetail"===(null===v||void 0===v?void 0:v.name)&&(null===v||void 0===v?void 0:v.groupId)===e):!("PageChatDetail"===(null===v||void 0===v?void 0:v.name)&&(null===v||void 0===v?void 0:v.buddy)===e));m&&t.playChatNotificationSoundVibration()}},this.handleMoveToChatGroupDetail=function(){var e=(0,f.default)(c.default.mark((function e(t){var n,r,a,o,i,l,s;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,O.getAuthStore)(),null!==(r=n.getCurrentAccount())&&void 0!==r&&r.ucEnabled){e.next=5;break}throw new Error("Failed to handle UC group chat: "+(r?"UC is disabled":"not signed in"));case 5:if("success"===n.ucState){e.next=10;break}return F.RnAlert.prompt({title:"...",message:(0,U.intl)("Connecting to {{$0}}...",{$0:"UC"}),confirmText:"OK",dismissText:!1}),e.next=9,(0,O.waitUc)();case 9:F.RnAlert.dismiss();case 10:if(a=(0,L.Nav)(),o=k.uc.getChatGroupInfo(t),i=o.conf_status,l=o.subject||t,i!==k.Constants.CONF_STATUS_INACTIVE){e.next=23;break}return F.RnAlert.prompt({title:l,message:(0,U.intl)("You have rejected this group or it has been deleted",{}),confirmText:"OK",dismissText:!1}),e.next=18,n.getCurrentDataAsync();case 18:(s=e.sent).recentChats=s.recentChats.filter((function(e){return e.id!==t})),R.accountStore.saveAccountsToLocalStorageDebounced(),e.next=24;break;case 23:i===k.Constants.CONF_STATUS_INVITED?F.RnAlert.prompt({title:l,message:(0,U.intl)("Do you want to join this group?",{}),confirmText:(0,U.intl)("Join",{}),onConfirm:function(){var e=(0,f.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.uc.joinChatGroup(t);case 2:a.customPageIndex=a.goToPageChatGroupDetail,a.goToPageChatGroupDetail({groupId:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onDismiss:function(){k.uc.leaveChatGroup(t).catch((function(){}))}}):(a.customPageIndex=a.goToPageChatGroupDetail,a.goToPageChatGroupDetail({groupId:t}));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,g.default)(this,"chatNotificationSoundRunning",l,this),this.playChatNotificationSoundVibration=function(){"web"!==S.Platform.OS?t.chatNotificationSoundRunning||((0,T.rnVibrate)(),t.chatNotificationSoundRunning=!0,w.BackgroundTimer.setTimeout((function(){t.chatNotificationSoundRunning=!1}),700)):(0,j.webPlayDing)()},this.removeWebchatItem=function(e){t.removeGroup(e)},this.getThreadConfig=function(e){return t.threadConfig[e]||{}},this.updateThreadConfig=function(e,n,r){t.threadConfig=Object.assign({},t.threadConfig,(0,d.default)({},e,Object.assign({},t.getThreadConfig(e),r,{id:e,isGroup:n})))},(0,g.default)(this,"filesMap",s,this),this.download=function(e){Object.assign(e,{save:"started"}),H.upsertFile(e),(0,I.saveBlobFile)(e.id,e.topic_id,e.fileType).then((function(n){t.filesMap[e.id]=Object.assign(t.filesMap[e.id],{url:n,save:"success"})})).catch((function(){t.filesMap[e.id]=Object.assign(t.filesMap[e.id],{url:"",save:"failure"})}))},this.startTimeout=function(e,n){t.timeoutTransferImage[e]||(t.timeoutTransferImage[e]=w.BackgroundTimer.setTimeout((function(){t.clearTimeout(e),k.uc.rejectFile({id:e})}),"video"===n?N:6e4))},this.clearTimeout=function(e){t.timeoutTransferImage[e]&&(w.BackgroundTimer.clearTimeout(t.timeoutTransferImage[e]),delete t.timeoutTransferImage[e])},this.updateTimeout=function(e){t.timeoutTransferImage[e]&&(t.clearTimeout(e),t.startTimeout(e))},this.upsertFile=function(e,n){var r=t.filesMap[e.id];if(r){var a="stopped"===e.state||"success"===e.state||"failure"===e.state;t.filesMap[e.id]=Object.assign(r,e),n&&n===V.onFileProgress?t.updateTimeout(e.id):a&&t.clearTimeout(e.id)}else{t.filesMap[e.id]=e;var o="image"===e.fileType||"video"===e.fileType;e.incoming&&o&&t.download(e),t.startTimeout(e.id,e.fileType)}},this.removeFile=function(e){delete t.filesMap[e]},this.getFileById=function(e){return e?t.filesMap[e]:void 0},(0,g.default)(this,"groups",u,this),this.upsertGroup=function(e){var n=t.getGroupById(e.id);n?Object.assign(n,e):t.groups.push(e),t.groups=(0,p.default)(t.groups)},this.removeGroup=function(e){delete t.messagesByThreadId[e],delete t.threadConfig[e],t.groups=t.groups.filter((function(t){return t.id!==e}))},this.getGroupById=function(e){return t.groupsMap[e]},this.clearStore=function(){t.messagesByThreadId={},t.threadConfig={},t.groups=[],t.filesMap={},t.timeoutTransferImage={}}}return(0,b.default)(e,[{key:"unreadCount",get:function(){var e=this,t={},n=(0,A.filterTextOnly)(Object.values(this.threadConfig).filter((function(n){return t[n.id]=!0,n.isUnread&&e.getMessagesByThreadId(n.id).length}))).length,r=(0,O.getAuthStore)(),a=r.getCurrentData();return a||R.accountStore.findDataAsync(r.getCurrentAccount()),n+(0,A.filterTextOnly)(null===a||void 0===a?void 0:a.recentChats.filter((function(e){return!t[e.id]&&e.unread}))).length}},{key:"threadIdsOrderedByRecent",get:function(){var e=this;return(0,y.sortBy)(Object.keys(this.messagesByThreadId),(function(t){var n;return(null===(n=e.getMessagesByThreadId(t)[0])||void 0===n?void 0:n.created)||-1}))}},{key:"getWebChatInactiveIds",value:function(){return this.groups.filter((function(e){return e.webchat&&e.webchat.conf_status!==k.Constants.CONF_STATUS_JOINED})).map((function(e){return e.id}))}},{key:"isWebchatJoined",value:function(e){return this.groups.filter((function(e){return e.webchat&&e.webchat.conf_status===k.Constants.CONF_STATUS_JOINED})).some((function(t){return t.id===e}))}},{key:"isWebchat",value:function(e){return this.groups.filter((function(e){return e.webchat})).some((function(t){return t.id===e}))}},{key:"groupsMap",get:function(){return(0,P.arrToMap)(this.groups,"id",(function(e){return e}))}}]),e}(),o=(0,v.default)(a.prototype,"messagesByThreadId",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=(0,v.default)(a.prototype,"threadConfig",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,v.default)(a.prototype,"unreadCount",[C.computed],Object.getOwnPropertyDescriptor(a.prototype,"unreadCount"),a.prototype),(0,v.default)(a.prototype,"threadIdsOrderedByRecent",[C.computed],Object.getOwnPropertyDescriptor(a.prototype,"threadIdsOrderedByRecent"),a.prototype),l=(0,v.default)(a.prototype,"chatNotificationSoundRunning",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,v.default)(a.prototype,"filesMap",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=(0,v.default)(a.prototype,"groups",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,v.default)(a.prototype,"groupsMap",[C.computed],Object.getOwnPropertyDescriptor(a.prototype,"groupsMap"),a.prototype),a),H=new E;t.chatStore=H},,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.uc=t.isUcBuddy=t.UC=t.Logger=t.Constants=t.ChatClient=void 0;var a=r(n(12)),o=r(n(13)),i=r(n(5)),l=r(n(18)),s=r(n(17));n(212);var u=r(n(326)),c=r(n(98)),d=n(2),f=n(11),p=n(214),g=u.default,h=g.ChatClient,b=g.Logger,v=g.Constants;t.Constants=v,t.Logger=b,t.ChatClient=h;var m=function(e){return"user_id"in e&&"group"in e};t.isUcBuddy=m;var y={0:"offline",1:"online",2:"idle",3:"busy"},C=function(e){return y[e]||y[0]},S={0:"waiting",1:"waiting",2:"started",3:"success",4:"stopped",5:"stopped",6:"failure"},x=function(e){return S[e]||S[0]},k=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n),(e=t.call(this)).onConnectionStopped=function(t){e.emit("connection-stopped",t)},e.onUserUpdated=function(t){t&&e.emit("user-updated",{id:t.user_id,name:t.name,avatar:t.profile_image_url,status:C(t.status),statusText:t.display})},e.onTextReceived=function(t){t&&t.sender&&(t.conf_id?e.emit("group-chat-created",{id:t.received_text_id,group:t.conf_id,text:t.text,creator:t.sender.user_id,created:t.sent_ltime,conf_id:t.conf_id}):e.emit("buddy-chat-created",{id:t.received_text_id,text:t.text,creator:t.sender.user_id,created:t.sent_ltime}))},e.onFileReceived=function(t){if(t&&t.fileInfo){var n=(0,p.formatFileType)(t.fileInfo.name),r={id:t.fileInfo.file_id,name:t.fileInfo.name,size:t.fileInfo.size,incoming:!0,state:x(t.fileInfo.status),transferPercent:t.fileInfo.progress,fileType:n,topic_id:t.topic_id};e.emit("file-received",r),t.conf_id?e.emit("group-chat-created",{id:t.text_id,creator:t.fileInfo.target.user_id,group:t.conf_id,file:r.id,text:r.name,created:t.sent_ltime}):e.emit("buddy-chat-created",{id:t.text_id,creator:t.fileInfo.target.user_id,file:r.id,text:r.name,created:t.sent_ltime})}},e.onFileProgress=function(t){t&&t.fileInfo&&e.emit("file-progress",{id:t.fileInfo.file_id,state:x(t.fileInfo.status),transferPercent:t.fileInfo.progress})},e.onFileFinished=function(t){t&&t.fileInfo&&e.emit("file-finished",{id:t.fileInfo.file_id,state:x(t.fileInfo.status),transferPercent:t.fileInfo.progress})},e.onGroupInvited=function(t){var n;if(t&&t.conference){var r=null===(n=t.conference.invite_properties)||void 0===n?void 0:n.webchatfromguest;e.emit("chat-group-invited",{id:t.conference.conf_id,name:t.conference.subject||t.conference.creator.user_name||"",inviter:t.conference.from.user_id,members:t.conference.user||[],webchat:r?t.conference:null})}},e.onGroupUpdated=function(t){var n,r,a;if(t&&t.conference){var o=null===(n=t.conference.invite_properties)||void 0===n?void 0:n.webchatfromguest,i=((null===(r=t.conference)||void 0===r?void 0:r.subject)||(null===(a=t.conference.creator)||void 0===a?void 0:a.user_name)||"")+(o?" - Webchat":"");0!==t.conference.conf_status?e.emit("chat-group-updated",{id:t.conference.conf_id,name:i,jointed:2===t.conference.conf_status,members:(t.conference.user||[]).filter((function(e){return 2===e.conf_status})).map((function(e){return e.user_id})),webchat:o?t.conference:null}):o?e.emit("chat-group-updated",{id:t.conference.conf_id,name:i,jointed:!1,webchat:o?t.conference:null}):e.emit("chat-group-revoked",{id:t.conference.conf_id})}},e.connect=function(t,n){n.indexOf(":")<0&&(n+=":443");var r=n.endsWith(":80")?"http":"https";return new Promise((function(a,o){return e.client.signIn(r+"://"+n,"uc",t.pbxTenant,t.pbxUsername,t.pbxPassword,void 0,(function(){return a(void 0)}),o)}))},e.disconnect=function(){e.client.signOut()},e.me=function(){var t=e.client.getProfile()||{},n=e.client.getStatus()||{};return{id:t.user_id,name:t.name,avatar:t.profile_image_url,status:C(n.status),statusText:n.display}},e.saveProperties=function(t,n){return new Promise((function(r,a){return e.client.saveProperties(null,null,{screened:t,user:n},(function(){return r(void 0)}),a)}))},e.setStatus=function(t,n){var r="0";return"online"===t&&(r="1"),"busy"===t&&(r="3"),new Promise((function(t,a){return e.client.changeStatus(r,n,(function(){return t(void 0)}),a)}))},e.getUsers=function(){var t=e.client.getBuddylist();if(!t||!Array.isArray(t.user))return[];var n=[];return t.user.forEach((function(e){m(e)&&n.push({id:e.user_id,name:e.name,avatar:e.profile_image_url,status:y[0],statusText:""})})),n},e.getProfile=function(){return e.client.getProfile()},e.getConfigProperties=function(){var t=(0,f.getAuthStore)();return t.ucConfig||(t.ucConfig=e.client.getConfigProperties()),t.ucConfig},e.readUnreadChats=function(){var t=(0,o.default)(a.default.mark((function t(n){var r,o;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,n){e.client.receiveUnreadText(t,n)}));case 2:r=t.sent,o=r.messages.filter((function(e){var t;return e.requires_read&&(null===(t=e.sender)||void 0===t?void 0:t.user_id)===n})).map((function(e){return e.received_text_id})),e.client.readText(o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getUnreadChats=(0,o.default)(a.default.mark((function t(){var n,r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,n){e.client.receiveUnreadText(t,n)}));case 2:if((n=t.sent)&&Array.isArray(n.messages)){t.next=5;break}return t.abrupt("return",[]);case 5:return r=n.messages.filter((function(e){return e.requires_read})).map((function(e){return e.received_text_id})),e.client.readText(r),t.abrupt("return",n.messages.map((function(e){return{id:e.received_text_id,text:e.text,creator:e.sender&&e.sender.user_id,created:e.sent_ltime}})));case 8:case"end":return t.stop()}}),t)}))),e.getBuddyChats=function(){var t=(0,o.default)(a.default.mark((function t(n){var r,o,i=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,new Promise((function(t,a){return e.client.searchTexts({user_id:n,max:r.max,begin:r.begin,end:r.end,asc:r.asc},t,a)}));case 3:if((o=t.sent)&&Array.isArray(o.logs)){t.next=6;break}return t.abrupt("return",[]);case 6:return t.abrupt("return",o.logs.map((function(e){return{id:e.log_id,text:e.content,type:e.ctype,creator:e.sender.user_id,created:e.ltime}})));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getGroupChats=function(){var t=(0,o.default)(a.default.mark((function t(n){var r,o,i=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,new Promise((function(t,a){return e.client.searchTexts({conf_id:n,max:r.max,begin:r.begin,end:r.end,asc:r.asc},t,a)}));case 3:if((o=t.sent)&&Array.isArray(o.logs)){t.next=6;break}return t.abrupt("return",[]);case 6:return t.abrupt("return",o.logs.map((function(e){return{id:e.log_id,text:e.content,type:e.ctype,creator:e.sender.user_id,created:e.ltime}})));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendBuddyChatText=function(t,n){return new Promise((function(r,a){return e.client.sendText(n,{user_id:t},(function(t){return r({id:t.text_id,text:n,creator:e.client.getProfile().user_id,created:t.ltime,ctype:v.CTYPE_TEXT})}),a)}))},e.sendCallResult=function(t,n){var r=JSON.stringify({talklen:t});return new Promise((function(t,a){return e.client.sendCallResult({user_id:n},r,(function(n){return t({id:n.text_id,text:r,creator:e.client.getProfile().user_id,created:n.ltime,ctype:v.CTYPE_CALL_RESULT})}),a)}))},e.sendGroupChatText=function(t,n){return new Promise((function(r,a){return e.client.sendConferenceText(n,t,(function(t){return r({id:t.text_id,text:n,creator:e.client.getProfile().user_id,created:t.ltime})}),a)}))},e.createChatGroup=function(){var t=(0,o.default)(a.default.mark((function t(n){var r,o,i=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:[],t.next=3,new Promise((function(t,a){e.client.createConference(n,r,t,a)}));case 3:return o=t.sent,t.abrupt("return",{id:o.conference.conf_id,name:o.conference.subject,jointed:!0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.joinChatGroup=function(){var t=(0,o.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,r){e.client.joinConference(n,void 0,(function(){return t(void 0)}),r)}));case 2:return t.abrupt("return",{id:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getChatGroupInfo=function(t){return e.client.getConference(t)},e.answerWebchatConference=function(){var t=(0,o.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,r){e.client.joinConference(n,{exclusive:!0},(function(){return t(void 0)}),r)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.joinWebchatConference=function(){var t=(0,o.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,r){e.client.joinConference(n,{exclusive:!1},(function(){return t(void 0)}),r)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.leaveChatConference=function(){var t=(0,o.default)(a.default.mark((function t(n,r){var o;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,a){e.client.leaveConference({conf_id:n,rejoinable:r},t,a)}));case 2:return o=t.sent,t.abrupt("return",o);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.leaveChatGroup=function(){var t=(0,o.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,r){e.client.leaveConference({conf_id:n,rejoinable:!1},(function(){return t(void 0)}),r)}));case 2:return t.abrupt("return",{id:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.inviteChatGroupMembers=function(t,n){return new Promise((function(r,a){e.client.inviteToConference(t,n,(function(){return r(void 0)}),a)}))},e.acceptFile=function(t){return new Promise((function(n,r){var a=new XMLHttpRequest;a.responseType="blob",a.onload=function(){200===this.status&&n(this.response)},e.client.acceptFileWithXhr(t,a,r)}))},e.rejectFile=function(){var t=(0,o.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.file_id_target){t.next=4;break}n.file_id_target.map((function(t){return new Promise((function(n,r){e.client.cancelFile(t,(function(e){e?r(e):n(void 0)}))}))})),t.next=6;break;case 4:if(!n.id){t.next=6;break}return t.abrupt("return",new Promise((function(t,r){e.client.cancelFile(n.id||"",(function(e){e?r(e):t(void 0)}))})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendFile=function(){var t=(0,o.default)(a.default.mark((function t(n,r){var o,i,l,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"web"===d.Platform.OS&&((o=document.createElement("input")).type="file",o.name="file",o.files=function(){var e;return window.DataTransfer?e=new DataTransfer:window.ClipboardEvent&&(e=new ClipboardEvent("").clipboardData||void 0),e?(e.items.add(r),e.files):(console.error("Can not set input.files: empty data transfer"),null)}(),document.createElement("form").appendChild(o)),"web"!==d.Platform.OS&&((l=new FormData).append("file",Object.assign({},r,{type:"multipart/form-data"})),i={form:"This is not a form element, see src/api/uc.ts for detail",files:[r],__rnFormData:l}),t.next=4,new Promise((function(t,r){return e.client.sendFile({user_id:n},o||i,t,r)}));case 4:return s=t.sent,t.abrupt("return",{file:{id:s.fileInfo.file_id,name:s.fileInfo.name,size:s.fileInfo.size,state:x(s.fileInfo.status),transferPercent:s.fileInfo.progress,topic_id:s.topic_id},chat:{id:s.text_id,file:s.fileInfo.file_id,text:s.fileInfo.name,type:-1,creator:e.client.getProfile().user_id,created:s.ltime}});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.sendFiles=function(){var t=(0,o.default)(a.default.mark((function t(n,r){var o,i,l,s,u;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"web"===d.Platform.OS&&((o=document.createElement("input")).type="file",o.name="file",o.files=function(){var e;if(window.DataTransfer)e=new DataTransfer;else if(window.ClipboardEvent){e=new ClipboardEvent("").clipboardData||void 0}return e?(e.items.add(r),e.files):(console.error("Can not set input.files: empty data transfer"),null)}(),document.createElement("form").appendChild(o)),"web"!==d.Platform.OS&&((l=new FormData).append("file",Object.assign({},r,{type:"multipart/form-data"})),i={form:"This is not a form element, see src/api/uc.ts for detail",files:[r],__rnFormData:l}),t.next=4,new Promise((function(t,a){return e.client.sendFiles({conf_id:n,input:o||i},[r],t,a)}));case 4:return s=t.sent,u=s.infoList[0],t.abrupt("return",{file:{id:u.fileInfo.file_id,name:u.fileInfo.name,size:u.fileInfo.size,state:x(u.fileInfo.status),transferPercent:u.fileInfo.progress,topic_id:u.topic_id},chat:{id:u.text_id,file:u.fileInfo.file_id,text:u.fileInfo.name,type:-1,creator:e.client.getProfile().user_id,created:u.ltime}});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.peekWebchatConferenceText=function(){var t=(0,o.default)(a.default.mark((function t(n){var r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,r){return e.client.peekWebchatConferenceText({conf_id:n},t,r)}));case 2:if((r=t.sent).messages.length){t.next=5;break}return t.abrupt("return",[]);case 5:return t.abrupt("return",r.messages.map((function(e){return e.text})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var r=new b("all");return e.client=new h(r),e.client.setEventListeners({forcedSignOut:e.onConnectionStopped,buddyStatusChanged:e.onUserUpdated,receivedTyping:void 0,receivedText:e.onTextReceived,fileReceived:e.onFileReceived,fileInfoChanged:e.onFileProgress,fileTerminated:e.onFileFinished,invitedToConference:e.onGroupInvited,conferenceMemberChanged:e.onGroupUpdated}),e}return n}(c.default);t.UC=k;var P=new k;t.uc=P},,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RnTouchableOpacity=void 0;var r=n(1),a=n(2),o=n(3),i=(0,r.forwardRef)((function(e,t){return(0,o.jsx)(a.TouchableOpacity,Object.assign({activeOpacity:.8,ref:t},e))}));t.RnTouchableOpacity=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;var r=n(21),a=n(6),o=n(1),i=n(2),l=n(16),s=n(4),u=n(85),c=n(126),d=n(8),f=n(7),p=n(3),g=i.StyleSheet.create({Field:Object.assign({borderBottomWidth:1,borderColor:f.v.borderBg,alignItems:"stretch",marginHorizontal:15},i.Platform.select({android:{paddingBottom:2}})),Field__focusing:{backgroundColor:f.v.colors.primaryFn(.5)},Field__disabled:{backgroundColor:f.v.hoverBg},Field__group:{marginHorizontal:0,marginTop:15,backgroundColor:f.v.borderBg,padding:15},Field__groupMargin:{marginTop:30},Field__transparent:{borderColor:"transparent",marginHorizontal:0},Field_Label:Object.assign({paddingTop:13,paddingBottom:0,paddingLeft:7},i.Platform.select({android:{paddingTop:3,top:6},web:{position:"absolute",top:0,left:0,right:0}})),Field_LabelText:{color:f.v.subColor,fontWeight:f.v.fontWeight},Field_LabelTextGroup:Object.assign({},i.Platform.select({android:{top:-6}})),Field_ViewRow:{flexDirection:"row",alignItems:"center",marginRight:40},Field_Park_TextInput:Object.assign({flex:1,paddingBottom:3,paddingLeft:7,paddingRight:10,overflow:"hidden"},i.Platform.select({android:{paddingTop:0,paddingBottom:0,lineHeight:f.v.lineHeight},web:{paddingTop:28,width:"100%"},default:{paddingTop:1}})),Field_TextInput:Object.assign({width:"100%",paddingBottom:3,paddingLeft:7,paddingRight:40,fontWeight:"bold",overflow:"hidden"},i.Platform.select({android:{paddingTop:0,paddingBottom:0,lineHeight:f.v.lineHeight},web:{paddingTop:28},default:{paddingTop:1}})),Field_Switch:{position:"absolute",top:22,right:11},Field_Btn:{position:"absolute",top:11,right:5,width:40,height:30,borderRadius:f.v.borderRadius},Field_Btn__create:{backgroundColor:f.v.colors.primaryFn(.5)},Field_Btn__remove:{backgroundColor:f.v.colors.dangerFn(.5)},Field_Icon:{position:"absolute",top:15,right:15},Field_Error:{alignItems:"center",justifyContent:"center"},Field_ErrorInner:{alignSelf:"flex-start",marginVertical:2,marginHorizontal:15,paddingVertical:2,paddingHorizontal:10,backgroundColor:f.v.colors.danger,borderRadius:f.v.borderRadius},Field_ErrorIcon:{position:"absolute",top:-8,left:2},Field_ErrorLabel:{color:f.v.revColor},Loading:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"black",opacity:.3,display:"flex",alignItems:"center",justifyContent:"center"}}),h=function(){},b=(0,a.observer)((function(e){var t,n,a=Object.assign({},e);if(a.isGroup)return(0,p.jsx)(i.View,{style:[g.Field,g.Field__group,a.hasMargin&&g.Field__groupMargin],children:(0,p.jsx)(d.RnText,{small:!0,style:g.Field_LabelTextGroup,children:a.label})});var b="PARK"===a.type&&a.disabled,v=(0,c.useStore)((function(){return{observable:{isFocusing:!1,isParkNameFocusing:!1,park:{number:"",name:""}}}})),m=(0,o.useRef)(),y=(0,o.useRef)();!m.current&&v.isFocusing&&v.set("isFocusing",!1),!y.current&&v.isParkNameFocusing&&v.set("isParkNameFocusing",!1),a.onCreateBtnPress&&Object.assign(a,{iconRender:function(){return(0,p.jsx)(d.RnTouchableOpacity,{onPress:a.onCreateBtnPress,style:[g.Field_Btn,g.Field_Btn__create,a.createBtnStyle],children:(0,p.jsx)(d.RnIcon,{color:f.v.colors.primary,path:a.createBtnIcon||l.mdiPlus,size:18,style:a.createBtnIconStyle})})}}),a.onRemoveBtnPress&&Object.assign(a,{iconRender:function(){return(0,p.jsx)(d.RnTouchableOpacity,{onPress:a.onRemoveBtnPress,style:[g.Field_Btn,g.Field_Btn__remove,a.removeBtnStyle],children:(0,p.jsx)(d.RnIcon,{color:f.v.colors.danger,path:a.removeBtnIcon||l.mdiClose,size:15,style:a.removeBtnIconStyle})})}});a.onValueChange&&("Switch"===a.type?Object.assign(a,{valueRender:a.valueRender||function(e){return e?(0,s.intl)("Enabled",{}):(0,s.intl)("Disabled",{})},iconRender:function(e){return(0,p.jsx)(d.RnSwitch,{enabled:e,style:g.Field_Switch})},onTouchPress:function(){var e;null===(e=a.onValueChange)||void 0===e||e.call(a,!a.value),i.Keyboard.dismiss()}}):"RnPicker"===a.type?Object.assign(a,{valueRender:function(e){var t,n;return(null===(t=a.options)||void 0===t||null===(n=t.find((function(t){return t.key===e})))||void 0===n?void 0:n.label)||e},onTouchPress:function(){u.RnPicker.open({options:a.options||[],selectedKey:a.value,onSelect:a.onValueChange}),i.Keyboard.dismiss()},icon:a.icon||l.mdiUnfoldMoreHorizontal}):"PARK"===a.type?Object.assign(a,{inputElement:function(){var e=a.value;return(0,p.jsxs)(i.View,{style:g.Field_ViewRow,children:[(0,p.jsx)(d.RnTextInput,Object.assign({ref:m},(0,r.omit)(a,["type","label","valueRender","icon","iconRender","onValueChange","onCreateBtnPress","createBtnIcon","onRemoveBtnPress","removeBtnIcon","disabled","error"]),{placeholder:(0,s.intl)("park number",{}),placeholderTextColor:"grey",onBlur:function(){"web"===i.Platform.OS&&v.set("isFocusing",!1)},onChangeText:function(e){return function(e){var t=Object.assign({},v.park,{number:e.trim()});v.set("park",t),a.onValueChange&&a.onValueChange(t)}(e)},onFocus:function(){"web"!==i.Platform.OS&&v.set("isParkNameFocusing",!1),v.set("isFocusing",!0)},style:[g.Field_Park_TextInput,a.style],value:e.number})),(0,p.jsx)(d.RnTextInput,Object.assign({ref:y},(0,r.omit)(a,["type","label","valueRender","icon","iconRender","onValueChange","onCreateBtnPress","createBtnIcon","onRemoveBtnPress","removeBtnIcon","disabled","error"]),{placeholder:(0,s.intl)("label",{}),placeholderTextColor:"grey",onBlur:function(){"web"===i.Platform.OS&&v.set("isParkNameFocusing",!1)},onChangeText:function(e){return function(e){var t=Object.assign({},v.park,{name:e});v.set("park",t),a.onValueChange&&a.onValueChange(t)}(e)},onFocus:function(){"web"!==i.Platform.OS&&v.set("isFocusing",!1),v.set("isParkNameFocusing",!0)},style:[g.Field_Park_TextInput,a.style],value:e.name}))]})}(),onTouchPress:function(){var e;v.isFocusing||v.isParkNameFocusing||(null===(e=m.current)||void 0===e||e.focus())}}):Object.assign(a,{inputElement:(0,p.jsx)(d.RnTextInput,Object.assign({ref:m},(0,r.omit)(a,["type","label","valueRender","icon","iconRender","onValueChange","onCreateBtnPress","createBtnIcon","onRemoveBtnPress","removeBtnIcon","disabled","error"]),{onBlur:(0,r.flow)([function(){return v.set("isFocusing",!1)},a.onBlur||h]),onChangeText:function(e){var t;return null===(t=a.onValueChange)||void 0===t?void 0:t.call(a,e)},onFocus:(0,r.flow)([function(){return v.set("isFocusing",!0)},a.onFocus||h]),onSubmitEditing:(0,r.flow)([a.onCreateBtnPress||h,a.onSubmitEditing||h]),style:[g.Field_TextInput,a.style],value:a.value})),onTouchPress:function(){var e;return null===(e=m.current)||void 0===e?void 0:e.focus()}})),a.disabled&&(a.inputElement=null,a.onTouchPress=void 0);var C=a.onTouchPress?d.RnTouchableOpacity:i.View,S=(0,p.jsx)(i.View,{pointerEvents:"none",style:g.Field_Label,children:(0,p.jsx)(d.RnText,{small:!0,style:g.Field_LabelText,children:a.label})});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(C,{accessible:!a.inputElement,onPress:a.onTouchPress,style:[g.Field,(v.isFocusing||v.isParkNameFocusing)&&g.Field__focusing,a.disabled&&g.Field__disabled,a.transparent&&g.Field__transparent],children:["web"!==i.Platform.OS&&S,(0,p.jsxs)(i.View,{pointerEvents:v.isFocusing||v.isParkNameFocusing?null:"none",children:[a.inputElement||(0,p.jsx)(d.RnTextInput,{editable:!b,disabled:!0,maxLength:(null===a||void 0===a?void 0:a.maxLength)||1e5,secureTextEntry:!(!a.secureTextEntry||!a.value),style:[g.Field_TextInput,a.textInputStyle],value:(null===(t=a.valueRender)||void 0===t?void 0:t.call(a,a.value))||a.value||"\u200a"}),!v.isFocusing&&b&&(0,p.jsx)(i.View,{style:i.StyleSheet.absoluteFill})]}),"web"===i.Platform.OS&&S,(null===(n=a.iconRender)||void 0===n?void 0:n.call(a,a.value))||a.icon&&(0,p.jsx)(d.RnIcon,{path:a.icon,pointerEvents:"none",style:g.Field_Icon}),a.loading&&(0,p.jsx)(i.View,{style:g.Loading,children:(0,p.jsx)(i.ActivityIndicator,{size:"small",color:"white"})})]}),a.error&&(0,p.jsx)(d.RnTouchableOpacity,{onPress:function(){var e;return null===(e=m.current)||void 0===e?void 0:e.focus()},style:g.Field_Error,children:(0,p.jsxs)(i.View,{style:g.Field_ErrorInner,children:[(0,p.jsx)(d.RnIcon,{color:f.v.colors.danger,path:l.mdiCardsDiamond,style:g.Field_ErrorIcon}),(0,p.jsx)(d.RnText,{small:!0,style:g.Field_ErrorLabel,children:a.error})]})})]})}));t.Field=b},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.waitTimeout=void 0;var r=n(33);t.waitTimeout=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return new Promise((function(t){r.BackgroundTimer.setTimeout((function(){return t(void 0)}),e)}))}},,,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.arrToMap=void 0;t.arrToMap=function(e,t,n){var r={};return(Array.isArray(e)?e:Array.from(e)).forEach((function(e,a){var o="function"===typeof t?t(e,a):t?e[t]:e,i="function"===typeof n?n(e,a):!n||e[String(n)];r[String(o)]=i})),r}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.pbx=t.PBX=void 0;var a=r(n(12)),o=r(n(35)),i=r(n(13)),l=r(n(5)),s=r(n(18)),u=r(n(17));n(212),n(687);var c=r(n(98)),d=n(2),f=n(317),p=n(127),g=n(32),h=n(11),b=n(33),v=n(62),m=n(87),y=n(318),C=n(322),S=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];return(e=t.call.apply(t,[this].concat(s))).connectTimeoutId=0,e.isMainInstance=!0,e.connect=function(){var t=(0,i.default)(a.default.mark((function t(n,r){var o,l,s,u,c,d,f,v,m,y,C,S,x,k,P,w,A,T,I;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("PBX PN debug: call pbx.connect"),!e.client){t.next=4;break}return console.warn("PAL client already connected, ignore..."),t.abrupt("return",!0);case 4:return t.next=6,g.accountStore.findDataAsync(n);case 6:return s=t.sent,u=null===(o=s.palParams)||void 0===o?void 0:o.user,console.log("PBX PN debug: construct pbx.client - webphone.pal.param.user="+u),c="wss://"+n.pbxHostname+":"+n.pbxPort+"/pbx/ws",d=window.Brekeke.pbx.getPal(c,Object.assign({tenant:n.pbxTenant,login_user:n.pbxUsername,login_password:n.pbxPassword,_wn:s.accessToken,park:n.parks||[],voicemail:"self",status:!0,secure_login_password:!1,phonetype:"webphone",callrecording:"self"},s.palParams,p.embedApi._palParams)),e.client=d,d.debugLevel=2,d.call_pal=function(e,t){return new Promise((function(n,r){var a=d[e];if("function"!==typeof a)return r(new Error("PAL client doesn't support \""+e+'"'));a.call(d,t,n,r)}))},window._BrekekePhoneWebRoot||p.embedApi.emit("pal",d),f={},!window._BrekekePhoneWebRoot&&null!==(l=p.embedApi._palEvents)&&void 0!==l&&l.length&&p.embedApi._palEvents.forEach((function(e){var t=function(){console.log("Embed api emitting pal event "+e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];p.embedApi.emit.apply(p.embedApi,["pal."+e].concat(n))};f[e]=t,d[e]=t})),v=function(e,t){d[e]=function(){for(var n,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return null===(n=f[e])||void 0===n||n.call.apply(n,[f].concat(a)),t.apply(void 0,a)}},m=void 0,y=new Promise((function(e){m=e})),C=[],v("notify_serverstatus",(function(e){var t;if(C.push(e),null!==e&&void 0!==e&&e.status)if("active"===e.status)null===(t=m)||void 0===t||t(!0),m=void 0;else if("inactive"===e.status){var n;null===(n=m)||void 0===n||n(!1),m=void 0}})),S=[],v("onClose",(function(){var e;S.push(),null===(e=m)||void 0===e||e(!1),m=void 0})),x=[],v("onError",(function(e){var t;x.push(e),null===(t=m)||void 0===t||t(!1),m=void 0})),k=function(){return e.clearConnectTimeoutId(),new Promise((function(t){e.connectTimeoutId=b.BackgroundTimer.setTimeout((function(){t(!1),console.warn("Pbx login connection timed out"),d===e.client?e.disconnect():d.close()}),1e4)}))},P=new Promise((function(e,t){return d.login((function(){return e(!0)}),t)})),t.next=30,Promise.race([P,k()]);case 30:if(e.clearConnectTimeoutId(),w=function(){var t=(0,i.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.race([y,k()]);case 2:return n=t.sent,e.clearConnectTimeoutId(),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.isMainInstance){t.next=34;break}return t.abrupt("return",w());case 34:if(r){t.next=46;break}return(T=(0,h.getAuthStore)()).pbxConfig=void 0,t.next=39,w();case 39:return t.next=41,e.getConfig(!0);case 41:if((I=null===(A=T.pbxConfig)||void 0===A?void 0:A["webphone.pal.param.user"])===u){t.next=46;break}return console.warn("Attempt to reconnect due to mismatch webphone.pal.param.user after login: old="+u+" new="+I),e.disconnect(),t.abrupt("return",e.connect(n,!0));case 46:return v("onClose",e.onClose),v("onError",e.onError),v("notify_serverstatus",e.onServerStatus),v("notify_park",e.onPark),v("notify_callrecording",e.onCallRecording),v("notify_voicemail",e.onVoicemail),v("notify_status",e.onUserStatus),S.forEach(e.onClose),x.forEach(e.onError),C.forEach(e.onServerStatus),t.abrupt("return",y);case 57:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onClose=function(){e.emit("connection-stopped")},e.onError=function(e){console.error("pbx.client.onError:",e)},e.onServerStatus=function(t){null!==t&&void 0!==t&&t.status&&("active"===t.status?e.emit("connection-started"):"inactive"===t.status&&e.emit("connection-stopped"))},e.onPark=function(t){null!==t&&void 0!==t&&t.status&&("on"===t.status?e.emit("park-started",t.park):"off"===t.status&&e.emit("park-stopped",t.park))},e.onCallRecording=function(t){t&&e.emit("call-recording",t)},e.onVoicemail=function(t){t&&e.emit("voicemail-updated",t)},e.onUserStatus=function(t){if(t)switch(t.status){case"14":case"2":case"36":return e.emit("user-talking",{user:t.user,talker:t.talker_id});case"35":return e.emit("user-holding",{user:t.user,talker:t.talker_id});case"-1":return e.emit("user-hanging",{user:t.user,talker:t.talker_id});case"1":return e.emit("user-calling",{user:t.user,talker:t.talker_id});case"65":return e.emit("user-ringing",{user:t.user,talker:t.talker_id});default:return}},e.disconnect=function(){e.client&&(e.client.close(),e.client=void 0,console.log("PBX PN debug: pbx.client set to null")),e.clearConnectTimeoutId()},e.clearConnectTimeoutId=function(){e.connectTimeoutId&&(b.BackgroundTimer.clearTimeout(e.connectTimeoutId),e.connectTimeoutId=0)},e.getConfig=function(){var t=(0,i.default)(a.default.mark((function t(n){var r,o,i,l;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=7;break}if(!(r=(0,h.getAuthStore)()).pbxConfig){t.next=4;break}return t.abrupt("return",r.pbxConfig);case 4:if(n){t.next=7;break}return t.next=7,(0,h.waitPbx)();case 7:if(e.client){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,e.client.call_pal("getProductInfo",{webphone:"true"});case 11:if(o=t.sent,e.isMainInstance){t.next=14;break}return t.abrupt("return",o);case 14:return(i=(0,h.getAuthStore)()).pbxConfig=o,t.next=18,i.getCurrentDataAsync();case 18:return l=t.sent,e.isMainInstance&&v.BrekekeUtils.setPbxConfig(JSON.stringify((0,y.parseCallParams)(i.pbxConfig))),l.palParams=(0,y.parsePalParams)(i.pbxConfig),l.userAgent=i.pbxConfig["webphone.useragent"],l.pnExpires=i.pbxConfig["webphone.pn_expires"],g.accountStore.updateAccountData(l),t.abrupt("return",i.pbxConfig);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.createSIPAccessToken=function(){var t=(0,i.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",e.client.call_pal("createAuthHeader",{username:n}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getUsers=function(){var t=(0,i.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",e.client.call_pal("getExtensions",{tenant:n,pattern:"..*",limit:-1,type:"user",property_names:["name"]}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getExtraUsers=function(){var t=(0,i.default)(a.default.mark((function t(n){var r,o;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(r=(0,h.getAuthStore)().getCurrentAccount(),e.client&&r){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.client.call_pal("getExtensionProperties",{tenant:r.pbxTenant,extension:n,property_names:["name"]});case 8:return o=t.sent,t.abrupt("return",o.map((function(e,t){return{id:n[t],name:Array.isArray(e)&&"string"===typeof e[0]?e[0]:""}})));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getPbxPropertiesForCurrentUser=function(){var t=(0,i.default)(a.default.mark((function t(n,r){var i,l,s,u,c,d,f;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.client.call_pal("getExtensionProperties",{tenant:n,extension:[r],property_names:["name","p1_ptype","p2_ptype","p3_ptype","p4_ptype","pnumber","language"]});case 7:return i=t.sent,l=(0,o.default)(i,1),s=l[0],u=(""+s[5]).split(","),c=[{id:u[0],type:s[1]},{id:u[1],type:s[2]},{id:u[2],type:s[3]},{id:u[3],type:s[4]}],d=s[6],f=s[0],t.abrupt("return",{id:r,name:f,phones:c,language:d});case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.getContacts=function(){var t=(0,i.default)(a.default.mark((function t(n){var r,o,i,l;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.search_text,o=n.offset,i=n.limit,!e.isMainInstance){t.next=4;break}return t.next=4,(0,h.waitPbx)();case 4:if(e.client){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.client.call_pal("getContactList",{phonebook:"",search_text:r,offset:o,limit:i});case 8:return l=t.sent,t.abrupt("return",l.map((function(e){return{id:e.aid,display_name:e.display_name,phonebook:e.phonebook,user:e.user,shared:!(null!==e&&void 0!==e&&e.user),info:{}}})));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getPhonebooks=(0,i.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.client){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.client.call_pal("getPhonebooks",{});case 4:return n=t.sent,t.abrupt("return",(null===n||void 0===n?void 0:n.filter((function(e){return!e.shared})))||[]);case 6:case"end":return t.stop()}}),t)}))),e.getContact=function(){var t=(0,i.default)(a.default.mark((function t(n){var r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.client.call_pal("getContact",{aid:n});case 7:return(r=t.sent).info=r.info||{},t.abrupt("return",{id:r.aid,display_name:r.display_name,phonebook:r.phonebook,shared:(0,m.toBoolean)(r.shared),info:r.info});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteContact=function(){var t=(0,i.default)(a.default.mark((function t(n){var r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.client.call_pal("deleteContact",{aid:n});case 7:return r=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setContact=function(){var t=(0,i.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",e.client.call_pal("setContact",{aid:n.id,phonebook:n.phonebook,shared:n.shared?"true":"false",display_name:n.display_name,info:n.info}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.holdTalker=function(){var t=(0,i.default)(a.default.mark((function t(n,r){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.client.call_pal("hold",{tenant:n,tid:r});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.unholdTalker=function(){var t=(0,i.default)(a.default.mark((function t(n,r){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.client.call_pal("unhold",{tenant:n,tid:r});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.startRecordingTalker=function(){var t=(0,i.default)(a.default.mark((function t(n,r){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.client.call_pal("startRecording",{tenant:n,tid:r});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.stopRecordingTalker=function(){var t=(0,i.default)(a.default.mark((function t(n,r){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.client.call_pal("stopRecording",{tenant:n,tid:r});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.transferTalkerBlind=function(){var t=(0,i.default)(a.default.mark((function t(n,r,o){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.client.call_pal("transfer",{tenant:n,user:o,tid:r,mode:"blind"});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e.transferTalkerAttended=function(){var t=(0,i.default)(a.default.mark((function t(n,r,o){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.client.call_pal("transfer",{tenant:n,user:o,tid:r});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e.joinTalkerTransfer=function(){var t=(0,i.default)(a.default.mark((function t(n,r){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.client.call_pal("conference",{tenant:n,tid:r});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.stopTalkerTransfer=function(){var t=(0,i.default)(a.default.mark((function t(n,r){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.client.call_pal("cancelTransfer",{tenant:n,tid:r});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.parkTalker=function(){var t=(0,i.default)(a.default.mark((function t(n,r,o){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.client.call_pal("park",{tenant:n,tid:r,number:o});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e.sendDTMF=function(){var t=(0,i.default)(a.default.mark((function t(n,r,o){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,e.client.call_pal("sendDTMF",{signal:n,tenant:r,talker_id:o});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e.pnmanage=function(){var t=(0,i.default)(a.default.mark((function t(n){var r,o,i,l,s,u,c,p,g,b,v;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isMainInstance){t.next=3;break}return t.next=3,(0,h.waitPbx)();case 3:if(e.client){t.next=5;break}return t.abrupt("return",!1);case 5:return r=n.pnmanageNew,o=n.command,i=n.service_id,l=n.device_id,s=n.device_id_voip,u=n.auth_secret,c=n.endpoint,p=n.key,g=!1,(Array.isArray(i)?i:[i]).forEach((function(e){if(e===C.PnServiceId.fcm||e===C.PnServiceId.web)g=!0;else if(g)throw new Error("Can not mix service_id fcm/web together with apns/lpc")})),b=g?f.fcmApplicationId:f.bundleIdentifier,v=n.username,!r&&n.voip&&(g||(b+=".voip"),v+="@voip"),t.next=14,e.client.call_pal("pnmanage",{command:o,service_id:i,application_id:b,user_agent:"web"===d.Platform.OS?navigator.userAgent:"react-native",username:v,device_id:l,device_id_voip:s,add_voip:!!r||void 0,add_device_id_suffix:!!r||void 0,auth_secret:u,endpoint:c,key:p});case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setWebPnToken=function(){var t=(0,i.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pnmanage(Object.assign({},n,{command:C.PnCommand.set,service_id:C.PnServiceId.web})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeWebPnToken=function(){var t=(0,i.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pnmanage(Object.assign({},n,{command:C.PnCommand.remove,service_id:C.PnServiceId.web})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setFcmPnToken=function(){var t=(0,i.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pnmanage(Object.assign({},n,{command:C.PnCommand.set,service_id:C.PnServiceId.fcm})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeFcmPnToken=function(){var t=(0,i.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pnmanage(Object.assign({},n,{command:C.PnCommand.remove,service_id:C.PnServiceId.fcm})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setApnsToken=function(){var t=(0,i.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pnmanage(Object.assign({},n,{command:C.PnCommand.set,service_id:C.PnServiceId.apns})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeApnsToken=function(){var t=(0,i.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pnmanage(Object.assign({},n,{command:C.PnCommand.remove,service_id:C.PnServiceId.apns})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return n}(c.default);t.PBX=S;var x=new S;t.pbx=x},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.UserItem=void 0;var a=r(n(54)),o=n(6),i=n(2),l=n(40),s=n(16),u=n(26),c=n(4),d=n(10),f=n(15),p=n(330),g=n(218),h=n(8),b=n(331),v=n(7),m=n(3),y=["answered","avatar","created","icons","iconColors","iconFuncs","id","incoming","isRecentCall","isRecentChat","lastMessage","lastMessageDate","name","partyNumber","selected","statusText","canChat","group","partyName","isVoicemail","disabled","isSelection","isSelected","parkNumber","phonebook","onSelect"],C=i.StyleSheet.create({Outer:{borderBottomWidth:1,borderColor:v.v.borderBg},Inner:{flexDirection:"row",paddingLeft:10},Inner_selected:{backgroundColor:v.v.colors.primaryFn(.5)},WithSpace:{marginVertical:5},Text:{flex:1,paddingTop:7,paddingLeft:10},NameWithStatus:{flexDirection:"row",flexWrap:"nowrap"},Status:{top:2,left:3,color:v.v.subColor},Detail:{flexDirection:"row"},CallIcon:{flex:null},CallCreatedAt:{left:3,color:v.v.subColor},ButtonIcon:{padding:10},LastDate:{marginVertical:10,marginRight:15,paddingTop:7},IconGroup:{},VGroup:{overflow:"hidden",backgroundColor:v.v.borderBg,width:50,height:50,borderRadius:25,marginVertical:5,alignItems:"center"},CheckboxContainer:{alignItems:"center",flexDirection:"row",marginRight:15},disableContainer:{opacity:.5}}),S=(0,o.observer)((function(e){var t=e.answered,n=e.avatar,r=e.created,o=e.icons,S=e.iconColors,x=e.iconFuncs,k=e.id,P=e.incoming,w=e.isRecentCall,A=e.isRecentChat,T=e.lastMessage,I=e.lastMessageDate,j=e.name,_=e.partyNumber,R=e.selected,O=e.statusText,B=e.canChat,M=e.group,U=e.partyName,L=e.isVoicemail,F=e.disabled,D=e.isSelection,V=e.isSelected,N=e.parkNumber,E=e.phonebook,H=e.onSelect,z=(0,a.default)(e,y),W=B?h.RnTouchableOpacity:i.View,G=function(e){var t=l.uc.getChatGroupInfo(e).conf_status;return t!==l.Constants.CONF_STATUS_INACTIVE&&t!==l.Constants.CONF_STATUS_INVITED||(f.RnAlert.error({message:(0,c.intlDebug)("You have rejected this group or it has been deleted",{})}),!1)};return(0,m.jsx)(W,{style:[C.Outer,F&&C.disableContainer],onPress:function(){if(_)if(_.startsWith("uc")){var e=_.replace("uc","");G(_.replace("uc",""))&&(0,d.Nav)().goToPageChatGroupDetail({groupId:e})}else(0,d.Nav)().goToPageChatDetail({buddy:_})},children:(0,m.jsxs)(i.View,{style:[C.Inner,R&&C.Inner_selected],children:[M?(0,m.jsx)(i.View,{style:C.VGroup,children:(0,m.jsx)(h.RnIcon,{path:s.mdiAccountGroup,size:40,color:v.v.colors.greyTextChat,style:C.IconGroup})}):N?null:(0,m.jsx)(g.Avatar,Object.assign({source:{uri:n},status:e.status},z,{style:C.WithSpace})),(0,m.jsxs)(i.View,{style:[C.Text,C.WithSpace],children:[(0,m.jsxs)(i.View,{style:C.NameWithStatus,children:[(0,m.jsx)(h.RnText,{black:!0,bold:!0,singleLine:!0,style:{color:j===(0,c.intl)("<Unnamed>",{})?v.v.colors.greyTextChat:"black"},children:(0,u.getPartyName)(_)||U||j||_||k}),!!O&&(0,m.jsx)(h.RnText,{normal:!0,singleLine:!0,small:!0,style:C.Status,children:O})]}),!!N&&(0,m.jsx)(h.RnText,{normal:!0,small:!0,style:C.CallCreatedAt,children:(0,c.intl)("Park number: ",{})+""+N}),!!E&&(0,m.jsx)(h.RnText,{normal:!0,small:!0,style:C.CallCreatedAt,children:E}),!w&&!!T&&(0,m.jsx)(h.RnText,{normal:!0,singleLine:!0,small:!0,children:"string"===typeof T?(0,p.trimHtml)(T):T}),(w&&!T||L)&&(0,m.jsxs)(i.View,{style:C.Detail,children:[(0,m.jsx)(h.RnIcon,{color:P&&!t?v.v.colors.danger:P&&t?v.v.colors.primary:v.v.colors.warning,path:P&&!t?s.mdiPhoneMissed:P&&t?s.mdiPhoneIncoming:s.mdiPhoneOutgoing,size:14,style:C.CallIcon}),(0,m.jsx)(h.RnText,{normal:!0,small:!0,style:C.CallCreatedAt,children:L?(0,c.intl)("Voicemail",{}):(0,c.intl)("at {{$0}}",{$0:r})})]})]}),!w&&!!T&&A&&(0,m.jsx)(i.View,{style:C.LastDate,children:(0,m.jsx)(h.RnText,{normal:!0,singleLine:!0,small:!0,children:I})}),null===o||void 0===o?void 0:o.map((function(e,t){return(0,m.jsx)(h.RnTouchableOpacity,{onPress:function(e){return function(e){var t,n;null!==_&&void 0!==_&&_.startsWith("uc")?G(_.replace("uc",""))&&(null===x||void 0===x||null===(t=x[e])||void 0===t||t.call(x)):null===x||void 0===x||null===(n=x[e])||void 0===n||n.call(x)}(t)},children:(0,m.jsx)(h.RnIcon,{path:e,color:null===S||void 0===S?void 0:S[t],style:C.ButtonIcon})},t)})),!!D&&(0,m.jsx)(i.View,{style:C.CheckboxContainer,children:(0,m.jsx)(b.RnCheckBox,{isSelected:!!V,onPress:function(){return!H||H()},disabled:F||!1})})]})})}));t.UserItem=S},,,,,,,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BrekekeUtils=void 0;var r=n(21),a=n(2),o={getInitialNotifications:function(){return Promise.resolve(null)},isLocked:function(){return Promise.resolve(!1)},startRingtone:function(){},stopRingtone:function(){},backToBackground:function(){},getIncomingCallPendingUserAction:function(){return Promise.resolve("")},closeIncomingCall:function(){},closeAllIncomingCalls:function(){},setPbxConfig:function(){},setCallConfig:function(){},setIsAppActive:function(){},setTalkingAvatar:function(){},setJsCallsSize:function(){},setRecordingStatus:function(){},setIsVideoCall:function(){},setRemoteVideoStreamURL:function(){},setIsFrontCamera:function(){},setOnHold:function(){},setLocale:function(){},onCallConnected:function(){},onCallKeepAction:function(){},onPageCallManage:function(){},hasIncomingCallActivity:function(){return Promise.resolve(!1)},playRBT:function(){},stopRBT:function(){},enableLPC:function(){},disableLPC:function(){},systemUptimeMs:function(){return Promise.resolve(-1)}},i=a.NativeModules,l=i.BrekekeUtils||o;if(t.BrekekeUtils=l,__DEV__&&"web"!==a.Platform.OS){var s=Object.keys(i.BrekekeUtils||{});console.log("BrekekeUtils debug: found "+s.length+" methods"+(s.length?": "+s.join(", "):""))}Object.keys(o).filter((function(e){return"function"!==typeof(0,r.get)(l,e)})).forEach((function(e){(0,r.set)(l,e,(0,r.get)(o,e))}))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=null},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.sip=t.checkAndRemovePnTokenViaSip=t.SIP=void 0;var a=r(n(12)),o=r(n(5)),i=r(n(18)),l=r(n(17)),s=r(n(13));n(212),n(711);var u=r(n(98)),c=r(n(103)),d=n(2),f=n(7),p=n(127),g=n(32),h=n(11),b=n(19),v=n(712),m=n(37),y=n(87),C=n(46),S=n(713),x=n(50),k=n(714),P={},w=function(){var e=(0,s.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.accountStore.findByPn(t);case 2:return n=!!e.sent,r=t.id||(0,c.default)(t),P[r]||n||(P[r]=!0,A(t)),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.checkAndRemovePnTokenViaSip=w;var A=function(){var e=(0,s.default)(a.default.mark((function e(t){var n,r,o,i,l,u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,b.getCallStore)(),t.callkeepUuid&&o.onCallKeepEndCall(t.callkeepUuid),t.sipPn.sipAuth){e.next=5;break}return console.log("checkAndRemovePnTokenViaSip debug: no sip auth token isCall="+t.isCall),e.abrupt("return");case 5:return console.log("checkAndRemovePnTokenViaSip debug: begin"),i=M((0,y.toBoolean)(t.sipPn.dtmfSendPal)),e.next=9,R(t);case 9:return l=e.sent,i.startWebRTC({register:!1,url:O(t.pbxHostname,t.sipPn.sipWssPort||t.pbxPort),tls:!0,user:t.sipPn.phoneId,auth:t.sipPn.sipAuth,useVideoClient:!0,userAgent:l}),e.next=13,new Promise(function(){var e=(0,s.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.addEventListener("phoneStatusChanged",(function(e){"started"===e.phoneStatus&&t(!0)})),e.next=3,(0,C.waitTimeout)(1e4);case 3:t(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:u=e.sent,c=null===(n=i._ua)||void 0===n||null===(r=n.registrator)||void 0===r?void 0:r.call(n),u&&c||console.log("checkAndRemovePnTokenViaSip debug: started="+u+" registrator="+!!c),c._registered=!0,c.setExtraHeaders(["X-PN-Manage: remove"]),i.stopWebRTC(),console.log("checkAndRemovePnTokenViaSip debug: done");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){(0,i.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).currentCamera="1",e.cameraIds=[],e.init=function(){var t=(0,s.default)(a.default.mark((function t(n){var r,o,i,l,u;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,S.getCameraSourceIds)();case 2:return e.cameraIds=t.sent,e.currentCamera=(null===(r=e.cameraIds)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.deviceId)||"1",i=M(n.dtmfSendPal,e.currentCamera),e.phone=i,window._BrekekePhoneWebRoot||p.embedApi.emit("webrtcclient",i),l=function(t){if(t)if("started"!==t.phoneStatus){var n,r,a,o=t.phoneStatus;if("stopping"===o||"stopped"===o)null===(n=i._removeEventListenerPhoneStatusChange)||void 0===n||n.call(i),e.emit("connection-stopped",t),console.log("SIP PN debug: phoneStatusChanged: phoneStatus="+o),null===(r=e.phone)||void 0===r||null===(a=r._removeEventListenerPhoneStatusChange)||void 0===a||a.call(r),e.phone=void 0}else e.emit("connection-started")},i.addEventListener("phoneStatusChanged",l),i._removeEventListenerPhoneStatusChange=function(){i._removeEventListenerPhoneStatusChange=void 0,i.removeEventListener("phoneStatusChanged",l)},u=function(){var e=(0,s.default)(a.default.mark((function e(t){var n,r,o,i,l,s,u,c,d,f,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.incomingMessage,i="outgoing"===t.rtcSession.direction&&"progress"===t.sessionStatus&&!(null===o||void 0===o||!o.body),l=t.rtcSession.remote_identity.uri.user,(s=t.rtcSession.remote_identity.display_name)&&!s.startsWith("uc")||!l.startsWith("uc")||(s=(null===(u=m.chatStore.getGroupById(l.replace("uc","")))||void 0===u?void 0:u.name)||s||l),e.next=7,(0,h.getAuthStore)().getCurrentDataAsync();case 7:for(p in c=e.sent,s=s||(null===(n=c.recentCalls.find((function(e){return e.partyNumber===l})))||void 0===n?void 0:n.partyName)||l,d=null===o||void 0===o||null===(r=o.getHeader("X-PBX-Session-Info"))||void 0===r?void 0:r.split(";"),(f={rawSession:t,id:t.sessionId,pnId:null===o||void 0===o?void 0:o.getHeader("X-PN-ID"),incoming:"incoming"===t.rtcSession.direction,partyNumber:l,partyName:s,remoteVideoEnabled:t.remoteWithVideo,localVideoEnabled:t.withVideo,sessionStatus:t.sessionStatus,callConfig:U(null===o||void 0===o?void 0:o.getHeader("X-WEBPHONE-CALL")),answered:"connected"===t.sessionStatus,voiceStreamObject:t.remoteStreamObject,withSDP:i,earlyMedia:i?t.remoteStreamObject:null,partyImageUrl:null===o||void 0===o?void 0:o.getHeader("X-PBX-IMAGE-RINGING"),talkingImageUrl:null===o||void 0===o?void 0:o.getHeader("X-PBX-IMAGE-TALKING"),partyImageSize:null===o||void 0===o?void 0:o.getHeader("X-PBX-IMAGE-SIZE"),pbxTenant:null===d||void 0===d?void 0:d[0],pbxRoomId:null===d||void 0===d?void 0:d[1],pbxTalkerId:null===d||void 0===d?void 0:d[2],pbxUsername:null===d||void 0===d?void 0:d[3]}).pbxTalkerId||delete f.pbxTalkerId,f)void 0===f[p]&&delete f[p];return e.abrupt("return",f);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.addEventListener("sessionCreated",function(){var t=(0,s.default)(a.default.mark((function t(n){var r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u(n);case 4:r=t.sent,e.emit("session-started",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.addEventListener("sessionStatusChanged",function(){var t=(0,s.default)(a.default.mark((function t(n){var r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if("terminated"!==n.sessionStatus){t.next=5;break}return e.emit("session-stopped",n),t.abrupt("return");case 5:return t.next=7,u(n);case 7:r=t.sent,e.emit("session-updated",r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.addEventListener("videoClientSessionCreated",(function(t){if(t){var n=i.getSession(t.sessionId).videoClientSessionTable[t.videoClientSessionId];e.emit("session-updated",{id:t.sessionId,videoSessionId:t.videoClientSessionId,remoteVideoEnabled:!0,remoteVideoStreamObject:n.remoteStreamObject})}})),i.addEventListener("videoClientSessionEnded",(function(t){t&&e.emit("session-updated",{id:t.sessionId,videoSessionId:t.videoClientSessionId,remoteVideoEnabled:!1,remoteVideoStreamObject:null})})),i.addEventListener("rtcErrorOccurred",(function(e){console.error("sip.phone.rtcErrorOccurred:",e)})),t.abrupt("return",i);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.connect=function(){var t=(0,s.default)(a.default.mark((function t(n,r){var o,i,l,s,u,c;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("SIP PN debug: call sip.stopWebRTC in sip.connect"),null===(o=e.phone)||void 0===o||null===(i=o._removeEventListenerPhoneStatusChange)||void 0===i||i.call(o),e.stopWebRTC(),t.next=5,e.init(n);case 5:return s=t.sent,(u=n.pbxTurnEnabled&&k.turnConfig||{}).pcConfig||(u.pcConfig={}),Array.isArray(u.pcConfig.iceServers)||(u.pcConfig.iceServers=[]),n.turnConfig&&u.pcConfig.iceServers.push(n.turnConfig),s.setDefaultCallOptions(u),t.next=13,R(r);case 13:c=t.sent,s.startWebRTC({url:O(n.hostname,n.port),tls:!0,user:n.username,auth:n.accessToken,useVideoClient:!0,userAgent:c}),console.log("SIP PN debug: added listener on _ua"),null===(l=s._ua)||void 0===l||l.on("newNotify",(function(e){var t,n=null===e||void 0===e||null===(t=e.request)||void 0===t?void 0:t.data;if(n){console.log("SIP PN debug: newNotify fired on _ua data="+n);var r=j(n);null!==r&&void 0!==r&&r.length&&(console.log("SIP PN debug: newNotify canceled pnIds="+JSON.stringify(r)),r.forEach(v.cancelRecentPn))}}));case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.hackJssipFork=function(){var e,t,n,r=null===(e=I.phone)||void 0===e||null===(t=e._ua)||void 0===t||null===(n=t._transport)||void 0===n?void 0:n.socket;r&&Object.assign(r,{__brekekephone_stopped:!0})},e.stopWebRTC=function(){e.hackJssipFork(),e.phone?(console.log("SIP PN debug: sip.stopWebRTC: call phone.stopWebRTC"),e.phone.stopWebRTC(),e.phone=void 0):console.log("SIP PN debug: sip.stopWebRTC: already disconnected")},e.destroyWebRTC=function(){e.hackJssipFork(),e.phone?(console.log("SIP PN debug: sip.destroyWebRTC: call phone.destroyWebRTC"),e.phone.destroyWebRTC(),e.phone=void 0):console.log("SIP PN debug: sip.destroyWebRTC: already disconnected")},e.hangupSession=function(t){var n,r,a=null===(n=e.phone)||void 0===n?void 0:n.getSession(t);return null===a||void 0===a||null===(r=a.rtcSession)||void 0===r?void 0:r.terminate()},e.disableMedia=function(t){var n,r,a=null===(n=e.phone)||void 0===n?void 0:n.getSession(t);null===a||void 0===a||null===(r=a.remoteStreamObject)||void 0===r||r.getTracks().forEach((function(e){e.enabled=!1}))},e.enableMedia=function(t){var n,r,a=null===(n=e.phone)||void 0===n?void 0:n.getSession(t);null===a||void 0===a||null===(r=a.remoteStreamObject)||void 0===r||r.getTracks().forEach((function(e){e.enabled=!0}))},e.sendDTMF=function(){var t=(0,s.default)(a.default.mark((function t(n){var r,o;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.phone){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,x.pbx.getConfig();case 4:return r=t.sent,o=Number(null===r||void 0===r?void 0:r["webrtcclient.dtmfSendMode"])||0,e.phone._options.dtmfSendMode=o,e.phone.dtmfSendMode=o,t.abrupt("return",e.phone._options.dtmfSendPal?x.pbx.sendDTMF(n.signal,n.tenant,n.talkerId):e.phone.sendDTMF(n.signal,n.sessionId));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.enableVideo=function(t){var n;return null===(n=e.phone)||void 0===n?void 0:n.setWithVideo(t,!0)},e.disableVideo=function(t){var n;return null===(n=e.phone)||void 0===n?void 0:n.setWithVideo(t,!1)},e.setMuted=function(t,n){var r;return null===(r=e.phone)||void 0===r?void 0:r.setMuted({main:t},n)},e.switchCamera=function(){var t=(0,s.default)(a.default.mark((function t(n,r){var o,i,l,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.phone){t.next=2;break}return t.abrupt("return");case 2:if(void 0!==e.cameraIds&&0!==e.cameraIds.length){t.next=6;break}return t.next=5,(0,S.getCameraSourceIds)();case 5:e.cameraIds=t.sent;case 6:if(void 0!==e.cameraIds&&0!==e.cameraIds.length){t.next=8;break}return t.abrupt("return");case 8:l=e.cameraIds.map((function(e){return e.deviceId})),e.currentCamera=r?l[1]:l[0],s={call:{mediaConstraints:B(e.currentCamera,r)},answer:{mediaConstraints:B(e.currentCamera,r)}},null===(o=e.phone)||void 0===o||o.setWithVideo(n,!1,s),null===(i=e.phone)||void 0===i||i.setWithVideo(n,!0,s);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return n}(u.default);t.SIP=T;var I=new T;t.sip=I;var j=function(e){if(e&&/Canceled/i.test(e)){var t=e.match(/Content-Length:\s*(\d+)\s*/i);if(t){var n=t.index,r=parseInt(t[1]);if("number"===typeof n&&!isNaN(r)){var a=e.substr(n+t[0].length);return console.log("parseCanceledPnIds: msg.length="+a.length+" l="+r),a.split(/\n/g).map((function(e){var t,n=e.toLowerCase();return n.replace(/\s+/g,"").includes(",canceled")?{pnId:null===(t=e.match(/(\w+)\W*INVITE/))||void 0===t?void 0:t[1],completedElseWhere:n.includes("call completed elsewhere")}:void 0}))}}}},_={ios:"iOS",android:"Android",web:"Web"},R=function(){var e=(0,s.default)(a.default.mark((function e(t){var n,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("to"in t)){e.next=6;break}return e.next=3,g.accountStore.findByPn(t);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=t;case 7:return n=e.t0,e.next=10,g.accountStore.findData(n);case 10:if(null===(r=e.sent)||void 0===r||!r.userAgent){e.next=13;break}return e.abrupt("return",r.userAgent);case 13:return o=_[d.Platform.OS],e.abrupt("return","Brekeke Phone for "+o+" "+f.currentVersion+" /JsSIP 3.2.15");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e,t){return"wss://"+e+":"+t+"/phone"},B=function(e,t){var n={facingMode:t?"user":"environment",deviceId:e?{exact:e}:void 0},r={mandatory:{minWidth:0,minHeight:0,minFrameRate:0},facingMode:t?"user":"environment",optional:e?[{sourceId:e}]:[]};return{audio:!1,video:"web"===d.Platform.OS?n:r}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return new window.Brekeke.WebrtcClient.Phone({logLevel:"all",multiSession:1,defaultOptions:{videoOptions:{call:{mediaConstraints:B(t,!0)},answer:{mediaConstraints:B(t,!0)}}},dtmfSendPal:e,ctiAutoAnswer:1,eventTalk:1,configuration:{socketKeepAlive:60}})},U=function(e){return e?Object.fromEntries(e.split(";").map((function(e){return e.split(":").map((function(e){return e.trim()})).filter((function(e){return e}))})).filter((function(e){return 2===e.length}))):{}}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.userStore=void 0;var a,o,i,l,s,u,c,d,f,p,g,h,b,v,m,y,C,S,x,k,P,w,A,T,I,j,_,R,O=r(n(12)),B=r(n(34)),M=r(n(13)),U=r(n(22)),L=r(n(5)),F=r(n(20)),D=(r(n(23)),n(21)),V=n(9),N=n(50),E=n(40),H=n(32),z=n(11),W=n(26),G=n(4),K=100,X=(a=function e(){var t=this;(0,L.default)(this,e),(0,U.default)(this,"dataGroupAllUser",o,this),(0,U.default)(this,"dataListAllUser",i,this),(0,U.default)(this,"buddyMax",l,this),(0,U.default)(this,"isDisableAddAllUserToTheList",s,this),(0,U.default)(this,"isSelectedAddAllUser",u,this),(0,U.default)(this,"selectedUserIds",c,this),(0,U.default)(this,"saveSelectedUserIds",d,this),(0,U.default)(this,"userOnline",f,this),(0,U.default)(this,"isCapacityInvalid",p,this),(0,U.default)(this,"buddyMode",g,this),(0,U.default)(this,"dataDisplayGroupAllUser",h,this),this.type="UcBuddy",this.groups=[],(0,U.default)(this,"loadPbxBuddyList",b,this),(0,U.default)(this,"loadUcBuddyList",v,this),(0,U.default)(this,"getBuddyById",m,this),(0,U.default)(this,"filterDataUserGroup",y,this),this.filterUser=function(e,n){var r=[],a=0,o=0;return t.dataDisplayGroupAllUser.forEach((function(i){var l,s=(null===(l=i.data)||void 0===l?void 0:l.filter((function(e){return t.saveSelectedUserIds[e.user_id]})).map((function(e){return Object.assign({},e,{status:t.userOnline[e.user_id]})})))||[];a+=s.length;var u=s.filter((function(t){return t.user_id.includes(e)||t.name.includes(e)})),c=i.data.filter((function(e){return t.userOnline[e.user_id]})).map((function(e){return Object.assign({},e,{status:t.userOnline[e.user_id]})}));o+=c.length;var d=c.filter((function(t){return t.user_id.includes(e)||t.name.includes(e)}));r.push({title:i.title,data:n?u:d})})),{displayUsers:r,totalContact:a,totalOnlineContact:o}},(0,U.default)(this,"toggleIsSelectedAddAllUser",C,this),(0,U.default)(this,"isSelectEditGroupingAndUserOrder",S,this),(0,U.default)(this,"toggleIsSelectEditGroupingAndUserOrder",x,this),(0,U.default)(this,"selectUserId",k,this),(0,U.default)(this,"selectAllUserIdsByGroup",P,this),(0,U.default)(this,"removeGroup",w,this),(0,U.default)(this,"unselectAllUserIdsByGroup",A,this),this.getHeaderTitle=function(e,n,r){var a;if(null===(a=(0,z.getAuthStore)().getCurrentAccount())||void 0===a||!a.ucEnabled)return"("+n.length+")";if(r){var o=t.isSelectedAddAllUser?n.length:n.filter((function(e){return t.selectedUserIds[e.user_id]})).length;return e+" "+o+"/"+n.length}var i=t.dataGroupAllUser.findIndex((function(t){return t.title===e}));if(i<=-1)return"";var l=t.dataGroupAllUser[i].data.length,s=t.dataGroupAllUser[i].data.filter((function(e){return t.userOnline[e.user_id]})).length;return(e==="("+(0,G.intl)("No Group",{})+")"?"":e)+" "+s+"/"+l},(0,U.default)(this,"updateStatusBuddy",T,this),(0,U.default)(this,"addGroup",I,this),this.resetCache=function(){t.groups=[],t.selectedUserIds={},t.dataListAllUser=[]},(0,U.default)(this,"updateDisplayGroupList",j,this),(0,U.default)(this,"editGroup",_,this),(0,U.default)(this,"clearStore",R,this)},o=(0,F.default)(a.prototype,"dataGroupAllUser",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,F.default)(a.prototype,"dataListAllUser",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,F.default)(a.prototype,"buddyMax",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return K}}),s=(0,F.default)(a.prototype,"isDisableAddAllUserToTheList",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=(0,F.default)(a.prototype,"isSelectedAddAllUser",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c=(0,F.default)(a.prototype,"selectedUserIds",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=(0,F.default)(a.prototype,"saveSelectedUserIds",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=(0,F.default)(a.prototype,"userOnline",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=(0,F.default)(a.prototype,"isCapacityInvalid",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=(0,F.default)(a.prototype,"buddyMode",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=(0,F.default)(a.prototype,"dataDisplayGroupAllUser",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=(0,F.default)(a.prototype,"loadPbxBuddyList",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,M.default)(O.default.mark((function t(){var n,r,a,o,i,l,s,u,c,d,f=arguments;return O.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=f.length>0&&void 0!==f[0]&&f[0],t.next=3,(0,z.waitPbx)();case 3:if(e.resetCache(),e.type="PbxBuddy",a=(0,z.getAuthStore)(),o=a.getCurrentAccount()){t.next=9;break}return t.abrupt("return");case 9:if(i=[],!r){t.next=17;break}return t.next=13,N.pbx.getUsers(o.pbxTenant);case 13:if(l=t.sent){t.next=16;break}return t.abrupt("return");case 16:i=l.filter((function(e){return e[0]!==o.pbxUsername})).map((function(e){return{disabledBuddy:!1,user_id:e[0],name:e[1],profile_image_url:"",group:"",tenant:o.pbxTenant,block_settings:{},status:!1}}));case 17:return t.next=19,a.getCurrentDataAsync();case 19:s=t.sent,u=null===s||void 0===s?void 0:s.pbxBuddyList,c=(0,D.cloneDeep)((null===u||void 0===u?void 0:u.users)||[]),a.isBigMode()?e.isSelectedAddAllUser=!1:e.isSelectedAddAllUser=!(null===(d=a.getCurrentAccount())||void 0===d||!d.pbxLocalAllUsers),e.isDisableAddAllUserToTheList=a.isBigMode(),e.buddyMax=Number(null===(n=a.pbxConfig)||void 0===n?void 0:n["webphone.users.max"])||K,e.buddyMode=2,e.groups=[],e.filterDataUserGroup(c,i,1===e.buddyMode);case 28:case"end":return t.stop()}}),t)})))}}),v=(0,F.default)(a.prototype,"loadUcBuddyList",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,M.default)(O.default.mark((function t(){var n,r,a,o,i,l,s,u,c,d,f,p=arguments;return O.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=p.length>0&&void 0!==p[0]&&p[0],t.next=3,(0,z.waitUc)();case 3:i=(0,z.getAuthStore)(),e.resetCache(),e.type="UcBuddy",l=E.uc.client.getBuddylist(),s=E.uc.client.getConfigProperties(),u=E.uc.client.getProfile(),c=[],o&&(c=null===(d=E.uc.client.getAllUsers().user)||void 0===d?void 0:d.filter((function(e){return!e.disabledBuddy&&e.user_id!==u.user_id})).map((function(e){return{user_id:e.user_id,name:e.user_name,group:1===s.buddy_mode?e.user_group:"",tenant:u.tenant}}))),i.isBigMode()?e.isSelectedAddAllUser=!1:e.isSelectedAddAllUser=!(null===(f=i.getCurrentAccount())||void 0===f||!f.pbxLocalAllUsers),e.isDisableAddAllUserToTheList=i.isBigMode()||(null===(n=s.optional_config)||void 0===n?void 0:n.buddy_max)<(null===(r=c)||void 0===r?void 0:r.length),e.buddyMax=(null===(a=s.optional_config)||void 0===a?void 0:a.buddy_max)||K,e.buddyMode=s.buddy_mode,e.groups=[],e.filterDataUserGroup(l.user,c,1===s.buddy_mode);case 17:case"end":return t.stop()}}),t)})))}}),m=(0,F.default)(a.prototype,"getBuddyById",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.dataListAllUser.find((function(e){return e.user_id===t}))}}}),y=(0,F.default)(a.prototype,"filterDataUserGroup",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n,r){var a=[],o={title:"("+(0,G.intl)("No Group",{})+")",data:[]},i=[],l={title:"("+(0,G.intl)("No Group",{})+")",data:[]},s=[],u={};t.length>0&&t.forEach((function(t){if((0,E.isUcBuddy)(t)){var n=a.findIndex((function(e){return e.title===t.group}));-1!==n?(a[n].data=[].concat((0,B.default)(a[n].data),[t]),i[n].data=[].concat((0,B.default)(i[n].data),[t.user_id])):(o.data=[].concat((0,B.default)(o.data),[t]),l.data=[].concat((0,B.default)(l.data),[t.user_id])),s.push(t),u[t.user_id]=!0}else e.groups.some((function(e){return e.id===t.id}))||(a.push({title:t.id,data:[]}),i.push({title:t.id,data:[]}),e.groups.push(t))}));var c=n.filter((function(e){return!s.some((function(t){return t.user_id===e.user_id}))}));r?a.length>0&&(a[0].data=[].concat((0,B.default)(a[0].data),(0,B.default)(c))):(o.data=[].concat((0,B.default)(o.data),(0,B.default)(c)),a.push(o)),e.dataGroupAllUser=a,e.dataListAllUser=[].concat(s,(0,B.default)(c)),e.selectedUserIds=u,e.saveSelectedUserIds=(0,D.cloneDeep)(e.selectedUserIds),e.dataDisplayGroupAllUser=(0,D.cloneDeep)(e.dataGroupAllUser)}}}),C=(0,F.default)(a.prototype,"toggleIsSelectedAddAllUser",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;e.isSelectedAddAllUser||W.contactStore.pbxUsers.length||W.contactStore.getPbxUsers(),e.isSelectedAddAllUser=!e.isSelectedAddAllUser;var n=(0,z.getAuthStore)();H.accountStore.upsertAccount({id:null===(t=n.getCurrentAccount())||void 0===t?void 0:t.id,pbxLocalAllUsers:e.isSelectedAddAllUser})}}}),S=(0,F.default)(a.prototype,"isSelectEditGroupingAndUserOrder",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=(0,F.default)(a.prototype,"toggleIsSelectEditGroupingAndUserOrder",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isSelectEditGroupingAndUserOrder=!e.isSelectEditGroupingAndUserOrder}}}),k=(0,F.default)(a.prototype,"selectUserId",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedUserIds[t]?delete e.selectedUserIds[t]:e.selectedUserIds[t]=!0,e.isCapacityInvalid=Object.keys(e.selectedUserIds).length>e.buddyMax}}}),P=(0,F.default)(a.prototype,"selectAllUserIdsByGroup",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;null===(n=e.dataGroupAllUser[t])||void 0===n||n.data.forEach((function(t){e.selectedUserIds[t.user_id]=!0}))}}}),w=(0,F.default)(a.prototype,"removeGroup",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.dataGroupAllUser[t].data.forEach((function(t){delete e.selectedUserIds[t.user_id]})),e.groups.length>=1&&e.groups.splice(t,1),e.dataGroupAllUser.length>=1&&e.dataGroupAllUser.splice(t,1)}}}),A=(0,F.default)(a.prototype,"unselectAllUserIdsByGroup",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.dataGroupAllUser[t].data.forEach((function(t){delete e.selectedUserIds[t.user_id]}))}}}),T=(0,F.default)(a.prototype,"updateStatusBuddy",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n,r){"offline"!==n?e.userOnline[t]=n:delete e.userOnline[t]}}}),I=(0,F.default)(a.prototype,"addGroup",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.dataListAllUser.forEach((function(r,a){n[r.user_id]&&(e.dataListAllUser[a].group=t)})),e.dataGroupAllUser.forEach((function(t,r){e.dataGroupAllUser[r].data=t.data.filter((function(e){return!n[e.user_id]}))}));var r={data:Object.keys(n).map((function(e){return n[e]})),title:t};e.dataGroupAllUser.unshift(r),Object.keys(n).forEach((function(t){e.selectedUserIds[t]=!0})),e.groups.push({id:t,name:t})}}}),j=(0,F.default)(a.prototype,"updateDisplayGroupList",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.saveSelectedUserIds=(0,D.cloneDeep)(e.selectedUserIds),e.dataDisplayGroupAllUser=(0,D.cloneDeep)(e.dataGroupAllUser),e.resetCache()}}}),_=(0,F.default)(a.prototype,"editGroup",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n,r){e.dataListAllUser.forEach((function(n,a){r[n.user_id]&&(e.dataListAllUser[a].group=t)})),e.dataGroupAllUser.forEach((function(a,o){a.title===t?e.dataGroupAllUser[o].data=Object.keys(r).map((function(e){return r[e]})):e.dataGroupAllUser[o].data=a.data.filter((function(e){return!r[e.user_id]})),o===e.dataGroupAllUser.length-1&&(e.dataGroupAllUser[o].data=[].concat((0,B.default)(e.dataGroupAllUser[o].data),(0,B.default)(n)))})),Object.keys(r).forEach((function(t){e.selectedUserIds[t]=!0})),n.forEach((function(t){delete e.selectedUserIds[t.user_id]}))}}}),R=(0,F.default)(a.prototype,"clearStore",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.groups=[],e.dataGroupAllUser=[],e.dataListAllUser=[],e.selectedUserIds={},e.saveSelectedUserIds={},e.dataDisplayGroupAllUser=[]}}}),a),Z=new X;t.userStore=Z},,,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnText=t.AnimatedText=void 0;var a=r(n(34)),o=r(n(54)),i=n(21),l=n(1),s=n(2),u=n(7),c=n(3),d=["singleLine","style"],f=s.StyleSheet.create({RnText:{position:"relative",fontSize:u.v.fontSize,lineHeight:u.v.lineHeight,fontWeight:u.v.fontWeight,fontFamily:u.v.fontFamily,color:u.v.color},title:{fontSize:u.v.fontSizeTitle,lineHeight:u.v.lineHeightTitle,fontWeight:"bold"},subTitle:{fontSize:u.v.fontSizeSubTitle,lineHeight:u.v.lineHeightSubTitle,fontWeight:"bold"},small:{fontSize:u.v.fontSizeSmall,lineHeight:u.v.lineHeightSmall,fontWeight:"bold"},black:{color:"black"},white:{color:"white"},primary:{color:u.v.colors.primary},warning:{color:u.v.colors.warning},danger:{color:u.v.colors.danger},normal:{fontWeight:"normal"},bold:{fontWeight:"bold"},center:{textAlign:"center"},right:{textAlign:"right"},padding:{paddingHorizontal:10}}),p=function(e){return(0,l.forwardRef)((function(t,n){var r=t.singleLine,l=t.style,s=(0,o.default)(t,d);return(0,c.jsx)(e,Object.assign({numberOfLines:r?1:999,ref:n},(0,i.pickBy)(s,(function(e,t){return!(t in f)})),{style:[f.RnText].concat((0,a.default)(Object.keys(s).sort((function(e){return"title"===e||"subTitle"===e||"small"===e?-1:1})).map((function(e){return s[e]&&f[e]}))),[l])}))}))},g=p(s.Text);t.RnText=g;var h=p(s.Animated.Text);t.AnimatedText=h},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnKeyboard=void 0;var a,o,i,l,s=r(n(22)),u=r(n(5)),c=r(n(20)),d=(r(n(23)),n(9)),f=n(2),p=n(33),g=(a=function e(){var t=this;(0,u.default)(this,e),(0,s.default)(this,"isKeyboardShowing",o,this),(0,s.default)(this,"isKeyboardAnimating",i,this),this.waitKeyboardTimeoutId=0,this.waitKeyboard=function(e){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];t.waitKeyboardTimeoutId||(t.isKeyboardShowing?(f.Keyboard.dismiss(),t.waitKeyboardTimeoutId=p.BackgroundTimer.setTimeout((function(){t.waitKeyboardTimeoutId=0,e.apply(void 0,r)}),300)):e.apply(void 0,r))}},this.keyboardAnimatingTimeoutId=0,(0,s.default)(this,"setKeyboardAnimatingTimeout",l,this)},o=(0,c.default)(a.prototype,"isKeyboardShowing",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,c.default)(a.prototype,"isKeyboardAnimating",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=(0,c.default)(a.prototype,"setKeyboardAnimatingTimeout",[d.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.keyboardAnimatingTimeoutId&&p.BackgroundTimer.clearTimeout(e.keyboardAnimatingTimeoutId),e.isKeyboardAnimating=!0,e.keyboardAnimatingTimeoutId=p.BackgroundTimer.setTimeout((0,d.action)((function(){e.keyboardAnimatingTimeoutId=0,e.isKeyboardAnimating=!1})),300)}}}),a),h=new g;t.RnKeyboard=h,f.Keyboard.addListener("keyboardWillShow",(0,d.action)((function(){h.setKeyboardAnimatingTimeout(),h.isKeyboardShowing=!0}))),f.Keyboard.addListener("keyboardWillHide",(0,d.action)((function(){h.setKeyboardAnimatingTimeout(),h.isKeyboardShowing=!1}))),f.Keyboard.addListener("keyboardDidShow",(0,d.action)((function(){h.isKeyboardShowing=!0}))),f.Keyboard.addListener("keyboardDidHide",(0,d.action)((function(){h.isKeyboardShowing=!1})))},,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnStackerStore=t.RnStacker=void 0;var a,o,i,l,s=r(n(22)),u=r(n(5)),c=r(n(20)),d=(r(n(23)),n(9)),f=n(33),p=n(19),g=n(71),h=(a=function e(){var t=this;(0,u.default)(this,e),(0,s.default)(this,"stacks",o,this),(0,s.default)(this,"stackAnimating",i,this),(0,s.default)(this,"openStack",l,this),this.dismiss=g.RnKeyboard.waitKeyboard((0,d.action)((function(){t.stacks.pop()}))),this.createGoTo=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object.keys(e);if(1!==r.length)throw new Error("RnStacker.registerStack must be called with only 1 key");var a=r[0],o=e[a],i=g.RnKeyboard.waitKeyboard((0,d.action)((function(e){if((0,p.getCallStore)().inPageCallManage=void 0,!t.stackAnimating){n||(t.stackAnimating=!0,f.BackgroundTimer.setTimeout((function(){t.stackAnimating=!1}),300));var r={};if(e&&!e.nativeEvent)try{Object.assign(r,e)}catch(i){}Object.assign(r,{name:a,Component:o,isRoot:n}),t.openStack(r)}})));return i},this.createBackTo=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var r=(0,p.getCallStore)();r.inPageCallManage?r.inPageCallManage=void 0:t.stacks.length<=1?t.createGoTo(e,n).apply(void 0,arguments):t.dismiss()}}},o=(0,c.default)(a.prototype,"stacks",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,c.default)(a.prototype,"stackAnimating",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=(0,c.default)(a.prototype,"openStack",[d.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.isRoot?e.stacks=[t]:(e.stacks=e.stacks.filter((function(e){return e.name!==t.name})),e.stacks.push(t))}}}),a);t.RnStackerStore=h;var b=new h;t.RnStacker=b},,,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.localeOptions=t.labels=t.intlStore=t.enLabelsMapIndex=t.IntlStore=void 0;var a,o,i,l,s=r(n(12)),u=r(n(13)),c=r(n(22)),d=r(n(5)),f=r(n(20)),p=(r(n(23)),r(n(312))),g=n(9),h=n(2),b=r(n(682)),v=r(n(683)),m=n(49),y=n(62),C=n(46),S=n(85),x={en:b.default,ja:v.default};t.labels=x;var k=(0,m.arrToMap)(b.default,(function(e){return e}),(function(e,t){return t}));t.enLabelsMapIndex=k;var P=[{key:"en",label:"English"},{key:"ja",label:"\u65e5\u672c\u8a9e"}];t.localeOptions=P;var w=h.NativeModules,A=(a=function e(){var t=this;(0,d.default)(this,e),(0,c.default)(this,"locale",o,this),(0,c.default)(this,"localeReady",i,this),(0,c.default)(this,"localeLoading",l,this),this.getLocaleName=function(){var e;return null===(e=P.find((function(e){return e.key===t.locale})))||void 0===e?void 0:e.label},this.getLocale=(0,u.default)(s.default.mark((function e(){var n,r,a,o,i,l,u,c;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getItem("locale").then((function(e){return e||""}));case 2:return(n=e.sent)&&x[n]||(n=("ios"===h.Platform.OS?(null===w||void 0===w||null===(r=w.SettingsManager)||void 0===r||null===(a=r.settings)||void 0===a?void 0:a.AppleLocale)||(null===w||void 0===w||null===(o=w.SettingsManager)||void 0===o||null===(i=o.settings)||void 0===i||null===(l=i.AppleLanguages)||void 0===l?void 0:l[0]):null===w||void 0===w||null===(u=w.I18nManager)||void 0===u?void 0:u.localeIdentifier)||"",n=null===(c=n)||void 0===c?void 0:c.substr(0,2),console.log("Intl debug: system locale="+n)),n&&x[n]||(n="en"),e.next=7,p.default.setItem("locale",n);case 7:(0,g.runInAction)((function(){t.locale=n,y.BrekekeUtils.setLocale(t.locale)}));case 8:case"end":return e.stop()}}),e)}))),this.setLocale=function(){var e=(0,u.default)(s.default.mark((function e(n){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.localeLoading&&n!==t.locale){e.next=2;break}return e.abrupt("return");case 2:return(0,g.runInAction)((function(){t.localeLoading=!0})),x[n]||(n="en"),e.next=6,p.default.setItem("locale",n);case 6:return e.next=8,(0,C.waitTimeout)();case 8:(0,g.runInAction)((function(){t.localeLoading=!1,t.locale=n,y.BrekekeUtils.setLocale(t.locale)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.selectLocale=function(){S.RnPicker.open({options:P,selectedKey:t.locale,onSelect:t.setLocale})},this.wait=function(){return t.loadingPromise||(t.loadingPromise=t.getLocale().then((0,g.action)((function(){t.localeReady=!0,t.localeLoading=!1})))),t.loadingPromise}},o=(0,f.default)(a.prototype,"locale",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"en"}}),i=(0,f.default)(a.prototype,"localeReady",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=(0,f.default)(a.prototype,"localeLoading",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),a);t.IntlStore=A;var T=new A;t.intlStore=T},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.animationOption=void 0,t.useAnimation=u,t.useAnimationOnDidMount=void 0;var a=r(n(35)),o=n(1),i=n(2),l=n(49),s={duration:150};function u(e,t,n){var r=(0,o.useRef)();r.current||(r.current=new i.Animated.Value(0));var a=r.current;return(0,o.useEffect)((function(){var t=i.Animated.timing(a,Object.assign({},s,n,{toValue:e?1:0,useNativeDriver:!1}));return t.start(),function(){return t.stop()}}),[e,n,a]),(0,l.arrToMap)(Object.keys(t),(function(e){return e}),(function(e){return a.interpolate({inputRange:[0,1],outputRange:t[e]})}))}t.animationOption=s;t.useAnimationOnDidMount=function(e){var t=(0,o.useState)(!1),n=(0,a.default)(t,2),r=n[0],i=n[1];return(0,o.useEffect)((function(){return i(!0)}),[]),u(r,e)}},,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnPickerStore=t.RnPicker=void 0;var a,o,i,l,s=r(n(22)),u=r(n(5)),c=r(n(20)),d=(r(n(23)),n(9)),f=(a=function e(){(0,u.default)(this,e),(0,s.default)(this,"currentRnPicker",o,this),(0,s.default)(this,"open",i,this),(0,s.default)(this,"dismiss",l,this)},o=(0,c.default)(a.prototype,"currentRnPicker",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=(0,c.default)(a.prototype,"open",[d.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.currentRnPicker=t}}}),l=(0,c.default)(a.prototype,"dismiss",[d.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.currentRnPicker=null}}}),a);t.RnPickerStore=f;var p=new f;t.RnPicker=p},,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.toBooleanFalsy=t.toBoolean=void 0;t.toBoolean=function(e){return"on"===e||"true"===e||"1"===e||!0===e};t.toBooleanFalsy=function(e){return!("off"!==e&&"false"!==e&&"0"!==e&&!1!==e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.formatChatContent=t.filterTextOnly=void 0;var r=n(691),a=n(11),o=n(4),i=n(327),l=function(e){var t=e.type||e.ctype,n=e.text||"",l=n;if(1!==t){var s,u;try{s=JSON.parse(n)}catch(f){}if(s||(s={}),"number"===typeof s.talklen||"string"===typeof s.talklen)n=e.creatorId?e.creatorId===(null===(u=(0,a.getAuthStore)().getCurrentAccount())||void 0===u?void 0:u.pbxUsername)?(0,o.intl)("Outgoing call, duration: {{$0}}",{$0:(0,i.formatDuration)(s.talklen)}):(0,o.intl)("Incoming call, duration: {{$0}}",{$0:(0,i.formatDuration)(s.talklen)}):(0,o.intl)("Call duration: {{$0}}",{$0:(0,i.formatDuration)(s.talklen)});else if(s.name&&s.file_id){var c;n=s.name+" "+(s.additionals?"":"-> "+(null===(c=s.target)||void 0===c?void 0:c.user_id))}else s.name&&!s.file_id&&(n=s.name)}var d=n.endsWith(" .txt");return d&&(n=n.replace(/ \.txt$/,"")),d=d||1===t||!l.startsWith("{"),{text:(0,r.decode)(n),isTextOnly:d}};t.formatChatContent=l;t.filterTextOnly=function(e){return(e||[]).filter((function(e){return l(e).isTextOnly}))}},,,,,,,,,,,,,,,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.debugStore=t.compareSemVer=void 0;var a,o,i,l,s,u,c=r(n(12)),d=r(n(13)),f=r(n(22)),p=r(n(5)),g=r(n(20)),h=(r(n(23)),r(n(35))),b=n(673),v=n(21),m=n(9),y=r(n(77)),C=n(2),S=r(n(63)),x=r(n(63)),k=n(8),P=n(33),w=n(4),A=n(15),T=null,I=["log","log1","log2"].map((function(e){return"web"===C.Platform.OS?"":S.default.DocumentDirectoryPath+"/brekeke-phone-"+e+".txt"})),j=(0,h.default)(I,3),_=j[0],R=j[1],O=j[2],B=(a=function e(){var t=this;(0,p.default)(this,e),this.loading=!0,(0,f.default)(this,"captureDebugLog",o,this),this.toggleCaptureDebugLog=function(){t.captureDebugLog=!t.captureDebugLog,k.RnAsyncStorage.setItem("captureDebugLog",JSON.stringify(t.captureDebugLog))},(0,f.default)(this,"logSizes",i,this),this.getLogSize=function(){return t.logSizes.reduce((function(e,t){return e+t}),0)},this.logQueue=[],this.captureConsoleOutput=function(e,n){("error"===e||"warn"===e||t.captureDebugLog)&&(n=(0,y.default)().format("YYYY/MM/DD HH:mm:ss.SSS")+" ["+e.toUpperCase().padStart(5)+"] "+n.replace(/\s*:\s+log@\/.+$/,""),t.logQueue.push(n),t.writeFileBatch())},this.writeFile=(0,d.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading){e.next=3;break}return P.BackgroundTimer.setTimeout(t.writeFileBatch,300),e.abrupt("return");case 3:return t.loading=!0,e.next=6,t.writeFileWithoutCatch().catch((function(e){A.RnAlert.error({message:(0,w.intlDebug)("Failed to write debug log to file",{}),err:e})}));case 6:t.loading=!1;case 7:case"end":return e.stop()}}),e)}))),this.writeFileWithoutCatch=(0,d.default)(c.default.mark((function e(){var n,r,a;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.logQueue.length){e.next=2;break}return e.abrupt("return");case 2:return n=t.logQueue.join("\n"),t.logQueue=[],e.next=6,S.default.appendFile(R,n+"\n","utf8");case 6:return e.next=8,S.default.stat(R);case 8:if(r=e.sent,a=r.size,t.logSizes[0]=Number(a),!(t.logSizes[0]>1e5)){e.next=17;break}return t.logSizes[1]=t.logSizes[0],e.next=15,S.default.unlink(O).catch((function(e){console.error("debugStore RNFS.unlink(log2).catch error:",e)}));case 15:return e.next=17,S.default.moveFile(R,O);case 17:case"end":return e.stop()}}),e)}))),this.writeFileBatch=(0,v.debounce)(this.writeFile,300,{maxWait:1e3}),this.openLogFile=function(){return t.openLogFileWithoutCatch().catch((function(e){A.RnAlert.error({message:(0,w.intlDebug)("Failed to build and open log file",{}),err:e})}))},this.openLogFileWithoutCatch=(0,d.default)(c.default.mark((function e(){var t,n,r,a,o,i,l,s;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[R,O].map((function(e){return S.default.exists(e).then((function(t){return t?S.default.readFile(e,"utf8"):""})).then((function(e){return e||""}))})),e.next=3,Promise.all(t);case 3:if(n=e.sent,r=(0,h.default)(n,2),a=r[0],o=r[1],i="brekeke_phone_log_"+(0,y.default)().format("YYMMDDHHmmss")+".txt",l=null,"ios"!==C.Platform.OS){e.next=15;break}return e.next=12,S.default.writeFile(_,o+a,"utf8");case 12:l=_,e.next=17;break;case 15:s=b.Buffer.from(o+a).toString("base64"),l="data:text/plain;base64,"+s;case 17:x.default.open({title:i,url:l,subject:i});case 18:case"end":return e.stop()}}),e)}))),this.clearLogFiles=function(){A.RnAlert.prompt({title:(0,w.intl)("Clear Logs",{}),message:(0,w.intl)("Do you want to clear all the log files?",{}),onConfirm:t.clearLogFilesWithoutPrompt,confirmText:(0,w.intl)("CLEAR",{})})},this.clearLogFilesWithoutPrompt=function(){return t.clearLogFilesWithoutCatch().catch((function(e){A.RnAlert.error({message:(0,w.intlDebug)("Failed to clear the log files",{}),err:e})}))},this.clearLogFilesWithoutCatch=function(){return Promise.all([R,O].map((function(e,n){return S.default.exists(e).then((function(t){return t?S.default.unlink(e):void 0})).then((function(){return t.logSizes[n]=0}))})))},(0,f.default)(this,"isCheckingForUpdate",l,this),(0,f.default)(this,"remoteVersion",s,this),(0,f.default)(this,"remoteVersionLastCheck",u,this),this.checkForUpdate=function(){t.isCheckingForUpdate||(t.isCheckingForUpdate=!0,("android"===C.Platform.OS?window.fetch("https://play.google.com/store/apps/details?id=com.brekeke.phone&hl=en").then((function(e){return e.text()})).then((function(e){var t,n;return(null===(t=e.match(/\[\[\["(\d+\.\d+\.\d+)"\]/))||void 0===t?void 0:t[1].trim())||(null===(n=e.match(/Current Version.+>([\d.]+)<\/span>/))||void 0===n?void 0:n[1].trim())})):window.fetch("https://itunes.apple.com/lookup?bundleId=com.brekeke.phone").then((function(e){return e.json()})).then((function(e){var t;return null===(t=e.results)||void 0===t?void 0:t[0].version}))).then((function(e){if(!e)throw new Error("The returned version from app store is empty");t.remoteVersion=e,t.remoteVersionLastCheck=Date.now(),t.isCheckingForUpdate=!1})).then(t.saveRemoteVersionToStorage).catch((function(e){console.error("Failed to get app version from app store:",e),t.isCheckingForUpdate=!1})))},this.saveRemoteVersionToStorage=function(){k.RnAsyncStorage.setItem("remoteVersion",JSON.stringify({version:t.remoteVersion,lastCheck:t.remoteVersionLastCheck})).catch((function(e){console.error("Failed to save app version to storage:",e)}))},this.openInStore=function(){C.Linking.openURL("android"===C.Platform.OS?"https://play.google.com/store/apps/details?id=com.brekeke.phone":"itms-apps://apps.apple.com/app/id1233825750")},this.autoCheckForUpdate=function(){Date.now()-t.remoteVersionLastCheck>864e5&&t.checkForUpdate()},this.init=(0,d.default)(c.default.mark((function e(){var n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,(n=[R,O].map((function(e,n){return S.default.exists(e).then((function(t){return t?S.default.stat(e):void 0})).then((function(e){return e?t.logSizes[n]=Number(e.size)||0:0})).catch((function(e){A.RnAlert.error({message:(0,w.intlDebug)("Failed to read debug log file size",{}),err:e})}))}))).push(S.default.exists(_).then((function(e){return e?S.default.unlink(_):void 0})).catch((function(e){A.RnAlert.error({message:(0,w.intlDebug)("Failed to delete unused debug log file",{}),err:e})}))),n.push(k.RnAsyncStorage.getItem("captureDebugLog").then((function(e){return e&&(t.captureDebugLog=JSON.parse(e))})).catch((function(e){A.RnAlert.error({message:(0,w.intlDebug)("Failed to read debug log settings from storage",{}),err:e})}))),n.push(k.RnAsyncStorage.getItem("remoteVersion").then((function(e){return e&&JSON.parse(e)})).then((function(e){e&&(t.remoteVersion=e.version,t.remoteVersionLastCheck=e.lastCheck),t.autoCheckForUpdate()})).catch((function(e){console.error("Failed to read app version from storage:",e)}))),e.next=7,Promise.all(n);case 7:t.loading=!1;case 8:case"end":return e.stop()}}),e)})))},o=(0,g.default)(a.prototype,"captureDebugLog",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=(0,g.default)(a.prototype,"logSizes",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[0,0]}}),l=(0,g.default)(a.prototype,"isCheckingForUpdate",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,g.default)(a.prototype,"remoteVersion",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=(0,g.default)(a.prototype,"remoteVersionLastCheck",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a);"web"!==C.Platform.OS&&(T=window.debugStore=new B).init();var M=T;t.debugStore=M;var U=function(e){var t=(null===e||void 0===e?void 0:e.split(/\./g).map((function(e){var t;return null===(t=e.match(/^\d+/))||void 0===t?void 0:t[0]})).map(Number))||[];return[t[0]||0,t[1]||0,t[2]||0,t[3]||0]};t.compareSemVer=function(e,t){var n=U(e),r=(0,h.default)(n,4),a=r[0],o=r[1],i=r[2],l=r[3],s=U(t),u=(0,h.default)(s,4),c=u[0],d=u[1],f=u[2],p=u[3];return c!==a?a>c?1:-1:d!==o?o>d?1:-1:f!==i?i>f?1:-1:p!==l?l>p?1:-1:0}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.saveBlobFile=t.saveBlob=void 0;var a=r(n(12)),o=r(n(13)),i=n(40);t.saveBlob=function(e,t){var n=document.createElement("a");n.setAttribute("style","display: none");var r=window.URL.createObjectURL(e);n.href=r,n.download=t,n.click(),window.URL.revokeObjectURL(r)};t.saveBlobFile=function(e,t,n,r){return new Promise(function(){var l=(0,o.default)(a.default.mark((function l(s,u){var c,d;return a.default.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(l.prev=0,!r){l.next=5;break}l.t0=r,l.next=8;break;case 5:return l.next=7,i.uc.acceptFile(e);case 7:l.t0=l.sent;case 8:c=l.t0,(d=new FileReader).onloadend=function(){var r=(0,o.default)(a.default.mark((function r(o){var i,l,u,c,d,f;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=null===(i=o.target)||void 0===i?void 0:i.result,r.next=3,caches.open(""+t);case 3:return u=r.sent,c=new Blob([l],{type:"video"===n?"video/mp4":"image/jpg"}),d=new Response(c),f=t+"/"+e,r.next=9,u.put(e,d);case 9:s(f);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),d.onerror=function(e){console.error("saveBlobFile.web onerror error:",e)},d.readAsArrayBuffer(c),l.next=19;break;case 15:l.prev=15,l.t1=l.catch(0),console.error("saveBlobFile.web catch error:",l.t1),u(l.t1);case 19:case"end":return l.stop()}}),l,null,[[0,15]])})));return function(e,t){return l.apply(this,arguments)}}())}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.timerStore=t.Duration=void 0;var a,o,i,l=r(n(54)),s=r(n(22)),u=r(n(5)),c=r(n(20)),d=(r(n(23)),n(9)),f=n(6),p=n(8),g=n(33),h=n(327),b=n(3),v=["children"],m=new(a=function e(){(0,u.default)(this,e),(0,s.default)(this,"now",o,this),(0,s.default)(this,"updateNow",i,this),g.BackgroundTimer.setInterval(this.updateNow,1e3)},o=(0,c.default)(a.prototype,"now",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Date.now()}}),i=(0,c.default)(a.prototype,"updateNow",[d.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.now=Date.now()}}}),a);t.timerStore=m;var y=(0,f.observer)((function(e){var t=e.children,n=(0,l.default)(e,v);return(0,b.jsx)(p.RnText,Object.assign({},n,{children:(0,h.formatDuration)(t&&m.now-t)}))}));t.Duration=y},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.numberOfChatsPerLoad=t.groupByTimestamp=t.formatDateTimeSemantic=t.formatDateSemantic=void 0;var a=r(n(77)),o=n(40),i=n(4);t.numberOfChatsPerLoad=20;t.groupByTimestamp=function(e){var t,n,r,i,s=o.uc.me(),u=[];return null!==e&&void 0!==e&&e.length?(e.forEach((function(e){var o=(0,a.default)(e.created),c=o.format("MMM D");if(t&&c===t||(n=[],t=c,u.push({date:l(e.created),groupByTime:n})),!r||e.creator!==r.creator||(0,a.default)(e.created).valueOf()-(0,a.default)(r.created).valueOf()>6e5){var d=o.format("HH:mm");r=e,i=[],n.push({time:d,messages:i,createdByMe:e.creator===s.id})}i.push(e)})),u):u};var l=function(e){var t=(0,a.default)(e),n=(0,a.default)();if(t.format("yyyy")!==n.format("yyyy"))return t.format("DD/MM/yyyy");var r=n.format("MMM D"),o=n.add(-1,"days").format("MMM D"),l=t.format("MMM D");return l===r?(0,i.intl)("Today",{}):l===o?(0,i.intl)("Yesterday",{}):l};t.formatDateSemantic=l;t.formatDateTimeSemantic=function(e){var t=(0,a.default)(e),n=(0,a.default)(),r="";return t.format("yyyy")!==n.format("yyyy")?r=t.format("DD/MM/yyyy"):t.format("MMM D")!==n.format("MMM D")&&(r=t.format("MMM D")),r&&(r=" "+r),(0,a.default)(e).format("HH:mm")+r}},,,,,,,,,,,,,,,,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setSyncPnTokenModule=t.SyncPnToken=void 0;var n=null;t.setSyncPnTokenModule=function(e){n=e};t.SyncPnToken=function(){return n}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnIcon=void 0;var a=r(n(54)),o=n(2),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(209)),l=n(7),s=n(3),u=["color","path","size","viewBox","style"];function c(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var d=o.StyleSheet.create({Icon:{flex:1,alignItems:"center",justifyContent:"center"}});t.RnIcon=function(e){var t=e.color,n=e.path,r=e.size,c=void 0===r?l.v.iconSize:r,f=e.viewBox,p=e.style,g=(0,a.default)(e,u);return(0,s.jsx)(o.View,Object.assign({},g,{style:[d.Icon,p],children:(0,s.jsx)(i.default,{height:c,viewBox:f||"0 0 24 24",width:c,children:(0,s.jsx)(i.Path,{d:n,fill:t||"black"})})}))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useStore=void 0;var r=n(1),a=n(685);t.useStore=function(e){var t=(0,r.useRef)();if(!t.current){if(e&&"function"!==typeof e)throw new Error("useStore: mixin must be a function, found "+e);t.current=(0,a.createStore)(e||function(){return{}})}return t.current}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.embedApi=t.EmbedApi=void 0;var a=r(n(12)),o=r(n(13)),i=r(n(5)),l=r(n(18)),s=r(n(17)),u=r(n(98)),c=n(83),d=n(318),f=n(32),p=n(11),g=n(19),h=n(49),b=n(46),v=n(319),m=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).promptBrowserPermission=v.webPromptPermission,e.getCurrentAccount=function(){return(0,p.getAuthStore)().getCurrentAccount()},e.call=function(){var e;return(e=(0,g.getCallStore)()).startCall.apply(e,arguments)},e.getRunningCalls=function(){return(0,g.getCallStore)().calls},e.restart=function(){var t=(0,o.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,p.getAuthStore)().signOutWithoutSaving(),t.next=3,(0,b.waitTimeout)();case 3:return t.next=5,e._signIn(n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.cleanup=function(){(0,p.getAuthStore)().signOutWithoutSaving(),e._rootTag&&(0,c.unmountComponentAtNode)(e._rootTag)},e._signIn=function(){var e=(0,o.default)(a.default.mark((function e(t){var n,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.accountStore.waitStorageLoaded();case 2:return y._palEvents=t.palEvents,y._palParams=(0,d.parsePalParams)(t),t.clearExistingAccount&&(f.accountStore.accounts=[],f.accountStore.accountData=[]),n=(0,h.arrToMap)(f.accountStore.accounts,f.getAccountUniqueId,(function(e){return e})),t.accounts.forEach((function(e){var t=C(e),a=n[(0,f.getAccountUniqueId)(t)];a?(S(t,a),r=r||a):(f.accountStore.accounts.push(t),r=r||t)})),e.next=9,f.accountStore.saveAccountsToLocalStorageDebounced();case 9:if(t.autoLogin){e.next=11;break}return e.abrupt("return");case 11:if(o=(0,p.getAuthStore)(),!r){e.next=15;break}return o.signIn(r),e.abrupt("return");case 15:return e.next=17,o.autoSignInEmbed();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return n}(u.default);t.EmbedApi=m;var y=new m;t.embedApi=y;var C=function(e){var t=f.accountStore.genEmptyAccount();return t.pbxHostname=e.hostname||"",t.pbxPort=e.port||"",t.pbxTenant=e.tenant||"",t.pbxUsername=e.username||"",t.pbxPassword=e.password||"",t.pbxPhoneIndex=""+(Number(e.phoneIndex)||4),t.ucEnabled=e.uc||!1,t.displayOfflineUsers=e.ucDisplayOfflineUsers||!1,t.parks=e.parks||[],t.parkNames=e.parkNames||[],t.pushNotificationEnabled=e.pushNotification||!1,t},S=function(e,t){t.pbxHostname=e.pbxHostname,t.pbxPort=e.pbxPort,t.pbxTenant=e.pbxTenant,t.pbxUsername=e.pbxUsername,t.pbxPassword=e.pbxPassword,t.pbxPhoneIndex=e.pbxPhoneIndex,t.ucEnabled=e.ucEnabled,t.displayOfflineUsers=e.displayOfflineUsers,t.parks=e.parks,t.parkNames=e.parkNames,t.pushNotificationEnabled=e.pushNotificationEnabled}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonIcon=void 0;var r=n(2),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(209)),o=n(8),i=n(7),l=n(3);function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var u=r.StyleSheet.create({ButtonIcon:{alignItems:"center",marginHorizontal:5},ButtonIcon_Btn:{borderWidth:1,padding:12},ButtonIcon_Name:{paddingTop:5,minWidth:"ios"===r.Platform.OS?70:80,textAlign:"center"}});t.ButtonIcon=function(e){var t=e.size||15;return(0,l.jsxs)(r.View,{style:[u.ButtonIcon,e.styleContainer],children:[(0,l.jsx)(o.RnTouchableOpacity,{disabled:e.disabled,onPress:e.onPress,style:[u.ButtonIcon_Btn,e.style,{borderRadius:1.5*t},{backgroundColor:null!==e&&void 0!==e&&e.disabled?i.v.subColor:e.bgcolor},e.noborder&&{borderWidth:0},{borderColor:e.bdcolor}],children:(0,l.jsx)(a.default,{height:t,viewBox:"0 0 24 24",width:t,children:(0,l.jsx)(a.Path,{d:e.path,fill:e.color||"black"})})}),e.name&&(0,l.jsx)(o.RnText,{small:!0,style:[u.ButtonIcon_Name,!!e.textcolor&&{color:e.textcolor}],children:e.name})]})}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnDropdownStore=t.RnDropdown=void 0;var a,o,i,l,s,u,c,d,f,p,g,h,b,v,m,y,C=r(n(34)),S=r(n(22)),x=r(n(5)),k=r(n(20)),P=(r(n(23)),n(21)),w=n(9),A=(a=function e(){(0,x.default)(this,e),(0,S.default)(this,"positions",o,this),(0,S.default)(this,"shouldUpdatePosition",i,this),(0,S.default)(this,"hiddenIndexes",l,this),(0,S.default)(this,"openedIndex",s,this),this.itemHeight=0,this.headerHeight=0,(0,S.default)(this,"toggleSection",u,this),(0,S.default)(this,"removeSection",c,this),(0,S.default)(this,"setPositions",d,this),(0,S.default)(this,"setShouldUpdatePosition",f,this),(0,S.default)(this,"open",p,this),(0,S.default)(this,"toggle",g,this),(0,S.default)(this,"close",h,this),(0,S.default)(this,"setHiddenIndexes",b,this),(0,S.default)(this,"addSection",v,this),(0,S.default)(this,"setHeaderHeight",m,this),(0,S.default)(this,"setItemHeight",y,this)},o=(0,k.default)(a.prototype,"positions",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,k.default)(a.prototype,"shouldUpdatePosition",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=(0,k.default)(a.prototype,"hiddenIndexes",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=(0,k.default)(a.prototype,"openedIndex",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),u=(0,k.default)(a.prototype,"toggleSection",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){var r=(0,C.default)(e.hiddenIndexes),a=r.indexOf(t);a>-1?r.splice(a,1):r.push(t);var o=(0,P.cloneDeep)(e.positions),i=!e.hiddenIndexes.some((function(e){return e===t}));e.positions.forEach((function(r,a){a>t&&(o[a]={top:(o[a].top||0)+(i?-e.itemHeight:e.itemHeight)*n,right:o[a].right||0})})),e.openedIndex=-1,e.hiddenIndexes=(0,P.uniq)(r),e.positions=o}}}),c=(0,k.default)(a.prototype,"removeSection",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){var r=(0,C.default)(e.positions);e.positions.forEach((function(a,o){o>t&&(r[o]={top:(r[o].top||0)-e.itemHeight*n-e.headerHeight,right:r[o].right||0})})),r.length>=1&&r.splice(t,1),e.positions=r,e.hiddenIndexes=e.hiddenIndexes.map((function(e){return e-1})),e.openedIndex=-1}}}),d=(0,k.default)(a.prototype,"setPositions",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.positions=t}}}),f=(0,k.default)(a.prototype,"setShouldUpdatePosition",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.shouldUpdatePosition=t}}}),p=(0,k.default)(a.prototype,"open",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.openedIndex=t}}}),g=(0,k.default)(a.prototype,"toggle",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.openedIndex=t===e.openedIndex?-1:t,e.hiddenIndexes=e.hiddenIndexes.filter((function(e){return e!==t}))}}}),h=(0,k.default)(a.prototype,"close",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.openedIndex=-1}}}),b=(0,k.default)(a.prototype,"setHiddenIndexes",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hiddenIndexes=t}}}),v=(0,k.default)(a.prototype,"addSection",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.hiddenIndexes=e.hiddenIndexes.map((function(e){return e+1})),e.shouldUpdatePosition=!0}}}),m=(0,k.default)(a.prototype,"setHeaderHeight",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.headerHeight=t}}}),y=(0,k.default)(a.prototype,"setItemHeight",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.itemHeight=t}}}),a);t.RnDropdownStore=A;var T=new A;t.RnDropdown=T},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.authSIP=void 0;var a,o,i,l=r(n(12)),s=r(n(13)),u=r(n(22)),c=r(n(5)),d=r(n(20)),f=(r(n(23)),r(n(260))),p=n(21),g=n(9),h=n(50),b=n(64),v=n(340),m=n(87),y=n(46),C=n(11),S=n(150),x=function(e){return h.pbx.getConfig().then((function(t){return t&&t[e]}))},k=(a=function e(){var t=this;(0,c.default)(this,e),this.auth=function(){var e;t.authWithCheck(),null===(e=t.clearShouldAuthReaction)||void 0===e||e.call(t);var n=(0,C.getAuthStore)();t.clearShouldAuthReaction=(0,g.reaction)(n.sipShouldAuth,t.authWithCheckDebounced)},(0,u.default)(this,"dispose",o,this),this.onSipFailure=function(){console.log("SIP PN debug: set sipState failure"),b.sip.stopWebRTC();var e=(0,C.getAuthStore)();e.sipState="failure",e.sipTotalFailure+=1,e.sipTotalFailure>3&&(e.sipPn={}),t.authWithCheck()},this.authPnWithoutCatch=function(){var e=(0,s.default)(l.default.mark((function e(n){var r,a,o,i;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,C.getAuthStore)(),a=r.getCurrentAccount()){e.next=5;break}return console.log("SIP PN debug: Already signed out after long await"),e.abrupt("return");case 5:if(!w(n)){e.next=9;break}return console.error("SIP PN debug: expired auth token"),t.onSipFailure(),e.abrupt("return");case 9:if(n.sipAuth&&n.sipWssPort&&n.phoneId){e.next=15;break}return console.error("SIP PN debug: Invalid sip PN data: "+f.default.stringify(n)),r.sipPn={},r.pbxConfig=void 0,t.onSipFailure(),e.abrupt("return");case 15:return o=n.turnServer?{urls:n.turnServer.split(",").map((function(e){return e.trim()})),username:n.turnUsername,credential:n.turnCredential}:void 0,i={hostname:a.pbxHostname,port:n.sipWssPort,username:n.phoneId,accessToken:n.sipAuth,pbxTurnEnabled:a.pbxTurnEnabled,dtmfSendPal:(0,m.toBoolean)(n.dtmfSendPal),turnConfig:o},e.next=19,b.sip.connect(i,a);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,u.default)(this,"authWithoutCatch",i,this),this.authWithCheck=(0,s.default)(l.default.mark((function e(){var n,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,C.getAuthStore)(),w(n.sipPn)&&(n.sipPn={}),r=n.sipShouldAuth(),console.log("SIP PN debug: authWithCheck "+r,{sipState:n.sipState,signedInId:!!n.signedInId,sipAuth:!!n.sipPn.sipAuth,pbxState:n.pbxState,sipTotalFailure:n.sipTotalFailure}),r){e.next=6;break}return e.abrupt("return");case 6:if(!(n.sipTotalFailure>1)){e.next=12;break}return n.sipState="waiting",e.next=10,(0,y.waitTimeout)(n.sipTotalFailure<5?1e3*n.sipTotalFailure:15e3);case 10:if("waiting"===n.sipState){e.next=12;break}return e.abrupt("return");case 12:t.authWithoutCatch().catch((0,g.action)((function(e){console.log("SIP PN debug: set sipState failure catch"),t.onSipFailure(),console.error("Failed to connect to sip:",e)})));case 13:case"end":return e.stop()}}),e)}))),this.authWithCheckDebounced=(0,p.debounce)(this.authWithCheck,300)},o=(0,d.default)(a.prototype,"dispose",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;console.log("SIP PN debug: set sipState stopped dispose"),null===(t=e.clearShouldAuthReaction)||void 0===t||t.call(e),(0,C.getAuthStore)().sipState="stopped",b.sip.stopWebRTC()}}}),i=(0,d.default)(a.prototype,"authWithoutCatch",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,s.default)(l.default.mark((function t(){var n,r;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("SIP PN debug: set sipState connecting"),(n=(0,C.getAuthStore)()).sipState="connecting",S.sipErrorEmitter.removeAllListeners(),S.sipErrorEmitter.on("error",(function(){console.log("SIP PN debug: got error from sipErrorEmitter"),e.dispose(),e.authWithCheckDebounced()})),w(n.sipPn)&&(n.sipPn={}),!(r=n.sipPn).sipAuth){t.next=11;break}return console.log("SIP PN debug: AuthSIP.authPnWithoutCatch"),e.authPnWithoutCatch(r),t.abrupt("return");case 11:if(console.log("SIP PN debug: AuthSIP.authWithoutCatch"),t.t0=r.sipWssPort,t.t0){t.next=17;break}return t.next=16,x("sip.wss.port");case 16:t.t0=t.sent;case 17:if(r.sipWssPort=t.t0,t.t1=r.dtmfSendPal,t.t1){t.next=23;break}return t.next=22,x("webphone.dtmf.send.pal");case 22:t.t1=t.sent;case 23:if(r.dtmfSendPal=t.t1,t.t2=r.turnServer,t.t2){t.next=29;break}return t.next=28,x("webphone.turn.server");case 28:t.t2=t.sent;case 29:if(r.turnServer=t.t2,t.t3=r.turnUsername,t.t3){t.next=35;break}return t.next=34,x("webphone.turn.username");case 34:t.t3=t.sent;case 35:if(r.turnUsername=t.t3,t.t4=r.turnCredential,t.t4){t.next=41;break}return t.next=40,x("webphone.turn.credential");case 40:t.t4=t.sent;case 41:if(r.turnCredential=t.t4,t.t5=r.phoneId,t.t5){t.next=47;break}return t.next=46,(0,v.updatePhoneIndex)().then((function(e){return null===e||void 0===e?void 0:e.id}));case 46:t.t5=t.sent;case 47:if(r.phoneId=t.t5,r.phoneId){t.next=50;break}throw new Error("Failed to get phoneId from updatePhoneIndex");case 50:return t.next=52,h.pbx.createSIPAccessToken(r.phoneId);case 52:return r.sipAuth=t.sent,r.sipAuthAt=Date.now(),t.next=56,e.authPnWithoutCatch(r);case 56:case"end":return t.stop()}}),t)})))}}),a),P=new k;t.authSIP=P;var w=function(e){return!e.sipAuthAt||Date.now()-e.sipAuthAt>9e4}},,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.sipErrorEmitter=void 0;var a=new(r(n(98)).default);t.sipErrorEmitter=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSavedNavigation=t.menus=t.getSubMenus=void 0;var r=n(16),a=n(32),o=n(11),i=n(4),l=n(80),s=n(10),u=n(15),c=n(49),d=function(){var e=[{key:"contact",icon:r.mdiAccountCircleOutline,subMenus:[{key:"phonebook",label:(0,i.intl)("PHONEBOOK",{}),navFnKey:"goToPageContactPhonebook"},{key:"users",label:(0,i.intl)("USERS",{}),navFnKey:"goToPageContactUsers"},{key:"chat",label:(0,i.intl)("CHAT",{}),navFnKey:"goToPageChatRecents",ucRequired:!0},{key:"webchat",label:(0,i.intl)("WEBCHAT",{}),navFnKey:"goToPageWebChat",ucRequired:!0}],defaultSubMenuKey:"users"},{key:"call",icon:r.mdiPhoneOutline,subMenus:[{key:"keypad",label:(0,i.intl)("KEYPAD",{}),navFnKey:"goToPageCallKeypad"},{key:"recents",label:(0,i.intl)("RECENTS",{}),navFnKey:"goToPageCallRecents"},{key:"parks",label:(0,i.intl)("PARKS",{}),navFnKey:"goToPageCallParks"}],defaultSubMenuKey:"recents"},{key:"settings",icon:r.mdiCogOutline,subMenus:[{key:"account",label:(0,i.intl)("CURRENT ACCOUNT",{}),navFnKey:"goToPageSettingsCurrentAccount"},{key:"other",label:(0,i.intl)("OTHER SETTINGS",{}),navFnKey:"goToPageSettingsOther"}],defaultSubMenuKey:"account"}];return e.forEach((function(e,t){var n;e.subMenusMap=(0,c.arrToMap)(e.subMenus,(function(e){return e.key}),(function(e){return e})),e.defaultSubMenu=null===(n=e.subMenusMap)||void 0===n?void 0:n[e.defaultSubMenuKey],e.subMenus.forEach((function(n){n.navFn=function(){var r;!n.ucRequired||null!==(r=(0,o.getAuthStore)().getCurrentAccount())&&void 0!==r&&r.ucEnabled?((0,s.Nav)()[n.navFnKey](),h(t,n.key)):e.defaultSubMenu.navFn()}})),e.navFn=function(){var n,r,a=null===(n=(0,o.getAuthStore)().getCurrentAccount())||void 0===n||null===(r=n.navSubMenus)||void 0===r?void 0:r[t];a&&(a in e.subMenusMap||(a=e.defaultSubMenuKey),e.subMenusMap[a].navFn())}})),e},f=l.intlStore.locale,p=d(),g=function(){return f!==l.intlStore.locale&&(f=l.intlStore.locale,p=d()),p};t.menus=g;var h=function(e,t){var n=g()[e],r=(0,o.getAuthStore)().getCurrentAccount();n&&r&&(t in n.subMenusMap||(t=n.defaultSubMenuKey),b(),"settings"!==n.key&&(r.navIndex=e),r.navSubMenus[e]=t,a.accountStore.saveAccountsToLocalStorageDebounced())},b=function(){var e,t=g(),n=(0,o.getAuthStore)().getCurrentAccount();n&&(t[n.navIndex]||(n.navIndex=0),(null===(e=n.navSubMenus)||void 0===e?void 0:e.length)!==t.length&&(n.navSubMenus=t.map((function(){return""}))),t.forEach((function(e,t){n.navSubMenus[t]in e.subMenusMap||(n.navSubMenus[t]=e.defaultSubMenuKey)})))};t.normalizeSavedNavigation=b;t.getSubMenus=function(e){var t=g().find((function(t){return t.key===e}));return t?t.subMenus.filter((function(e){var t;return!(e.ucRequired&&(null===(t=(0,o.getAuthStore)().getCurrentAccount())||void 0===t||!t.ucEnabled))})):(u.RnAlert.error({unexpectedErr:new Error("Can not find sub menus for "+e)}),[])}},,,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.AccountCreateForm=void 0;var a=r(n(34)),o=r(n(35)),i=n(21),l=n(6),s=n(2),u=n(32),c=n(11),d=n(105),f=n(4),p=n(15),g=n(316),h=n(126),b=n(30),v=n(8),m=n(3),y=(0,l.observer)((function(e){var t,n,r="web"===s.Platform.OS,l=(0,h.useStore)((function(){return{observable:{account:Object.assign({},u.accountStore.genEmptyAccount(),(0,i.cloneDeep)(e.updating)),addingPark:{name:"",number:""}},resetAllFields:function(){p.RnAlert.prompt({title:(0,f.intl)("Reset",{}),message:(0,f.intl)("Do you want to reset the form to the original data?",{}),onConfirm:function(){l.set("account",(function(t){return Object.assign({},u.accountStore.genEmptyAccount(),(0,i.cloneDeep)(e.updating),{id:t.id})}))},confirmText:(0,f.intl)("RESET",{})})},onAddingParkSubmit:function(){l.set("account",(function(e){if(e.parks=e.parks||[],e.parkNames=e.parkNames||[],l.addingPark.name&&l.addingPark.number){if(e.parkNames.length!==e.parks.length){var t=e.parkNames;e.parkNames=e.parks.map((function(e,n){return t[n]||""}))}if(e.parks.includes(l.addingPark.number))return p.RnAlert.error({message:(0,f.intlDebug)("Park number {{$0}} already exist",{$0:l.addingPark.number})}),e;e.parks.push(l.addingPark.number),e.parkNames.push(l.addingPark.name),l.addingPark={name:"",number:""}}return e}))},onAddingParkRemove:function(e){var t,n;p.RnAlert.prompt({title:(0,f.intl)("Remove Park",{}),message:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(v.RnText,{small:!0,children:["Park ",e+1,":"," ",(null===(t=l.account.parks)||void 0===t?void 0:t[e])+" - "+(null===(n=l.account.parkNames)||void 0===n?void 0:n[e])]}),(0,m.jsx)(s.View,{}),(0,m.jsx)(v.RnText,{children:(0,f.intl)("Do you want to remove this park?",{})})]}),onConfirm:function(){l.set("account",(function(t){var n,r;return t.parks=null===(n=t.parks)||void 0===n?void 0:n.filter((function(t,n){return n!==e})),t.parkNames=null===(r=t.parkNames)||void 0===r?void 0:r.filter((function(t,n){return n!==e})),t}))}})},hasUnsavedChanges:function(){var t=e.updating||u.accountStore.genEmptyAccount();return e.updating||Object.assign(t,{id:l.account.id}),!(0,i.isEqual)(l.account,t)},onBackBtnPress:function(){l.hasUnsavedChanges()?p.RnAlert.prompt({title:(0,f.intl)("Discard Changes",{}),message:(0,f.intl)("Do you want to discard all unsaved changes and go back?",{}),onConfirm:e.onBack,confirmText:(0,f.intl)("DISCARD",{})}):e.onBack()},onValidSubmit:function(){console.log({account:l.account}),e.onSave(l.account,l.hasUnsavedChanges())}}})),y=(0,g.useForm)(),C=(0,o.default)(y,2),S=C[0],x=C[1],k=(0,c.getAuthStore)();return(0,m.jsx)(b.Layout,{description:e.updating?e.updating.pbxUsername+" - "+e.updating.pbxHostname:(0,f.intl)("Create a new sign in account",{}),dropdown:e.footerLogout?[].concat((0,a.default)(k.isConnFailure()?[{label:(0,f.intl)("Reconnect to server",{}),onPress:k.resetFailureStateIncludeUcLoginFromAnotherPlace}]:[]),(0,a.default)("web"!==s.Platform.OS?[{label:(0,f.intl)("Open debug log",{}),onPress:d.debugStore.openLogFile}]:[]),[{label:(0,f.intl)("Logout",{}),onPress:k.signOut,danger:!0}]):[{label:(0,f.intl)("Reset form",{}),onPress:l.resetAllFields}],fabOnBack:e.footerLogout?void 0:l.onBackBtnPress,fabOnNext:e.footerLogout?void 0:x,menu:e.footerLogout?"settings":void 0,onBack:e.footerLogout?void 0:l.onBackBtnPress,subMenu:e.footerLogout?"account":void 0,title:e.title,children:(0,m.jsx)(S,{$:l,fields:[{isGroup:!0,label:"PBX"},{disabled:e.footerLogout,name:"pbxUsername",label:(0,f.intl)("USERNAME",{}),rule:"required"},{disabled:e.footerLogout,secureTextEntry:!0,name:"pbxPassword",label:(0,f.intl)("PASSWORD",{}),rule:"required"},{disabled:e.footerLogout,name:"pbxTenant",label:(0,f.intl)("TENANT",{})},{disabled:e.footerLogout,name:"pbxHostname",label:(0,f.intl)("HOSTNAME",{}),rule:"required|hostname"},{disabled:e.footerLogout,keyboardType:"numeric",name:"pbxPort",label:(0,f.intl)("PORT",{}),rule:"required|port"},{disabled:e.footerLogout,type:"RnPicker",name:"pbxPhoneIndex",label:(0,f.intl)("PHONE",{}),rule:"required",options:[1,2,3,4].map((function(e){return{key:""+e,label:(0,f.intl)("Phone {{$0}}",{$0:e})}}))},{disabled:e.footerLogout,type:"Switch",name:"pbxTurnEnabled",label:"TURN"},{disabled:e.footerLogout,type:"Switch",name:"pushNotificationEnabled",label:(0,f.intl)("PUSH NOTIFICATION",{}),hidden:r},{isGroup:!0,label:"UC",hasMargin:!0},{disabled:e.footerLogout,type:"Switch",name:"ucEnabled",label:"UC",onValueChange:function(e){l.set("account",(function(t){return t.ucEnabled=e,t}))}},{isGroup:!0,label:(0,f.intl)("PARKS ({{$0}})",{$0:null===(t=l.account.parks)||void 0===t?void 0:t.length}),hasMargin:!0}].concat((0,a.default)((null===(n=l.account.parks)||void 0===n?void 0:n.map((function(t,n){var r,a=null===(r=l.account.parkNames)||void 0===r?void 0:r[n];return{disabled:!0,name:"parks["+n+"]",type:"PARK",value:t+" "+(a?"- "+a:""),label:(0,f.intl)("PARK {{$0}}",{$0:n+1}),onRemoveBtnPress:e.footerLogout?null:function(){return l.onAddingParkRemove(n)}}})))||[]),(0,a.default)(e.footerLogout?[]:[{name:"parks[new]",label:(0,f.intl)("NEW PARK",{}),type:"PARK",value:l.addingPark,onValueChange:function(e){return l.set("addingPark",e)},onCreateBtnPress:l.onAddingParkSubmit}])),k:"account",onValidSubmit:l.onValidSubmit})})}));t.AccountCreateForm=y},,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.formatFileType=void 0;var r=n(2);t.formatFileType=function(e){var t,n=[];n="web"===r.Platform.OS?["MP4","WEBM","OGG","MOV"]:"ios"===r.Platform.OS?["MP4","M4A","MOV","3GP"]:["MP4","M4A","FMP4","WEBM","MKV","MPEG","FLV","MOV"];var a=(null===(t=e.split(".").pop())||void 0===t?void 0:t.toUpperCase())||"";return["PNG","JPG","JPEG","GIF"].includes(a)?"image":n.includes(a)?"video":"other"}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedSize=void 0;var a=r(n(86)),o=r(n(35)),i=n(1),l=n(2),s=n(81),u=n(3),c=l.StyleSheet.create({Getter:{opacity:0},GetterInner:{position:"absolute"},Inner:{flex:1,overflow:"hidden"}});t.AnimatedSize=function(e){var t=(0,i.useState)(0),n=(0,o.default)(t,2),r=n[0],a=n[1],l=r?f:d;return(0,u.jsx)(l,Object.assign({},e,{setSize:a,size:r}))};var d=function(e){var t=e.animateWidth,n=e.children,r=e.setSize;return(0,u.jsx)(l.View,{style:c.Getter,children:(0,u.jsx)(l.View,{onLayout:function(e){return r(e.nativeEvent.layout[t?"width":"height"])},style:c.GetterInner,children:n})})},f=function(e){var t=e.animateWidth,n=e.children,r=e.innerStyle,o=e.size,i=e.style,d=(0,s.useAnimationOnDidMount)((0,a.default)({},t?"width":"height",[0,o]));return(0,u.jsx)(l.Animated.View,{style:[i,d],children:(0,u.jsx)(l.View,{style:[c.Inner,r],children:n})})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setPageCallTransferDial=t.setPageCallTransferChooseUser=t.getTabs=void 0;var r,a,o=n(9),i=n(4),l=n(15),s=n(75),u=n(49);t.setPageCallTransferChooseUser=function(e){r=e};t.setPageCallTransferDial=function(e){a=e};t.getTabs=function(e){var t=[{key:"call_transfer",icon:null,subMenus:[{key:"list_user",label:(0,i.intl)("USER",{}),navFnKey:{PageCallTransferChooseUser:r}},{key:"external_number",label:(0,i.intl)("KEYPAD",{}),navFnKey:{PageCallTransferDial:a}}],defaultSubMenuKey:"list_user"}],n=t[0].subMenus.map((function(e){return Object.keys(e.navFnKey)[0]}));t.forEach((function(e,t){var r;e.subMenusMap=(0,u.arrToMap)(e.subMenus,(function(e){return e.key}),(function(e){return e})),e.defaultSubMenu=null===(r=e.subMenusMap)||void 0===r?void 0:r[e.defaultSubMenuKey],e.subMenus.forEach((function(e){e.navFn=(0,o.action)((function(){var t=Object.keys(e.navFnKey)[0],r=e.navFnKey[t],a=s.RnStacker.stacks.pop();a&&!n.includes(a.name)&&s.RnStacker.stacks.push(a),s.RnStacker.stacks.push({name:t,Component:r})}))}))}));var c=t.find((function(t){return t.key===e}));return c?c.subMenus:(l.RnAlert.error({unexpectedErr:new Error("Can not find sub menus for "+e)}),[])}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.BrekekeGradient=void 0;var a=n(2),o=r(n(706)),i=n(7),l=n(3),s=a.StyleSheet.create({BrekekeGradient:{height:"100%",minHeight:550}});t.BrekekeGradient=function(e){return(0,l.jsx)(o.default,Object.assign({},e,{colors:e.white?["white","white"]:[i.v.colors.primaryFn(.2),i.v.revBg],style:[s.BrekekeGradient,e.style]}))}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Avatar=void 0;var a=n(6),o=n(2),i=r(n(709)),l=n(16),s=n(11),u=n(8),c=n(7),d=n(3),f=o.StyleSheet.create({Avatar:{width:50,height:50},ImageOuter:{flex:1,borderRadius:50,overflow:"hidden"},Image:{flex:1},Status:{position:"absolute",top:27,left:30}}),p={online:c.v.colors.primary,idle:c.v.colors.warning,busy:c.v.colors.danger,offline:c.v.subColor},g=(0,a.observer)((function(e){var t,n=e.source,r=e.status,a=e.style,c="string"!==typeof n&&"string"===typeof(null===n||void 0===n?void 0:n.uri)&&(null===n||void 0===n?void 0:n.uri)||"web"===o.Platform.OS&&i.default||i.default,g="string"===typeof c?{uri:c}:c;return(0,d.jsxs)(o.View,{style:[f.Avatar,a],children:[(0,d.jsx)(o.View,{style:f.ImageOuter,children:(0,d.jsx)(u.RnImage,{source:g,style:f.Image})}),(null===(t=(0,s.getAuthStore)().getCurrentAccount())||void 0===t?void 0:t.ucEnabled)&&"string"===typeof r&&(0,d.jsx)(u.RnIcon,{color:p[r],path:l.mdiRecord,style:f.Status})]})}));t.Avatar=g},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPad=void 0;var r=n(2),a=n(16),o=n(8),i=n(7),l=n(3),s=r.StyleSheet.create({KeyPad_Number:{flexDirection:"row"},KeyPad_NumberTxt:{fontSize:i.v.fontSizeTitle,fontWeight:"600",textAlign:"center",paddingVertical:20},KeyPad_NumberBtn:{width:"33.3%"},KeyPad_Btn:{flexDirection:"row",justifyContent:"space-between",marginTop:25},KeyPad_Btn__call:{backgroundColor:i.v.colors.primary,width:64,borderRadius:40,paddingVertical:20},KeyPad_Btn__call_2:{backgroundColor:i.v.colors.primary,width:50,height:50,justifyContent:"center",borderRadius:25},KeyPad_view:{flex:1,flexDirection:"row",backgroundColor:i.v.colors.primaryFn(.5),alignItems:"center",justifyContent:"space-between",height:50,borderRadius:25}}),u=[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]];t.KeyPad=function(e){return(0,l.jsxs)(l.Fragment,{children:[u.map((function(t,n){return(0,l.jsx)(r.View,{style:s.KeyPad_Number,children:t.map((function(t){return(0,l.jsx)(o.RnTouchableOpacity,{onPress:function(){return e.onPressNumber(t)},style:s.KeyPad_NumberBtn,children:(0,l.jsx)(o.RnText,{style:s.KeyPad_NumberTxt,children:t})},t)}))},n)})),(0,l.jsxs)(r.View,{style:s.KeyPad_Btn,children:[(0,l.jsx)(o.RnTouchableOpacity,{onPress:e.showKeyboard,style:s.KeyPad_NumberBtn,children:(0,l.jsx)(o.RnIcon,{color:"web"===r.Platform.OS?"white":void 0,path:a.mdiKeyboard})}),(0,l.jsxs)(r.View,{style:e.callVoiceForward?s.KeyPad_view:void 0,children:[e.callVoiceForward&&(0,l.jsx)(o.RnTouchableOpacity,{onPress:e.callVoiceForward,style:[s.KeyPad_NumberBtn,s.KeyPad_Btn__call_2],children:(0,l.jsx)(o.RnIcon,{path:a.mdiPhoneForward})}),e.callVoice&&(0,l.jsx)(o.RnTouchableOpacity,{onPress:e.callVoice,style:[s.KeyPad_NumberBtn,e.callVoiceForward?s.KeyPad_Btn__call_2:s.KeyPad_Btn__call],children:(0,l.jsx)(o.RnIcon,{path:a.mdiPhone})})]}),(0,l.jsx)(o.RnTouchableOpacity,{onPress:function(){return e.onPressNumber("")},style:s.KeyPad_NumberBtn,children:(0,l.jsx)(o.RnIcon,{path:a.mdiBackspace})})]})]})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ShowNumber=void 0;var r=n(2),a=n(4),o=n(8),i=n(3),l=r.StyleSheet.create({ShowNumbers:{flexDirection:"row"},ShowNumbers_DisplayTxt:{fontSize:24,padding:15,width:"100%"},ShowNumbers_BtnCall:{position:"absolute",top:10,right:10,width:40,height:40,borderRadius:40}});t.ShowNumber=function(e){return(0,i.jsx)(r.View,{style:l.ShowNumbers,children:(0,i.jsx)(o.RnTextInput,{blurOnSubmit:!0,keyboardType:"default",multiline:!0,onChangeText:e.setTarget,onEndEditing:function(){r.Keyboard.dismiss()},onSelectionChange:e.selectionChange,placeholder:(0,a.intl)("Enter your number",{}),ref:e.refInput,style:l.ShowNumbers_DisplayTxt,value:e.value})})}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.hackyToggleSpeaker=t.Call=void 0;var a,o,i,l,s,u,c,d,f,p,g,h,b,v,m,y,C,S,x,k,P,w,A,T,I,j,_,R,O,B,M,U,L,F,D,V,N,E,H,z,W,G,K,X,Z=r(n(12)),J=r(n(13)),q=r(n(22)),Y=r(n(5)),$=r(n(20)),Q=(r(n(23)),n(9)),ee=n(2),te=r(n(63)),ne=r(n(63)),re=n(121),ae=n(50),oe=n(64),ie=n(26),le=n(62),se=n(46),ue=n(11),ce=n(19),de=n(26),fe=n(4),pe=n(10),ge=n(15),he=(a=function e(t){var n=this;(0,Y.default)(this,e),this.store=t,(0,q.default)(this,"earlyMedia",o,this),(0,q.default)(this,"withSDP",i,this),(0,q.default)(this,"withSDPControls",l,this),(0,q.default)(this,"sessionStatus",s,this),(0,q.default)(this,"id",u,this),(0,q.default)(this,"pnId",c,this),(0,q.default)(this,"partyNumber",d,this),(0,q.default)(this,"partyImageUrl",f,this),(0,q.default)(this,"partyImageSize",p,this),(0,q.default)(this,"talkingImageUrl",g,this),(0,q.default)(this,"partyName",h,this),(0,q.default)(this,"pbxTenant",b,this),(0,q.default)(this,"pbxRoomId",v,this),(0,q.default)(this,"pbxTalkerId",m,this),(0,q.default)(this,"pbxUsername",y,this),(0,q.default)(this,"isFrontCamera",C,this),(0,q.default)(this,"callConfig",S,this),this.getDisplayName=function(){return(0,ie.getPartyName)(n.partyNumber)||n.partyName||n.partyNumber||n.pbxTalkerId||n.id},this.createdAt=Date.now(),(0,q.default)(this,"incoming",x,this),(0,q.default)(this,"answered",k,this),(0,q.default)(this,"answeredAt",P,this),this.getDuration=function(){return n.answeredAt&&Date.now()-n.answeredAt},this.callkeepUuid="",this.callkeepAlreadyAnswered=!1,this.callkeepAlreadyRejected=!1,(0,q.default)(this,"answer",w,this),this.answerCallKeep=(0,J.default)(Z.default.mark((function e(){var t,r,a,o,i;return Z.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("web"!==ee.Platform.OS){e.next=2;break}return e.abrupt("return");case 2:if(r=function(){te.default.setCurrentCallActive(n.callkeepUuid),"android"===ee.Platform.OS&&te.default.setOnHold(n.callkeepUuid,!1),n.callkeepAlreadyAnswered=!0},a=function(){var e=(0,J.default)(Z.default.mark((function e(){return Z.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te.default.startCall(n.callkeepUuid,n.partyNumber,"Brekeke Phone"),e.next=3,(0,se.waitTimeout)();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){te.default.answerIncomingCall(n.callkeepUuid),r()},i=function(){te.default.reportConnectedOutgoingCallWithUUID(n.callkeepUuid),r()},!n.callkeepUuid){e.next=15;break}if(!n.incoming){e.next=10;break}return o(),e.abrupt("return");case 10:if("android"!==ee.Platform.OS){e.next=13;break}return e.next=13,a();case 13:return i(),e.abrupt("return");case 15:if(null===(t=(0,ue.getAuthStore)().getCurrentAccount())||void 0===t||!t.pushNotificationEnabled){e.next=17;break}return e.abrupt("return");case 17:return n.callkeepUuid=(0,re.v4)().toUpperCase(),e.next=20,a();case 20:i();case 21:case"end":return e.stop()}}),e)}))),this.isAboutToHangup=!1,this.hangupWithUnhold=(0,J.default)(Z.default.mark((function e(){return Z.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isAboutToHangup){e.next=2;break}return e.abrupt("return");case 2:if(n.isAboutToHangup=!0,!n.holding){e.next=8;break}return e.next=6,n.toggleHold().then((function(e){return!e&&console.error("hangupWithUnhold: failed to unhold, possible issue with pbx connection")}));case 6:return e.next=8,(0,se.waitTimeout)();case 8:oe.sip.hangupSession(n.id);case 9:case"end":return e.stop()}}),e)}))),(0,q.default)(this,"videoSessionId",A,this),(0,q.default)(this,"localVideoEnabled",T,this),(0,q.default)(this,"remoteVideoEnabled",I,this),this.toggleVideo=function(){var e,t,r=de.contactStore.getPbxUserById(n.partyNumber),a=null===r||void 0===r||null===(e=r.talkers)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.status;n.holding||"holding"===a||(n.localVideoEnabled?oe.sip.disableVideo(n.id):oe.sip.enableVideo(n.id))},(0,q.default)(this,"toggleSwitchCamera",j,this),(0,q.default)(this,"remoteVideoStreamObject",_,this),this.voiceStreamObject=null,(0,q.default)(this,"muted",R,this),(0,q.default)(this,"toggleMuted",O,this),(0,q.default)(this,"recording",B,this),(0,q.default)(this,"updateRecordingStatus",M,this),(0,q.default)(this,"toggleRecording",U,this),(0,q.default)(this,"onToggleRecordingFailure",L,this),this.toggleHoldWithCheck=function(){n.isAboutToHangup||n.toggleHold()},(0,q.default)(this,"holding",F,this),this.prevHoling=!1,(0,q.default)(this,"toggleHold",D,this),(0,q.default)(this,"onToggleHoldFailure",V,this),(0,q.default)(this,"transferring",N,this),this.prevTransferring="",this.transferBlind=function(e){return(0,pe.Nav)().goToPageCallRecents(),ae.pbx.transferTalkerBlind(n.pbxTenant,n.pbxTalkerId,e).catch(n.onTransferFailure)},(0,q.default)(this,"transferAttended",E,this),(0,q.default)(this,"onTransferFailure",H,this),(0,q.default)(this,"stopTransferring",z,this),(0,q.default)(this,"onStopTransferringFailure",W,this),(0,q.default)(this,"conferenceTransferring",G,this),(0,q.default)(this,"onConferenceTransferringFailure",K,this),(0,q.default)(this,"park",X,this),this.onParkFailure=function(e){ge.RnAlert.error({message:(0,fe.intlDebug)("Failed to park the call",{}),err:e})}},o=(0,$.default)(a.prototype,"earlyMedia",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=(0,$.default)(a.prototype,"withSDP",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=(0,$.default)(a.prototype,"withSDPControls",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,$.default)(a.prototype,"sessionStatus",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"dialing"}}),u=(0,$.default)(a.prototype,"id",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=(0,$.default)(a.prototype,"pnId",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=(0,$.default)(a.prototype,"partyNumber",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=(0,$.default)(a.prototype,"partyImageUrl",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=(0,$.default)(a.prototype,"partyImageSize",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=(0,$.default)(a.prototype,"talkingImageUrl",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=(0,$.default)(a.prototype,"partyName",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=(0,$.default)(a.prototype,"pbxTenant",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=(0,$.default)(a.prototype,"pbxRoomId",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=(0,$.default)(a.prototype,"pbxTalkerId",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=(0,$.default)(a.prototype,"pbxUsername",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=(0,$.default)(a.prototype,"isFrontCamera",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=(0,$.default)(a.prototype,"callConfig",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),x=(0,$.default)(a.prototype,"incoming",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=(0,$.default)(a.prototype,"answered",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=(0,$.default)(a.prototype,"answeredAt",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=(0,$.default)(a.prototype,"answer",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n,r){var a,o=null===t||void 0===t?void 0:t.ignoreNav;t&&delete t.ignoreNav,e.answered=!0,e.store.setCurrentCallId(e.id),e.store.calls.filter((function(t){return t.id!==e.id&&t.answered&&!t.holding})).forEach((function(e){return e.toggleHoldWithCheck()})),null===(a=oe.sip.phone)||void 0===a||a.answer(e.id,t,e.remoteVideoEnabled,n,r),o||(0,pe.Nav)().goToPageCallManage(),e.answerCallKeep()}}}),A=(0,$.default)(a.prototype,"videoSessionId",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=(0,$.default)(a.prototype,"localVideoEnabled",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=(0,$.default)(a.prototype,"remoteVideoEnabled",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=(0,$.default)(a.prototype,"toggleSwitchCamera",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isFrontCamera=!e.isFrontCamera,oe.sip.switchCamera(e.id,e.isFrontCamera),le.BrekekeUtils.setIsFrontCamera(e.callkeepUuid,e.isFrontCamera)}}}),_=(0,$.default)(a.prototype,"remoteVideoStreamObject",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=(0,$.default)(a.prototype,"muted",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=(0,$.default)(a.prototype,"toggleMuted",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.muted=!e.muted,e.callkeepUuid&&te.default.setMutedCall(e.callkeepUuid,e.muted),oe.sip.setMuted(e.muted,e.id)}}}),B=(0,$.default)(a.prototype,"recording",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=(0,$.default)(a.prototype,"updateRecordingStatus",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.recording=t,le.BrekekeUtils.setRecordingStatus(e.callkeepUuid,e.recording)}}}),U=(0,$.default)(a.prototype,"toggleRecording",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.recording?ae.pbx.stopRecordingTalker:ae.pbx.startRecordingTalker;return e.recording=!e.recording,t(e.pbxTenant,e.pbxTalkerId).then(e.onToggleRecordingFailure).catch(e.onToggleRecordingFailure)}}}),L=(0,$.default)(a.prototype,"onToggleRecordingFailure",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(!0!==t&&(e.recording=!e.recording,"boolean"!==typeof t)){var n=e.recording?(0,fe.intlDebug)("Failed to stop recording the call",{}):(0,fe.intlDebug)("Failed to start recording the call",{});ge.RnAlert.error({message:n,err:t})}}}}),F=(0,$.default)(a.prototype,"holding",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=(0,$.default)(a.prototype,"toggleHold",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.holding?ae.pbx.unholdTalker:ae.pbx.holdTalker;return e.holding=!e.holding,e.isAboutToHangup||e.holding||e.store.setCurrentCallId(e.id),e.isAboutToHangup||(e.callkeepUuid&&!e.holding&&("ios"===ee.Platform.OS&&be(),"android"===ee.Platform.OS&&te.default.setOnHold(e.callkeepUuid,!1)),le.BrekekeUtils.setOnHold(e.callkeepUuid,e.holding)),t(e.pbxTenant,e.pbxTalkerId).then(e.onToggleHoldFailure).catch(e.onToggleHoldFailure)}}}),V=(0,$.default)(a.prototype,"onToggleHoldFailure",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(!0===t)return!0;if(e.holding=!e.holding,e.callkeepUuid&&!e.holding&&"android"===ee.Platform.OS&&te.default.setOnHold(e.callkeepUuid,!1),le.BrekekeUtils.setOnHold(e.callkeepUuid,e.holding),"boolean"!==typeof t){var n=e.holding?(0,fe.intlDebug)("Failed to unhold the call",{}):(0,fe.intlDebug)("Failed to hold the call",{});return ge.RnAlert.error({message:n,err:t}),!0}return!1}}}),N=(0,$.default)(a.prototype,"transferring",[Q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=(0,$.default)(a.prototype,"transferAttended",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.transferring=t,e.prevHoling=e.holding,e.holding=!0,(0,pe.Nav)().backToPageCallManage(),e.prevHoling=e.holding,e.holding=!0,ae.pbx.transferTalkerAttended(e.pbxTenant,e.pbxTalkerId,t).catch(e.onTransferFailure)}}}),H=(0,$.default)(a.prototype,"onTransferFailure",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.transferring="",e.holding=e.prevHoling,ge.RnAlert.error({message:(0,fe.intlDebug)("Failed to transfer the call",{}),err:t})}}}),z=(0,$.default)(a.prototype,"stopTransferring",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.prevTransferring=e.transferring,e.transferring="",e.prevHoling=e.holding,e.holding=!1,ae.pbx.stopTalkerTransfer(e.pbxTenant,e.pbxTalkerId).catch(e.onStopTransferringFailure)}}}),W=(0,$.default)(a.prototype,"onStopTransferringFailure",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.transferring=e.prevTransferring,e.holding=e.prevHoling,ge.RnAlert.error({message:(0,fe.intlDebug)("Failed to stop the transfer",{}),err:t})}}}),G=(0,$.default)(a.prototype,"conferenceTransferring",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.prevTransferring=e.transferring,e.transferring="",e.prevHoling=e.holding,e.holding=!1,ae.pbx.joinTalkerTransfer(e.pbxTenant,e.pbxTalkerId).catch(e.onConferenceTransferringFailure)}}}),K=(0,$.default)(a.prototype,"onConferenceTransferringFailure",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.transferring=e.prevTransferring,e.holding=e.prevHoling,ge.RnAlert.error({message:(0,fe.intlDebug)("Failed to make conference for the transfer",{}),err:t})}}}),X=(0,$.default)(a.prototype,"park",[Q.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return ae.pbx.parkTalker(e.pbxTenant,e.pbxTalkerId,t).catch(e.onParkFailure)}}}),a);t.Call=he;var be=function(){var e=(0,J.default)(Z.default.mark((function e(){var t,n,r;return Z.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,ce.getCallStore)(),ne.default.setForceSpeakerphoneOn(!t.isLoudSpeakerEnabled),e.next=4,ae.pbx.getConfig();case 4:return n=e.sent,r=Number(null===n||void 0===n?void 0:n["webphone.hacky.speaker"])||500,console.log("webphone.hacky.speaker "+r+"ms"),e.next=9,(0,se.waitTimeout)(r);case 9:ne.default.setForceSpeakerphoneOn(t.isLoudSpeakerEnabled);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.hackyToggleSpeaker=be},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ContactSectionList=void 0;var r=n(9),a=n(6),o=n(1),i=n(2),l=n(16),s=n(11),u=n(19),c=n(37),d=n(10),f=n(129),p=n(65),g=n(33),h=n(88),b=n(51),v=n(721),m=n(125),y=n(70),C=n(43),S=n(7),x=n(3),k=i.StyleSheet.create({container:{marginTop:15},headerSectionList:{flexDirection:"row",justifyContent:"space-between",backgroundColor:S.v.borderBg,paddingHorizontal:5,alignItems:"center",paddingVertical:12,marginTop:15},leftSection:{flexDirection:"row",alignItems:"center"},editGroupIcon:{paddingHorizontal:10},containerDropdown:{position:"absolute",width:"100%",height:"100%",backgroundColor:"transparent"},disableMarginTop:{marginTop:0}}),P=(0,a.observer)((function(e){var t=(0,o.useRef)([]),n=(0,o.useRef)(0);(0,o.useEffect)((function(){return f.RnDropdown.setShouldUpdatePosition(!0),function(){t.current=[],n.current&&g.BackgroundTimer.clearTimeout(n.current)}}),[]),(0,o.useEffect)((function(){e.isEditMode&&f.RnDropdown.shouldUpdatePosition&&(f.RnDropdown.setShouldUpdatePosition(!1),a())}),[e.isEditMode,f.RnDropdown.shouldUpdatePosition]);var a=function(){n.current&&n.current&&(g.BackgroundTimer.clearTimeout(n.current),n.current=0),n.current=g.BackgroundTimer.setTimeout((function(){n.current=0;var e=[];t.current.forEach((function(n,r){n&&n.measure((function(n,a,o,l,s,u){e.push({top:"ios"===i.Platform.OS?u:u+l,right:20}),r===t.current.length-1&&(f.RnDropdown.setPositions(e),f.RnDropdown.setHeaderHeight(l))}))}))}),500)},l=f.RnDropdown.openedIndex,s=f.RnDropdown.positions,u=(0,r.toJS)(e.sectionListData);return(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)(i.SectionList,{sections:u,keyExtractor:function(e){return e.user_id},renderItem:function(t){var n=t.item,r=(t.index,t.section);return(0,x.jsx)(A,{sectionListData:u,item:n,title:r.title,isEditMode:null===e||void 0===e?void 0:e.isEditMode,isTransferCall:null===e||void 0===e?void 0:e.isTransferCall})},renderSectionHeader:function(n){var r=n.section,a=r.title,o=r.data;return(0,x.jsx)(T,{sectionHeaderRefs:t,sectionListData:u,isEditMode:e.isEditMode,title:a,data:o})}}),l>=0&&(0,x.jsx)(i.TouchableWithoutFeedback,{onPress:function(){return f.RnDropdown.close()},children:(0,x.jsx)(i.View,{style:k.containerDropdown,children:(0,x.jsx)(v.Dropdown,{position:s[l],items:e.ddItems})})})]})}));t.ContactSectionList=P;var w=function(e){var t=(0,h.filterTextOnly)(c.chatStore.getMessagesByThreadId(e));return t.length?t[t.length-1]:{}},A=(0,a.observer)((function(e){var t,n,r=e.sectionListData,a=e.item,o=e.title,c=e.isEditMode,g=e.isTransferCall,h=r.findIndex((function(e){return e.title===o})),v=f.RnDropdown.hiddenIndexes.some((function(e){return e===h})),m=(0,u.getCallStore)().getOngoingCall();return v?null:(0,x.jsx)(i.View,{onLayout:function(e){f.RnDropdown.setItemHeight(e.nativeEvent.layout.height)},children:c?(0,x.jsx)(C.RnTouchableOpacity,{onPress:function(){return p.userStore.selectUserId(a.user_id)},disabled:p.userStore.isSelectedAddAllUser,children:(0,x.jsx)(b.UserItem,{id:a.user_id,name:a.name||a.user_id,avatar:a.profile_image_url,disabled:p.userStore.isSelectedAddAllUser,isSelected:p.userStore.isSelectedAddAllUser||p.userStore.selectedUserIds[a.user_id],onSelect:function(){return p.userStore.selectUserId(a.user_id)},isSelection:!0})}):g?(0,x.jsx)(b.UserItem,{iconFuncs:[function(){return null===m||void 0===m?void 0:m.transferAttended(a.user_id)},function(){return null===m||void 0===m?void 0:m.transferBlind(a.user_id)}],icons:[l.mdiPhoneForward,l.mdiPhone],id:a.user_id,name:a.name,avatar:a.profile_image_url,status:a.status}):(0,x.jsx)(C.RnTouchableOpacity,{onPress:null!==(t=(0,s.getAuthStore)().getCurrentAccount())&&void 0!==t&&t.ucEnabled?function(){return(0,d.Nav)().goToPageChatDetail({buddy:a.user_id})}:void 0,children:(0,x.jsx)(b.UserItem,{iconFuncs:[function(){return(0,u.getCallStore)().startVideoCall(a.user_id)},function(){return(0,u.getCallStore)().startCall(a.user_id)}],icons:[l.mdiVideo,l.mdiPhone],lastMessage:null===(n=w(a.user_id))||void 0===n?void 0:n.text,id:a.user_id,name:a.name,avatar:a.profile_image_url,status:a.status})})},"ItemUser-"+a.user_id+"-"+h)})),T=(0,a.observer)((function(e){var t,n,r=e.sectionHeaderRefs,a=e.sectionListData,s=e.isEditMode,u=e.title,c=e.data,d=a.findIndex((function(e){return e.title===u})),g=f.RnDropdown.hiddenIndexes.some((function(e){return e===d})),h=p.userStore.getHeaderTitle(u,c,s),b=!(null!==(t=a[d-1])&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.length)||f.RnDropdown.hiddenIndexes.some((function(e){return e===d-1}));return(0,x.jsx)(C.RnTouchableOpacity,{onPress:function(){return f.RnDropdown.toggleSection(d,c.length)},children:(0,x.jsx)(i.View,{style:[k.headerSectionList,b&&k.disableMarginTop],ref:function(e){e&&s&&(r.current[d]=e)},children:(0,x.jsxs)(o.Fragment,{children:[(0,x.jsxs)(i.View,{style:k.leftSection,children:[(0,x.jsx)(i.View,{children:(0,x.jsx)(m.RnIcon,{path:g?l.mdiMenuRight:l.mdiMenuDown})}),(0,x.jsx)(y.RnText,{small:!0,children:h})]}),s&&(0,x.jsx)(C.RnTouchableOpacity,{style:k.editGroupIcon,onPress:function(){f.RnDropdown.hiddenIndexes.some((function(e){return e===d}))&&f.RnDropdown.toggleSection(d,c.length),f.RnDropdown.toggle(d)},children:(0,x.jsx)(m.RnIcon,{path:l.mdiMoreHoriz})})]})})})}))},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.css=t.PageContactEdit=void 0;var a,o=r(n(34)),i=r(n(5)),l=r(n(14)),s=r(n(18)),u=r(n(17)),c=n(1),d=n(2),f=n(30),p=n(746),g=n(4),h=n(10),b=n(65),v=n(129),m=n(6),y=n(40),C=n(15),S=n(222),x=n(747),k=n(43),P=n(125),w=n(16),A=n(70),T=n(33),I=n(11),j=n(32),_=n(3),R=d.StyleSheet.create({listHeaderSection:{paddingHorizontal:10},listTitleSection:{flexDirection:"row",justifyContent:"flex-end",alignItems:"center",marginVertical:10},rowGroupTitle:{flexDirection:"row",justifyContent:"space-between"},rowCapacity:{flexDirection:"row",alignItems:"center"},errorText:{color:"red"},loadingIcon:{marginTop:20}});t.css=R;var O=(0,m.observer)(a=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))).state={didMount:!1},e.componentDidMount=function(){var t;null!==(t=(0,I.getAuthStore)().getCurrentAccount())&&void 0!==t&&t.ucEnabled?b.userStore.loadUcBuddyList(!0):b.userStore.loadPbxBuddyList(!0),T.BackgroundTimer.setTimeout((function(){return e.setState({didMount:!0})}),300)},e.getDDOptions=function(t){var n,r,a,o;return[{title:(0,g.intl)("Add/Remove user",{}),onPress:function(){return e.onAddRemoveUser(t)},disabled:b.userStore.dataGroupAllUser.length-1===t},{title:(0,g.intl)("Check all",{}),onPress:function(n){var r;null===n||void 0===n||null===(r=n.stopPropagation)||void 0===r||r.call(n),e.onCheckAll(t)},disabled:b.userStore.isSelectedAddAllUser||!(null!==(n=b.userStore.dataGroupAllUser[t])&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.length)},{title:(0,g.intl)("Uncheck all",{}),onPress:function(n){var r;null===n||void 0===n||null===(r=n.stopPropagation)||void 0===r||r.call(n),e.onUncheckAll(t)},disabled:b.userStore.isSelectedAddAllUser||!(null!==(a=b.userStore.dataGroupAllUser[t])&&void 0!==a&&null!==(o=a.data)&&void 0!==o&&o.length)},{title:(0,g.intl)("Remove group",{}),onPress:function(){return e.onRemoveGroup(t)},disabled:b.userStore.dataGroupAllUser.length-1===t}]},e.onAddRemoveUser=function(t){v.RnDropdown.close(),(0,h.Nav)().goToPageContactGroupEdit({groupName:b.userStore.dataGroupAllUser[t].title,listItem:b.userStore.dataGroupAllUser[t].data.map((function(e){return e}))}),e.scrollToTopListContact()},e.onCheckAll=function(e){v.RnDropdown.close(),b.userStore.selectAllUserIdsByGroup(e)},e.onUncheckAll=function(e){v.RnDropdown.close(),b.userStore.unselectAllUserIdsByGroup(e)},e.onRemoveGroup=function(e){var t,n;v.RnDropdown.close(),v.RnDropdown.removeSection(e,null===(t=b.userStore.dataGroupAllUser[e])||void 0===t||null===(n=t.data)||void 0===n?void 0:n.length),b.userStore.removeGroup(e)},e.onSelectEditGroupingAndUserOrderOption=function(){v.RnDropdown.close(),b.userStore.isSelectEditGroupingAndUserOrder||v.RnDropdown.setShouldUpdatePosition(!0),b.userStore.toggleIsSelectEditGroupingAndUserOrder()},e.onAddGroup=function(){(0,h.Nav)().goToPageContactGroupCreate(),e.scrollToTopListContact()},e.onGoBack=function(){var e;null!==(e=(0,I.getAuthStore)().getCurrentAccount())&&void 0!==e&&e.ucEnabled&&b.userStore.loadUcBuddyList(),v.RnDropdown.close(),(0,h.Nav)().backToPageContactUsers()},e.setViewRef=function(t){e.view=t},e.scrollToTopListContact=function(){return T.BackgroundTimer.setTimeout((function(){var t;null===(t=e.view)||void 0===t||t.scrollTo({y:0,animated:!0})}),1e3)},e.saveUC=function(){var t=b.userStore.isSelectedAddAllUser,n=b.userStore.groups,r=b.userStore.dataListAllUser,a=b.userStore.selectedUserIds,i=[].concat((0,o.default)(n),(0,o.default)(r.filter((function(e){return a[e.user_id]}))));y.uc.saveProperties(!t,i).then(e.onSaveSuccess).catch(e.onSaveFailure)},e.savePBX=function(){var t=b.userStore.isSelectedAddAllUser,n=b.userStore.groups,r=b.userStore.dataListAllUser,a=b.userStore.selectedUserIds,i={screened:!t,users:[].concat((0,o.default)(n),(0,o.default)(r.filter((function(e){return a[e.user_id]}))))};(0,I.getAuthStore)().savePbxBuddyList(i),b.userStore.updateDisplayGroupList(),e.onGoBack()},e.save=function(){var t=b.userStore.isCapacityInvalid,n=b.userStore.type;t||("UcBuddy"===n?e.saveUC():e.savePBX())},e.onSaveSuccess=function(){j.accountStore.saveAccountsToLocalStorageDebounced(),b.userStore.updateDisplayGroupList(),e.onGoBack()},e.onSaveFailure=function(e){C.RnAlert.error({message:(0,g.intlDebug)("Failed to save user list",{}),err:e})},e}return(0,l.default)(n,[{key:"render",value:function(){var e=b.userStore.buddyMax,t=b.userStore.dataListAllUser,n=b.userStore.isSelectedAddAllUser,r=b.userStore.selectedUserIds,a=b.userStore.isDisableAddAllUserToTheList,o=b.userStore.isSelectEditGroupingAndUserOrder,i=b.userStore.isCapacityInvalid,l=b.userStore.dataGroupAllUser,s=b.userStore.buddyMode,u=v.RnDropdown.openedIndex;return(0,_.jsxs)(f.Layout,{fabOnBack:this.onGoBack,fabOnNext:this.save,fabOnNextText:(0,g.intl)("SAVE",{}),onBack:this.onGoBack,title:(0,g.intl)("Edit buddy list",{}),containerRef:this.setViewRef,children:[(0,_.jsx)(d.TouchableWithoutFeedback,{onPress:v.RnDropdown.close,children:(0,_.jsxs)(d.View,{style:R.listHeaderSection,children:[!a&&(0,_.jsx)(p.SelectionItem,{isSelected:n,onPress:b.userStore.toggleIsSelectedAddAllUser,title:(0,g.intl)("Add all user to the list",{})}),(0,_.jsxs)(d.View,{style:R.rowGroupTitle,children:[(0,_.jsx)(p.SelectionItem,{isSelected:o,onPress:this.onSelectEditGroupingAndUserOrderOption,title:2===s?(0,g.intl)("Edit grouping and user order",{}):(0,g.intl)("Display with grouping",{})}),o&&2===s&&(0,_.jsx)(k.RnTouchableOpacity,{onPress:this.onAddGroup,children:(0,_.jsx)(P.RnIcon,{path:w.mdiFolderPlus})})]}),(0,_.jsx)(d.View,{style:R.listTitleSection,children:(0,_.jsxs)(d.View,{style:R.rowCapacity,children:[(0,_.jsx)(A.RnText,{children:""+(0,g.intl)("Capacity",{})}),(0,_.jsx)(A.RnText,{style:i&&R.errorText,children:"    "+(n?t.length:Object.keys(r).length)}),(0,_.jsx)(A.RnText,{children:" / "+e})]})})]})}),this.state.didMount?o?(0,_.jsx)(S.ContactSectionList,{sectionListData:l,isEditMode:!0,ddItems:this.getDDOptions(u)}):(0,_.jsx)(x.ContactList,{data:t}):(0,_.jsx)(d.ActivityIndicator,{style:R.loadingIcon,size:"large"})]})}}]),n}(c.Component))||a;t.PageContactEdit=O},,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.authPBX=void 0;var a,o,i,l=r(n(12)),s=r(n(13)),u=r(n(22)),c=r(n(5)),d=r(n(20)),f=(r(n(23)),n(21)),p=n(9),g=n(50),h=n(46),b=n(11),v=new(a=function e(){var t=this;(0,c.default)(this,e),this.auth=function(){var e;t.authWithCheck(),null===(e=t.clearShouldAuthReaction)||void 0===e||e.call(t);var n=(0,b.getAuthStore)();t.clearShouldAuthReaction=(0,p.reaction)(n.pbxShouldAuth,t.authWithCheckDebounced)},(0,u.default)(this,"dispose",o,this),(0,u.default)(this,"authWithCheck",i,this),this.authWithCheckDebounced=(0,f.debounce)(this.authWithCheck,300)},o=(0,d.default)(a.prototype,"dispose",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;console.log("PBX PN debug: disconnect by AuthPBX.dispose"),null===(t=e.clearShouldAuthReaction)||void 0===t||t.call(e),e.clearShouldAuthReaction=void 0,g.pbx.disconnect(),(0,b.getAuthStore)().pbxState="stopped"}}}),i=(0,d.default)(a.prototype,"authWithCheck",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,s.default)(l.default.mark((function t(){var n;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(0,b.getAuthStore)()).pbxShouldAuth()){t.next=3;break}return t.abrupt("return");case 3:if(!(n.pbxTotalFailure>1)){t.next=9;break}return n.pbxState="waiting",t.next=7,(0,h.waitTimeout)(n.pbxTotalFailure<5?1e3*n.pbxTotalFailure:15e3);case 7:if("waiting"===n.pbxState){t.next=9;break}return t.abrupt("return");case 9:console.log("PBX PN debug: disconnect by AuthPBX.authWithCheck"),g.pbx.disconnect(),n.pbxState="connecting",g.pbx.connect(n.getCurrentAccount()).then((function(e){if(!e)throw new Error("Pbx login connection timed out")})).catch((0,p.action)((function(t){n.pbxState="failure",n.pbxTotalFailure+=1,console.error("Failed to connect to pbx:",t),e.authWithCheck()})));case 13:case"end":return t.stop()}}),t)})))}}),a);t.authPBX=v},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.authUC=void 0;var a,o,i,l,s,u,c=r(n(12)),d=r(n(13)),f=r(n(22)),p=r(n(5)),g=r(n(14)),h=r(n(20)),b=(r(n(23)),r(n(326))),v=n(21),m=n(9),y=n(50),C=n(40),S=n(46),x=n(11),k=n(37),P=n(26),w=n(4),A=n(15),T=b.default,I=new(a=function(){function e(){var t=this;(0,p.default)(this,e),(0,f.default)(this,"dispose",o,this),(0,f.default)(this,"authWithoutCatch",i,this),this.authWithCheck=(0,d.default)(c.default.mark((function e(){var n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=(0,x.getAuthStore)()).ucShouldAuth()){e.next=3;break}return e.abrupt("return");case 3:if(!(n.ucTotalFailure>1)){e.next=9;break}return n.ucState="waiting",e.next=7,(0,S.waitTimeout)(n.ucTotalFailure<5?1e3*n.ucTotalFailure:15e3);case 7:if("waiting"===n.ucState){e.next=9;break}return e.abrupt("return");case 9:t.authWithoutCatch().catch((0,m.action)((function(e){n.ucState="failure",n.ucTotalFailure+=1,console.error("Failed to connect to uc:",e),t.authWithCheck()})));case 10:case"end":return e.stop()}}),e)}))),this.authWithCheckDebounced=(0,v.debounce)(this.authWithCheck,300),(0,f.default)(this,"onConnectionStopped",l,this),(0,f.default)(this,"loadUsers",s,this),this.loadUnreadChats=function(){return C.uc.getUnreadChats().then(t.onLoadUnreadChatsSuccess).catch(t.onLoadUnreadChatsFailure)},(0,f.default)(this,"onLoadUnreadChatsSuccess",u,this),this.onLoadUnreadChatsFailure=function(e){A.RnAlert.error({message:(0,w.intlDebug)("Failed to load unread chat messages",{}),err:e})}}return(0,g.default)(e,[{key:"auth",value:function(){var e;this.authWithCheck(),C.uc.on("connection-stopped",this.onConnectionStopped),null===(e=this.clearShouldAuthReaction)||void 0===e||e.call(this);var t=(0,x.getAuthStore)();this.clearShouldAuthReaction=(0,m.reaction)(t.ucShouldAuth,this.authWithCheckDebounced)}}]),e}(),o=(0,h.default)(a.prototype,"dispose",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;C.uc.off("connection-stopped",e.onConnectionStopped),null===(t=e.clearShouldAuthReaction)||void 0===t||t.call(e),C.uc.disconnect(),(0,x.getAuthStore)().ucState="stopped"}}}),i=(0,h.default)(a.prototype,"authWithoutCatch",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,d.default)(c.default.mark((function t(){var n,r,a;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C.uc.disconnect(),(n=(0,x.getAuthStore)()).ucState="connecting",n.ucLoginFromAnotherPlace=!1,t.next=6,y.pbx.getConfig();case 6:if(r=t.sent){t.next=9;break}throw new Error("AuthUC.authWithoutCatch pbx.getConfig() undefined");case 9:if(a=n.getCurrentAccount()){t.next=12;break}return t.abrupt("return");case 12:return t.next=14,C.uc.connect(a,r["webphone.uc.host"]||a.pbxHostname+":"+a.pbxPort);case 14:e.loadUsers(),e.loadUnreadChats().then((0,m.action)((function(){n.ucState="success",n.ucTotalFailure=0})));case 16:case"end":return t.stop()}}),t)})))}}),l=(0,h.default)(a.prototype,"onConnectionStopped",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=(0,x.getAuthStore)();n.ucState="failure",n.ucTotalFailure+=1,n.ucLoginFromAnotherPlace=t.code===T.Errors.PLEONASTIC_LOGIN,e.authWithCheck()}}}),s=(0,h.default)(a.prototype,"loadUsers",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=C.uc.getUsers();P.contactStore.ucUsers=e}}}),u=(0,h.default)(a.prototype,"onLoadUnreadChatsSuccess",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){e.forEach((function(e){var t=e;k.chatStore.pushMessages(t.creator,[t],!0)}))}}}),a);t.authUC=I},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.useForm=void 0;var a=r(n(86)),o=n(21),i=n(6),l=n(1),s=n(2),u=r(n(307)),c=n(44),d=n(686),f=n(49),p=n(126),g=n(3),h=function(){};t.useForm=function(){var e=(0,p.useStore)((function(e){return{observable:{dirtyMap:{},errorMap:{},currentFocus:void 0},props:{},onFieldBlur:function(t){e.set("dirtyMap."+t,!0)},onFocus:function(t){e.set("currentFocus",t)},onFieldChange:function(t,n){var r,o=null===(r=e.props.fields.find((function(e){return e.name===t})))||void 0===r?void 0:r.rule,i=o?new u.default((0,a.default)({},t,n),(0,a.default)({},t,o)):null;e.set("errorMap."+t,(null===i||void 0===i?void 0:i.fails())&&i.errors.first(t))},submit:function(){var t=e.props,n=t.$,r=t.fields,a=t.k,i=t.onValidSubmit,l=(0,f.arrToMap)(r.filter((function(e){return e.rule&&!e.disabled&&!e.hidden})),(function(e){return e.name}),(function(e){return e.rule})),s=new u.default((0,o.get)(n,a),l);s.fails()?e.set("errorMap",(0,f.arrToMap)(Object.keys(l),(function(e){return e}),(function(e){return s.errors.first(e)}))):(e.set("errorMap",{}),i&&i()),e.set("dirtyMap",(0,f.arrToMap)(r,(function(e){return e.name})))},render:(0,i.observer)((function(t){e.props=Object.assign(e.props,t);var n=e.props,r=n.$,a=n.fields,i=n.k,u="web"===s.Platform.OS?"form":l.Fragment,f="web"===s.Platform.OS?{onSubmit:e.submit}:null;return(0,g.jsxs)(u,Object.assign({},f,{children:[a.map((function(t,n){return!t.hidden&&(0,g.jsx)(c.Field,Object.assign({},t,{error:!t.disabled&&e.dirtyMap[t.name]&&e.currentFocus!==t.name?e.errorMap[t.name]:void 0,onBlur:function(){return e.onFieldBlur(t.name)},onValueChange:(0,o.flow)([function(n){return e.onFieldChange(t.name,n),n},void 0===t.onValueChange?t.disabled?h:function(e){return r.set(i+"."+t.name,e)}:function(){return t.onValueChange.apply(t,arguments)}].filter((function(e){return e}))),onFocus:function(){return e.onFocus(t.name)},value:void 0===t.value?(0,o.get)(r,i+"."+t.name):t.value}),n)})),"phonebook"===i&&"phonebook"===e.currentFocus&&(0,g.jsx)(d.PhonebookAutoComplete,{value:(0,o.get)(r,i+".phonebook"),onPressItem:function(t){r.set(i+".phonebook",t.phonebook),e.onFieldChange("phonebook",t.phonebook)}})]}))}))}}));return[e.render,e.submit,e.onFieldChange]}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fcmApplicationId=t.bundleIdentifier=void 0;t.fcmApplicationId="22177122297";t.bundleIdentifier="com.brekeke.phonedev"},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.parsePalParams=t.parseCallParams=void 0;var a=r(n(35));t.parsePalParams=function(e){return o("webphone.pal.param.",e)};t.parseCallParams=function(e){return o("webphone.call.",e)};var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(t).filter((function(t){return(0,a.default)(t,1)[0].startsWith(e)})).reduce((function(t,n){var r=(0,a.default)(n,2),o=r[0],i=r[1];return t[o.replace(e,"")]=i,t}),{})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.webPromptPermission=void 0;var r=n(4),a=n(15),o=n(320),i=!1;t.webPromptPermission=function(){i||(i=!0,a.RnAlert.prompt({title:(0,r.intl)("Action Required",{}),message:(0,r.intl)("Web Phone needs your action to work well on browser. Press OK to continue",{}),confirmText:"OK",dismissText:!1,onConfirm:o.getAudioVideoPermission,onDismiss:o.getAudioVideoPermission}))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getAudioVideoPermission=void 0;var r=n(2),a=n(321);t.getAudioVideoPermission=function(){var e=function(e){return e.getTracks().forEach((function(e){return e.stop()}))},t=function(e){},n=window.navigator.getUserMedia({audio:!0,video:!0},e,t);null!==n&&void 0!==n&&n.then&&n.then(e).catch(t),"web"===r.Platform.OS&&(0,a.webPlayDing)()}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.webPlayDing=void 0;var a=r(n(12)),o=r(n(13)),i=r(n(688)),l=n(46),s=function(){var e=(0,o.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Audio).volume=.05,t.src=i.default,document.body.appendChild(t),t.play(),e.next=7,(0,l.waitTimeout)(3e3);case 7:document.body.removeChild(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.webPlayDing=s},function(e,t){var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.PnServiceId=t.PnCommand=void 0,t.PnCommand=n,function(e){e.set="set",e.remove="remove"}(n||(t.PnCommand=n={})),t.PnServiceId=r,function(e){e.lpc="4",e.apns="11",e.fcm="12",e.web="13"}(r||(t.PnServiceId=r={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FooterActions=void 0;var r=n(2),a=n(16),o=n(4),i=n(8),l=n(7),s=n(3),u=r.StyleSheet.create({Actions:{flex:1,flexDirection:"row",borderRadius:l.v.borderRadius,overflow:"hidden"},Btn:{borderRadius:0,width:"25%",paddingVertical:8},Btn__back:{backgroundColor:l.v.colors.dangerFn(.5)},Btn__more:{backgroundColor:l.v.hoverBg},Btn__next:{width:"50%",backgroundColor:l.v.colors.primary},Btn__15:{width:"15%"},Btn__33:{width:1/3*100+"%"},Btn__67:{width:2/3*100+"%"},Btn__100:{width:"100%"},Text:{flex:1,color:l.v.revColor,lineHeight:l.v.iconSize,textAlign:"center"}});t.FooterActions=function(e){var t=e.onBack,n=e.onBackIcon,c=e.onMore,d=e.onMoreIcon,f=e.onNext,p=e.onNextColor,g=e.onNextText;return(0,s.jsxs)(r.View,{style:u.Actions,children:[t&&(0,s.jsx)(i.RnTouchableOpacity,{onPress:t,style:[u.Btn,u.Btn__back,!c&&u.Btn__33],children:(0,s.jsx)(i.RnIcon,{color:l.v.colors.danger,path:n||a.mdiKeyboardBackspace})}),c&&(0,s.jsx)(i.RnTouchableOpacity,{onPress:c,style:[u.Btn,u.Btn__more,!t&&u.Btn__33],children:(0,s.jsx)(i.RnIcon,{path:d||a.mdiCached})}),(0,s.jsx)(i.RnTouchableOpacity,{onPress:f,style:[u.Btn,u.Btn__next,!(t&&c)&&u.Btn__67,!(t||c)&&u.Btn__100,!!p&&{backgroundColor:p}],children:(0,s.jsx)(i.RnText,{small:!0,style:u.Text,children:g||(0,o.intl)("SAVE",{})})})]})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.css=t.Navigation=void 0;var r=n(6),a=n(2),o=n(11),i=n(37),l=n(206),s=n(8),u=n(7),c=n(3),d=a.StyleSheet.create({Navigation:{flexDirection:"row",alignSelf:"stretch"},Btn:{flex:1,padding:4,alignItems:"center"},BtnBg:{paddingVertical:8,width:"100%"},BtnBg__active:{borderRadius:22,backgroundColor:u.v.colors.primaryFn(.5)},UnreadOuter:{position:"absolute",top:10,left:0,right:0,flex:1,alignItems:"center"},Unread:{left:15,width:20,height:15,borderRadius:u.v.borderRadius,paddingTop:3,backgroundColor:u.v.colors.danger,overflow:"hidden"},UnreadText:{fontSize:u.v.fontSizeSmall-2,lineHeight:u.v.fontSizeSmall-2}});t.css=d;var f=(0,r.observer)((function(e){var t=e.menu;return(0,c.jsx)(a.View,{style:d.Navigation,children:(0,l.menus)().map((function(e){var n,r=e.key===t,l=i.chatStore.unreadCount,u=i.chatStore.getNumberWebchatNoti(),f=l+u,p=(null===(n=(0,o.getAuthStore)().getCurrentAccount())||void 0===n?void 0:n.ucEnabled)&&!!f&&"contact"===e.key&&!r;return(0,c.jsxs)(s.RnTouchableOpacity,{onPress:r?void 0:e.navFn,style:d.Btn,children:[(0,c.jsx)(a.View,{style:[d.BtnBg,r&&d.BtnBg__active],children:(0,c.jsx)(s.RnIcon,{path:e.icon})}),p&&(0,c.jsx)(a.View,{style:d.UnreadOuter,children:(0,c.jsx)(a.View,{style:d.Unread,children:(0,c.jsx)(s.RnText,{style:d.UnreadText,bold:!0,white:!0,center:!0,children:l+u})})})]},e.key)}))})}));t.Navigation=f},,,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatDuration=void 0;var n=6e4,r=60*n;t.formatDuration=function(e){if(isNaN(e)||e<=0)return"00:00";var t=Math.floor(e/r);e%=r;var a=Math.floor(e/n);a<10&&(a="0"+a),e%=n;var o=Math.floor(e/1e3);return o<10&&(o="0"+o),(t?t+":":"")+a+":"+o}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.webShowNotification=void 0;var a=r(n(12)),o=r(n(13)),i=n(11),l=function(){var e=(0,o.default)(a.default.mark((function e(t,n){var r,o,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("false"!==(null===(r=(0,i.getAuthStore)().pbxConfig)||void 0===r?void 0:r["webphone.desktop.notification"])){e.next=2;break}return e.abrupt("return");case 2:o=window.Brekeke.WebNotification,l=o.showNotification({document:document,timeout:15e3,interval:15e3,title:"Brekeke Phone",renotify:!0,body:t,tag:n,icon:"https://apps.brekeke.com/favicon.ico",noisiness:1,onclick:function(e){window.focus()},onclose:function(e){o.closeNotification({notificationId:l})}});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.webShowNotification=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.trimDisplayName=t.CallBar=void 0;var r=n(6),a=n(2),o=n(16),i=n(19),l=n(4),s=n(10),u=n(107),c=n(128),d=n(8),f=n(7),p=n(3),g=a.StyleSheet.create({CallBar:{borderBottomWidth:1,borderColor:f.v.borderBg,backgroundColor:f.v.hoverBg},CallBar_Outer:{flexDirection:"row",padding:5,alignItems:"center"},CallBar_Icon:{flex:1},CallBar_Info:{flex:2},CallBar_BtnCall:{flex:5,flexDirection:"row",justifyContent:"flex-end"},Notify_Info_PartyName:{fontSize:15,fontWeight:"bold"}}),h=(0,r.observer)((function(){var e=(0,i.getCallStore)(),t=e.getOngoingCall();return e.inPageCallManage||!t||t.incoming&&!t.answered?null:(0,p.jsx)(a.View,{style:g.CallBar,children:(0,p.jsxs)(d.RnTouchableOpacity,{onPress:function(){return(0,s.Nav)().goToPageCallManage({isFromCallBar:!0})},style:g.CallBar_Outer,children:[(0,p.jsx)(a.View,{style:g.CallBar_Icon,children:(0,p.jsx)(d.RnIcon,{color:t.incoming?f.v.colors.primary:f.v.colors.warning,path:t.incoming?o.mdiPhoneInTalkOutline:o.mdiPhoneOutgoingOutline})}),(0,p.jsxs)(a.View,{style:g.CallBar_Info,children:[(0,p.jsx)(d.RnText,{style:g.Notify_Info_PartyName,children:b(t.getDisplayName())}),(0,p.jsx)(d.RnText,{children:t.answered?(0,p.jsx)(u.Duration,{children:t.answeredAt}):(0,l.intl)("Dialing...",{})})]}),(0,p.jsxs)(a.View,{style:g.CallBar_BtnCall,children:[!t.holding&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.ButtonIcon,{bdcolor:f.v.borderBg,color:f.v.colors.danger,onPress:t.hangupWithUnhold,path:o.mdiPhoneHangup}),t.answered&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.ButtonIcon,{bdcolor:f.v.borderBg,color:t.muted?f.v.colors.primary:f.v.color,onPress:function(){return t.toggleMuted()},path:t.muted?o.mdiMicrophoneOff:o.mdiMicrophone}),"web"!==a.Platform.OS&&(0,p.jsx)(c.ButtonIcon,{bdcolor:f.v.borderBg,color:(0,i.getCallStore)().isLoudSpeakerEnabled?f.v.colors.primary:f.v.color,onPress:(0,i.getCallStore)().toggleLoudSpeaker,path:(0,i.getCallStore)().isLoudSpeakerEnabled?o.mdiVolumeHigh:o.mdiVolumeMedium})]})]}),(0,p.jsx)(c.ButtonIcon,{bdcolor:f.v.borderBg,color:t.holding?f.v.colors.primary:f.v.color,onPress:t.toggleHoldWithCheck,path:t.holding?o.mdiPlay:o.mdiPause})]})]})})}));t.CallBar=h;var b=function(e){return(e=(e=e||"").replace(/\s+/," ").trim()).length>25?e.substring(0,25)+"...":e};t.trimDisplayName=b},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.trimHtml=void 0;t.trimHtml=function(e){return e.replace(/\/html\s+/,"").replace(/<([^>]+)>/gi,"").trim()}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnCheckBox=void 0;var a=r(n(54)),o=n(2),i=n(16),l=n(125),s=n(43),u=n(3),c=["isSelected","onPress","disabled","style"],d=o.StyleSheet.create({CheckBoxBtn:{height:22,width:22,borderWidth:2,borderRadius:2},CheckBox__selected:{backgroundColor:"#333",borderWidth:0}});t.RnCheckBox=function(e){var t=e.isSelected,n=e.onPress,r=e.disabled,o=e.style,f=(0,a.default)(e,c);return(0,u.jsx)(s.RnTouchableOpacity,Object.assign({},f,{onPress:n,style:[d.CheckBoxBtn,t&&d.CheckBox__selected,o],disabled:r,children:t&&(0,u.jsx)(l.RnIcon,{path:i.mdiCheck,color:"white"})}))}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageCallParks=void 0;var a,o=r(n(5)),i=r(n(14)),l=r(n(18)),s=r(n(17)),u=n(21),c=n(6),d=n(1),f=n(51),p=n(44),g=n(30),h=n(8),b=n(11),v=n(19),m=n(4),y=n(10),C=n(3),S=(0,c.observer)(a=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={selectedPark:""},e.selectPark=function(t){e.setState({selectedPark:t===e.state.selectedPark?"":t})},e.park=function(){var t,n=e.state.selectedPark;return e.props.callParks2?null===(t=(0,v.getCallStore)().getOngoingCall())||void 0===t?void 0:t.park(n):(0,v.getCallStore)().startCall(n||"")},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){if(this.props.callParks2){var e=(0,v.getCallStore)().getOngoingCall();this.prevId&&this.prevId!==(null===e||void 0===e?void 0:e.id)&&(0,y.Nav)().backToPageCallManage(),this.prevId=null===e||void 0===e?void 0:e.id}}},{key:"render",value:function(){var e,t=this,n=(0,b.getAuthStore)().getCurrentAccount();if(!n)return null;var r=(null===(e=n.parks)||void 0===e?void 0:e.map((function(e,t){var r;return{park:e,name:(null===(r=n.parkNames)||void 0===r?void 0:r[t])||""}})))||[],a=(0,u.uniqBy)(r,"park"),o=this.state.selectedPark,i=this.props.callParks2;(0,v.getCallStore)().getOngoingCall();var l=function(e){return i?!!(0,v.getCallStore)().parkNumbers[e]:!(0,v.getCallStore)().parkNumbers[e]};return(0,C.jsxs)(g.Layout,{description:(0,m.intl)("Your park numbers",{}),fabOnNext:o&&!l(o)?this.park:void 0,fabOnNextText:i?(0,m.intl)("START PARKING",{}):(0,m.intl)("CALL PARK",{}),menu:i?void 0:"call",onBack:i?(0,y.Nav)().backToPageCallManage:void 0,subMenu:i?void 0:"parks",title:(0,m.intl)("Park",{}),children:[!a.length&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(p.Field,{isGroup:!0,label:(0,m.intl)("PARK (0)",{})}),(0,C.jsx)(h.RnText,{padding:!0,children:(0,m.intl)("This account has no park number",{})})]}),a.map((function(e,n){return(0,C.jsx)(h.RnTouchableOpacity,{onPress:function(){l(e.park)||t.selectPark(e.park)},children:(0,C.jsx)(f.UserItem,{avatar:"",name:(0,m.intl)("Park",{})+" "+(n+1)+": "+e.name,parkNumber:""+e.park,selected:e.park===o,disabled:l(e.park)},n)},n)}))]})}}]),n}(d.Component))||a;t.PageCallParks=S},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.setupCallKeep=t.onBackPressed=void 0;var a=r(n(12)),o=r(n(35)),i=r(n(13)),l=n(2),s=r(n(63)),u=n(64),c=n(11),d=n(221),f=n(19),p=n(4),g=n(10),h=n(15),b=n(71),v=n(85),m=n(75),y=n(334),C=n(62),S=n(46),x=!1,k=function(){var e=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=2;break}return e.abrupt("return");case 2:if(e.t0="ios"===l.Platform.OS,!e.t0){e.next=15;break}return e.t3=Object,e.next=7,s.default.getCalls();case 7:if(e.t4=e.sent,e.t2=e.t3.keys.call(e.t3,e.t4).length,e.t2){e.next=11;break}e.t2=Object.keys((0,f.getCallStore)().callkeepMap).length;case 11:if(e.t1=e.t2,e.t1){e.next=14;break}e.t1="active"!==l.AppState.currentState;case 14:e.t0=e.t1;case 15:if(!e.t0){e.next=17;break}return e.abrupt("return");case 17:return x=!0,e.next=20,s.default.setup({ios:{appName:"Brekeke Phone",imageName:"callkit.png",supportsVideo:!1},android:{alertTitle:(0,p.intl)("Permissions required",{}),alertDescription:(0,p.intl)("Brekeke Phone needs to your permission to display calls",{}),cancelButton:(0,p.intl)("Cancel",{}),okButton:"OK",imageName:"phone_account_icon",additionalPermissions:[],foregroundService:{channelId:"com.brekeke.phone",channelName:(0,p.intl)("Background service for Brekeke Phone",{}),notificationTitle:(0,p.intl)("Brekeke Phone is running on background",{}),notificationIcon:"ic_launcher"},selfManaged:!0}}).then((function(){"android"===l.Platform.OS&&(s.default.registerPhoneAccount(),s.default.registerAndroidEvents(),s.default.setAvailable(!0),s.default.canMakeMultipleCalls(!0))})).catch((function(e){"active"===l.AppState.currentState?h.RnAlert.error({message:(0,p.intlDebug)("Can not get permission to show call notification",{}),err:e}):console.error("RNCallKeep.setup error:",e)}));case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.default)(a.default.mark((function e(){var t,n,r,p,h,b,v,x,P,A,T,I;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("web"!==l.Platform.OS){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k();case 4:if(t=function(e){e.forEach((function(e){var t;null===(t=A[e.name])||void 0===t||t.call(A,e.data)}))},A={RNCallKeepPerformAnswerCallAction:n=function(e){var t=e.callUUID.toUpperCase();"android"===l.Platform.OS?C.BrekekeUtils.onCallKeepAction(t,"answerCall"):(0,f.getCallStore)().onCallKeepAnswerCall(t)},RNCallKeepPerformEndCallAction:r=function(e){var t=e.callUUID.toUpperCase(),n=(0,f.getCallStore)();"android"===l.Platform.OS?C.BrekekeUtils.onCallKeepAction(t,"rejectCall"):(n.setCalleeRejected({callkeepUuid:t}),n.onCallKeepEndCall(t)),k()},RNCallKeepDidDisplayIncomingCall:p=function(e){var t=e.callUUID.toUpperCase();if("android"!==l.Platform.OS){var n=(0,y.parseNotificationData)(e.payload);console.log("SIP PN debug: callkeep.didDisplayIncomingCall has e.payload: "+!!e.payload+" found pnData: "+!!n),n?((0,c.getAuthStore)().signInByNotification(n),(0,f.getCallStore)().onCallKeepDidDisplayIncomingCall(t,n)):(console.log("SIP PN debug: call RNCallKeep.endCall: pnData not found"),s.default.endCall(t))}},RNCallKeepDidPerformSetMutedCallAction:h=function(e){var t=e.callUUID.toUpperCase(),n=(0,f.getCallStore)().calls.find((function(e){return e.callkeepUuid===t}));n&&n.muted!==e.muted&&n.toggleMuted()},RNCallKeepDidToggleHoldAction:b=function(e){var t=e.callUUID.toUpperCase(),n=(0,f.getCallStore)().calls.find((function(e){return e.callkeepUuid===t}));n&&n.holding!==e.hold&&n.toggleHoldWithCheck()},RNCallKeepDidPerformDTMFAction:v=function(e){var t=e.callUUID.toUpperCase(),n=(0,f.getCallStore)().calls.find((function(e){return e.callkeepUuid===t}));n&&u.sip.sendDTMF({sessionId:n.id,signal:e.digits.charAt(e.digits.length-1),talkerId:n.pbxTalkerId,tenant:n.pbxTenant})},RNCallKeepDidActivateAudioSession:x=function(){console.log("CallKeep debug: didActivateAudioSession"),(0,d.hackyToggleSpeaker)()},RNCallKeepDidDeactivateAudioSession:P=function(){console.log("CallKeep debug: didDeactivateAudioSession");var e=(0,f.getCallStore)();e.calls.filter((function(t){return t.answered&&!t.holding&&t.id!==e.ongoingCallId})).forEach((function(e){return e.toggleHoldWithCheck()}))}},Object.entries({didLoadWithEvents:t,answerCall:n,endCall:r,didDisplayIncomingCall:p,didPerformSetMutedCallAction:h,didToggleHoldCallAction:b,didPerformDTMFAction:v,didActivateAudioSession:x,didDeactivateAudioSession:P}).forEach((function(e){var t=(0,o.default)(e,2),n=t[0],r=t[1];s.default.addEventListener(n,r)})),"android"===l.Platform.OS){e.next=17;break}return e.abrupt("return");case 17:T=(0,g.Nav)(),(I=new l.NativeEventEmitter(C.BrekekeUtils)).addListener("answerCall",(function(e){(0,f.getCallStore)().onCallKeepAnswerCall(e.toUpperCase()),s.default.setOnHold(e,!1)})),I.addListener("rejectCall",(function(e){var t=(0,f.getCallStore)();e.startsWith("CalleeClickReject-")?(e=e.replace("CalleeClickReject-","").toUpperCase(),t.setCalleeRejected({callkeepUuid:e})):e=e.toUpperCase(),t.onCallKeepEndCall(e)})),I.addListener("transfer",function(){var e=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.waitTimeout)(100);case 2:T.goToPageCallTransferChooseUser();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I.addListener("showBackgroundCall",function(){var e=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.waitTimeout)(100);case 2:T.goToPageCallBackgrounds();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I.addListener("park",function(){var e=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.waitTimeout)(100);case 2:T.goToPageCallParks2();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I.addListener("video",(function(e){var t;null===(t=(0,f.getCallStore)().getOngoingCall())||void 0===t||t.toggleVideo()})),I.addListener("speaker",(function(e){(0,f.getCallStore)().toggleLoudSpeaker()})),I.addListener("mute",(function(e){var t;null===(t=(0,f.getCallStore)().getOngoingCall())||void 0===t||t.toggleMuted()})),I.addListener("record",(function(e){var t;null===(t=(0,f.getCallStore)().getOngoingCall())||void 0===t||t.toggleRecording()})),I.addListener("dtmf",function(){var e=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.waitTimeout)(100);case 2:T.goToPageCallDtmfKeypad();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I.addListener("hold",(function(e){var t;null===(t=(0,f.getCallStore)().getOngoingCall())||void 0===t||t.toggleHoldWithCheck()})),I.addListener("switchCamera",(function(e){var t;null===(t=(0,f.getCallStore)().getOngoingCall())||void 0===t||t.toggleSwitchCamera()})),I.addListener("onNotificationPress",function(){var e=(0,i.default)(a.default.mark((function e(t){var n,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(r=JSON.parse(t),o=(0,y.parseNotificationData)(r)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,(0,y.signInByLocalNotification)(o);case 8:null!==(n=r.id)&&void 0!==n&&n.startsWith("missedcall")?T.goToPageCallRecents():T.goToPageChatRecents();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I.addListener("onBackPressed",w),I.addListener("onIncomingCallActivityBackPressed",(function(){m.RnStacker.stacks.length?m.RnStacker.stacks=[m.RnStacker.stacks[0]]:T.goToPageIndex(),(0,f.getCallStore)().inPageCallManage=void 0})),I.addListener("debug",(function(e){return console.log("Android debug: "+e)}));case 35:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.setupCallKeep=P;var w=function(){if(b.RnKeyboard.isKeyboardShowing)return l.Keyboard.dismiss(),!0;if(h.RnAlert.alerts.length)return h.RnAlert.dismiss(),!0;if(v.RnPicker.currentRnPicker)return v.RnPicker.dismiss(),!0;var e=(0,f.getCallStore)();return e.inPageCallManage?(e.inPageCallManage=void 0,!0):m.RnStacker.stacks.length>1?(m.RnStacker.stacks.pop(),!0):(C.BrekekeUtils.backToBackground(),!0)};t.onBackPressed=w},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.toXPN=t.signInByLocalNotification=t.parseNotificationData=t.parse=void 0;var a=r(n(12)),o=r(n(13)),i=r(n(35)),l=r(n(103)),s=n(21),u=n(2),c=n(64),d=n(32),f=n(11),p=n(19),g=n(37),h=n(10),b=n(62),v=n(87),m=n(46),y=["title","threadId","isGroupChat","alert","body","message","from","image","image_size","displayname","to","tenant","host","pbxHostname","pbxPort","my_custom_data","is_local_notification","phone.id","auth","sip.wss.port","webphone.dtmf.send.pal","webphone.turn.server","webphone.turn.username","webphone.turn.credential","autoanswer","pn-id","callkeepUuid","callkeepAt","time"];y.forEach((function(e){y.push("x_"+e)}));var C=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return!!e})).map((function(e){if("string"===typeof e&&"{"===e.charAt(0))try{return JSON.parse(e)}catch(t){}return e})).reduce((function(e,t){return t&&"object"===typeof t?(y.forEach((function(n){var r=t[n];!(n in e)&&r&&(e[n]=r)})),e):e}),{});return r.image&&(0,p.getCallStore)().updateCallAvatar(r.image,r.image_size),r},S=function(e){var t;if("android"===u.Platform.OS&&(t=C(e,(0,s.get)(e,"fcm"),(0,s.get)(e,"alert"),(0,s.get)(e,"alert.custom_notification"),(0,s.get)(e,"data"),(0,s.get)(e,"data.alert"),(0,s.get)(e,"data.custom_notification"),(0,s.get)(e,"custom_notification"))),"ios"===u.Platform.OS&&(t=C(e,(0,s.get)(e,"custom_notification"),(0,s.get)(e,"aps"),(0,s.get)(e,"aps.alert"),(0,s.get)(e,"aps.custom_notification"),(0,s.get)(e,"data"),(0,s.get)(e,"data.custom_notification"),(0,s.get)(e,"_data"),(0,s.get)(e,"_data.custom_notification"),(0,s.get)(e,"_alert"),(0,s.get)(e,"_alert.custom_notification"))),t){var n=t;Object.entries(t).forEach((function(e){var t=(0,i.default)(e,2),r=t[0],a=t[1];if(r.startsWith("x_")&&!x(a)){var o=r.substr(2);n[o]=a}})),t.id=(0,s.get)(t,"pn-id"),t.pbxHostname=t.pbxHostname||(0,s.get)(t,"host");var r=(0,s.get)(t,"phone.id"),a=(0,s.get)(t,"auth"),o=(0,s.get)(t,"sip.wss.port"),l=(0,s.get)(t,"webphone.dtmf.send.pal"),c=(0,s.get)(t,"webphone.turn.server"),d=(0,s.get)(t,"webphone.turn.username"),f=(0,s.get)(t,"webphone.turn.credential"),p=(0,v.toBoolean)((0,s.get)(t,"autoanswer"));if(t.sipPn={phoneId:r,sipAuth:a,sipAuthAt:Date.now(),sipWssPort:o,dtmfSendPal:l,turnServer:c,turnUsername:d,turnCredential:f,autoAnswer:p},t.body||(t.body=t.message||t.title||t.alert),t.body){var g=/from\s+(.+)\s+to\s+(\S+)/i,h=g.exec(t.body)||g.exec(t.title)||g.exec(t.message)||g.exec(t.alert);return t.from||(t.from=(null===h||void 0===h?void 0:h[1])||""),t.to||(t.to=(null===h||void 0===h?void 0:h[2])||""),t.displayName=(0,s.get)(t,"displayname")||t.from,t.isCall=!!t.id||!!t.sipPn.sipAuth,t.time=Number(t.time)||0,t}}};t.parseNotificationData=S;var x=function(e){return null===e||void 0===e},k={},P=function(){var e=(0,o.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.accountStore.findByPn(t);case 2:n=e.sent,(r=(0,f.getAuthStore)()).signedInId===(null===n||void 0===n?void 0:n.id)&&r.resetFailureState(),null!==n&&void 0!==n&&n.id&&!r.signedInId&&r.signIn(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.signInByLocalNotification=P;var w=function(){var e=(0,o.default)(a.default.mark((function e(t){var n,r,o,i,s,d,v,y,C,x,w=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=w.length>1&&void 0!==w[1]&&w[1],t){e.next=3;break}return e.abrupt("return");case 3:if(r=S(t)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,(0,c.checkAndRemovePnTokenViaSip)(r);case 8:if(o=e.sent,"android"!==u.Platform.OS){e.next=15;break}if(i=r.id||(0,l.default)(t),!k[i]){e.next=14;break}return console.log("SIP PN debug: PushNotification-parse: already processed k="+i),e.abrupt("return");case 14:k[i]=!0;case 15:if(n=Boolean(n||t.my_custom_data||t.is_local_notification||r.my_custom_data||r.is_local_notification),s=t.id,d=(0,h.Nav)(),o){e.next=21;break}e.next=48;break;case 21:if(null===s||void 0===s||!s.startsWith("missedcall")){e.next=26;break}d.customPageIndex=d.goToPageCallRecents,(0,m.waitTimeout)().then((0,h.Nav)().goToPageCallRecents),e.next=48;break;case 26:if(!n){e.next=48;break}return e.next=29,P(r);case 29:if(r.threadId){e.next=36;break}return d.customPageIndex=d.goToPageChatRecents,e.next=33,(0,m.waitTimeout)();case 33:d.goToPageChatRecents(),e.next=46;break;case 36:if(!r.isGroupChat){e.next=42;break}return e.next=39,(0,m.waitTimeout)();case 39:g.chatStore.handleMoveToChatGroupDetail(r.threadId),e.next=46;break;case 42:return d.customPageIndex=d.goToPageChatDetail,e.next=45,(0,m.waitTimeout)();case 45:d.goToPageChatDetail({buddy:r.threadId});case 46:return console.log("SIP PN debug: PushNotification-parse: local notification"),e.abrupt("return");case 48:if(v=(0,f.getAuthStore)(),y=(0,p.getCallStore)(),r.isCall){e.next=58;break}if(console.log("SIP PN debug: PushNotification-parse: n.isCall=false"),o){e.next=55;break}return console.log("checkAndRemovePnTokenViaSip debug: do not show pn account not exist"),e.abrupt("return");case 55:if("active"!==u.AppState.currentState||(null===(C=v.getCurrentAccount())||void 0===C?void 0:C.pbxUsername)!==r.to){e.next=57;break}return e.abrupt("return");case 57:return e.abrupt("return",r);case 58:if(r.callkeepAt&&console.log("SIP PN debug: PN received on android java code at "+r.callkeepAt),console.log("SIP PN debug: call signInByNotification"),v.signInByNotification(r),r.callkeepUuid||console.log("SIP PN debug: PushNotification-parse got pnId="+r.id+" without callkeepUuid"),y.calls.filter((function(e){return e.pnId===r.id&&!e.callkeepUuid})).forEach((function(e){Object.assign(e,{callkeepUuid:r.callkeepUuid})})),"android"!==u.Platform.OS){e.next=70;break}return y.showIncomingCallUi({callUUID:r.callkeepUuid,pnData:r}),e.next=67,b.BrekekeUtils.getIncomingCallPendingUserAction(r.callkeepUuid);case 67:x=e.sent,console.log("SIP PN debug: getPendingUserAction="+x),"answerCall"===x?y.onCallKeepAnswerCall(r.callkeepUuid):"rejectCall"===x&&y.onCallKeepEndCall(r.callkeepUuid);case 70:return e.next=72,(0,m.waitTimeout)(1e4);case 72:return e.abrupt("return");case 73:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.parse=w;t.toXPN=function(e){return Object.entries(e).reduce((function(e,t){var n=(0,i.default)(t,2),r=n[0],a=n[1];return e["x_"+r]=a,e}),{})}},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageList=void 0;var r=n(21),a=n(6),o=n(2),i=n(26),l=n(218),s=n(108),u=n(726),c=n(8),d=n(7),f=n(3),p=n(1),g=o.StyleSheet.create({DateGroup:{marginTop:20},DateGroup__first:{marginTop:0},Date:{alignSelf:"center",backgroundColor:"white",paddingHorizontal:10},Border:{position:"absolute",top:d.v.lineHeight/2,left:2,right:2,height:1,backgroundColor:d.v.hoverBg},TimeGroup:{flexDirection:"row",marginTop:10,paddingLeft:10},TimeGroup__first:{marginTop:0,paddingLeft:10},Time:{paddingHorizontal:4,color:d.v.subColor,fontSize:d.v.fontSizeSmall},Creator:{flexDirection:"row",flexWrap:"nowrap",paddingLeft:10},Right:{flexDirection:"column"}}),h=(0,a.observer)((function(e){var t=e.acceptFile,n=e.loadMore,a=e.rejectFile,d=e.resolveChat,h=e.list;return Array.isArray(h)||(h=[]),h=(0,r.uniqBy)(h,"id"),h=(0,r.sortBy)(h,"created"),(0,f.jsx)(f.Fragment,{children:(0,s.groupByTimestamp)(h).map((function(e,r){var s=e.date,h=e.groupByTime;return(0,f.jsxs)(o.View,{style:[g.DateGroup,!r&&g.DateGroup__first],children:[(0,f.jsx)(o.View,{style:g.Border}),(0,f.jsx)(c.RnText,{style:g.Date,children:s}),h.map((function(e,r){var s,h,b=e.messages,v=e.time,m=null===(s=b[0])||void 0===s?void 0:s.id,y=d(m),C=null===y||void 0===y?void 0:y.creatorName,S=null===(h=i.contactStore.getUcUserById(y.creatorId))||void 0===h?void 0:h.status;return(0,f.jsxs)(o.View,{style:[g.TimeGroup,!r&&g.TimeGroup__first],children:[(0,f.jsx)(l.Avatar,{source:{uri:y.creatorAvatar},status:S}),(0,f.jsxs)(o.View,{style:g.Right,children:[(0,f.jsxs)(o.View,{style:g.Creator,children:[(0,f.jsx)(c.RnText,{bold:!0,singleLine:!0,children:C}),(0,f.jsx)(c.RnText,{style:g.Time,children:v})]}),(0,f.jsx)(o.View,{children:b.map((function(e){return(0,p.createElement)(u.Message,Object.assign({},d(e.id),{acceptFile:t,key:e.id,loadMore:n,rejectFile:a}))}))})]})]},""+v+m)}))]},s)}))})}));t.MessageList=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ChatInput=void 0;var r=n(2),a=n(16),o=n(8),i=n(7),l=n(3),s=r.StyleSheet.create({ChatInput:{flex:1,flexDirection:"row"},Btn:{width:50,paddingVertical:8},Btn__file:{backgroundColor:i.v.hoverBg,borderRightWidth:1,borderColor:i.v.borderBg,borderTopWidth:1,borderBottomWidth:1},Btn__emoji:{backgroundColor:i.v.hoverBg,borderRightWidth:1,borderColor:i.v.borderBg,borderTopWidth:1,borderBottomWidth:1},Btn__send:{backgroundColor:i.v.colors.primary,paddingLeft:8},Input:{flex:1,paddingVertical:8,paddingHorizontal:12,borderTopWidth:1,borderBottomWidth:1,borderColor:i.v.borderBg}});t.ChatInput=function(e){var t=e.onEmojiTurnOn,n=e.onSelectionChange,i=e.onTextChange,u=e.onTextSubmit,c=e.openFileRnPicker,d=e.text;return(0,l.jsxs)(r.View,{style:s.ChatInput,children:[(0,l.jsx)(o.RnTouchableOpacity,{onPress:c,style:[s.Btn,s.Btn__file],children:(0,l.jsx)(o.RnIcon,{path:a.mdiPaperclip,size:20})}),(0,l.jsx)(o.RnTouchableOpacity,{onPress:t,style:[s.Btn,s.Btn__emoji],children:(0,l.jsx)(o.RnIcon,{color:"gray",path:a.mdiEmoticon})}),(0,l.jsx)(o.RnTextInput,{blurOnSubmit:!1,onChangeText:i,onSelectionChange:n,onSubmitEditing:u,style:s.Input,value:d}),(0,l.jsx)(o.RnTouchableOpacity,{onPress:u,style:[s.Btn,s.Btn__send],children:(0,l.jsx)(o.RnIcon,{color:"white",path:a.mdiSend})})]})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.pickFileNativeOptions=t.pickFile=t.onPickFileNativeError=void 0;var r=n(16),a=n(4),o=n(15);t.pickFileNativeOptions=function(){return[{key:0,label:(0,a.intl)("Take a new photo",{}),icon:r.mdiDotsHorizontal},{key:1,label:(0,a.intl)("Take a new video",{}),icon:r.mdiDotsHorizontal},{key:2,label:(0,a.intl)("Select from photo library",{}),icon:r.mdiDotsHorizontal},{key:3,label:(0,a.intl)("More...",{}),icon:r.mdiDotsHorizontal}]};t.onPickFileNativeError=function(e){o.RnAlert.error({message:(0,a.intlDebug)("Failed to pick file from system",{}),err:e})};t.pickFile=function(e){var t=document.createElement("input");t.type="file",t.onchange=function(){var n;e(null===(n=t.files)||void 0===n?void 0:n[0])},t.click()}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.ContactsCreateForm=void 0;var a=r(n(35)),o=r(n(34)),i=r(n(86)),l=r(n(103)),s=n(21),u=n(6),c=n(2),d=n(26),f=n(4),p=n(80),g=n(15),h=n(316),b=n(126),v=n(30),m=n(70),y=n(43),C=n(7),S=n(3),x=c.StyleSheet.create({stylePreviewName:{marginHorizontal:20},styleAddItem:{marginVertical:10,marginHorizontal:15},labelAddItem:{color:C.v.subColor,fontWeight:C.v.fontWeight}}),k=(0,u.observer)((function(e){var t,n,r,u,c,k,P,w={id:"phonebook",name:"phonebook",label:(0,f.intl)("PHONEBOOK",{}),rule:"required",isFocus:!1,maxLength:100},A=(null===(t=e.updatingPhonebook)||void 0===t||null===(n=t.info)||void 0===n?void 0:n.$lang)||p.intlStore.locale,T=null===(r=e.updatingPhonebook)||void 0===r?void 0:r.shared,I=Object.assign({phonebook:(null===(u=e.updatingPhonebook)||void 0===u?void 0:u.phonebook)||"",$lang:A},function(e){var t,n={};return null===(t=d.contactStore.getManageItems(e))||void 0===t||t.filter((function(e){return null===e||void 0===e?void 0:e.onscreen})).forEach((function(e){Object.assign(n,(0,i.default)({},e.name,""))})),n}(A),(0,s.cloneDeep)(null===(c=e.updatingPhonebook)||void 0===c?void 0:c.info)),j=function(){if(e.updatingPhonebook){var t,n,r,a=null===(t=Object.keys(I))||void 0===t?void 0:t.map((function(e){if("phonebook"===e)return w;var t=d.contactStore.getManageItems(A).find((function(t){return t.id===e}));return t||{id:e,name:e,label:e,keyboardType:"default",maxLength:50}}));return(null===a||void 0===a||null===(n=a.filter((function(e){return"$lang"!==e.label||"$lang"!==e.id})))||void 0===n||null===(r=n.filter((function(e){return"get"!==e.id})))||void 0===r?void 0:r.map((function(e){return Object.assign({},e,{disabled:T})})))||[]}var i,l,s=null===(i=d.contactStore.getManageItems(A))||void 0===i?void 0:i.filter((function(e){return null===e||void 0===e?void 0:e.onscreen}));return(null===(l=[w].concat((0,o.default)(s)))||void 0===l?void 0:l.filter((function(e){return"$lang"!==e.label||"$lang"!==e.id})))||[]},_=(0,b.useStore)((function(){return{observable:{phonebook:Object.assign({},I),fields:j()},hasUnsavedChanges:function(){return!((0,l.default)(_.phonebook)===(0,l.default)(I))},onBackBtnPress:function(){_.hasUnsavedChanges()?g.RnAlert.prompt({title:(0,f.intl)("Discard Changes",{}),message:(0,f.intl)("Do you want to discard all unsaved changes and go back?",{}),onConfirm:e.onBack,confirmText:(0,f.intl)("DISCARD",{})}):e.onBack()},onValidSubmit:function(){e.onSave(_.phonebook,_.hasUnsavedChanges())}}})),R=(0,h.useForm)(),O=(0,a.default)(R,2),B=O[0],M=O[1],U=function(e){if(e.replace("$",""),d.contactStore.dismissPicker(),!!!_.fields.find((function(t){return t.label===e||t.id===e}))){var t=d.contactStore.getManageItems(A).find((function(t){return t.label===e||t.id===e}));if(t)return _.fields.push(t),void(_.phonebook=Object.assign({},_.phonebook,(0,i.default)({},t.id,"")));var n={label:e,name:e,id:e,keyboardType:"default",maxLength:50};_.fields.push(n),_.phonebook=Object.assign({},_.phonebook,(0,i.default)({},n.id,""))}},L=null===(k=d.contactStore.getManagerContact(null===(P=_.phonebook)||void 0===P?void 0:P.$lang))||void 0===k?void 0:k.toDisplayName(_.phonebook);return(0,S.jsxs)(v.Layout,{fabOnBack:_.onBackBtnPress,fabOnNext:T?void 0:M,onBack:_.onBackBtnPress,title:e.title,children:[!T&&(0,S.jsx)(m.RnText,{title:!0,style:[x.stylePreviewName,{color:L?"black":C.v.colors.greyTextChat}],children:L||(0,f.intl)("<Unnamed>",{})}),(0,S.jsx)(B,{$:_,fields:_.fields,k:"phonebook",onValidSubmit:_.onValidSubmit}),!T&&(0,S.jsx)(y.RnTouchableOpacity,{style:x.styleAddItem,onPress:function(){d.contactStore.openPicker({onSelect:U,listOption:d.contactStore.getManageItems(A).filter((function(e){return!(null!==e&&void 0!==e&&e.onscreen)}))})},children:(0,S.jsx)(m.RnText,{small:!0,style:x.labelAddItem,children:">>"+(0,f.intl)("Add item",{})})})]})}));t.ContactsCreateForm=k},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.updatePhoneIndex=void 0;var a=r(n(12)),o=r(n(86)),i=r(n(13)),l=n(11),s=n(4),u=n(10),c=n(15),d=n(50),f=function(){var e=(0,i.default)(a.default.mark((function e(){var t,n,r,f,p,g,h,b,v,m,y,C=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=C.length>0&&void 0!==C[0]?C[0]:(0,l.getAuthStore)().getCurrentAccount(),n=C.length>1&&void 0!==C[1]?C[1]:d.pbx,t){e.next=4;break}return e.abrupt("return",null);case 4:return r=parseInt(t.pbxPhoneIndex)||4,e.next=7,n.getPbxPropertiesForCurrentUser(t.pbxTenant,t.pbxUsername);case 7:if(f=e.sent){e.next=11;break}return console.error("updatePhoneIndex.setExtensionProperties: extProps undefined"),e.abrupt("return",null);case 11:if(p=f.phones[r-1],g="Web Phone"===p.type,h=t.pbxTenant,b=t.pbxUsername,v=h+"_"+b+"_phone"+r+"_webphone",m=p.id===v,y=function(){var e=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.client){e.next=3;break}return console.error("updatePhoneIndex.setExtensionProperties: api.client undefined"),e.abrupt("return");case 3:return e.next=5,n.client.call_pal("setExtensionProperties",{tenant:h,extension:b,properties:(0,o.default)({pnumber:f.phones.map((function(e){return e.id})).join(",")},"p"+r+"_ptype",p.type)});case 5:t===(0,l.getAuthStore)().getCurrentAccount()&&((0,l.getAuthStore)().userExtensionProperties=f);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!g||!m){e.next=20;break}e.next=34;break;case 20:if(!g||m){e.next=26;break}return p.id=v,e.next=24,y();case 24:case 31:e.next=34;break;case 26:if(g||m){e.next=33;break}return p.id=v,p.type="Web Phone",e.next=31,y();case 33:return e.abrupt("return",new Promise((function(e){c.RnAlert.prompt({title:(0,s.intl)("Warning",{}),message:(0,s.intl)("This phone index is already in use. Do you want to continue?",{}),onConfirm:function(){p.type="Web Phone",y().then((function(){e(p)})).catch((function(t){c.RnAlert.error({message:(0,s.intlDebug)("Failed to set extension properties",{}),err:t}),e(null)}))},onDismiss:function(){(0,u.Nav)().goToPageAccountSignIn(),e(null)}})})));case 34:return e.abrupt("return",p);case 35:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.updatePhoneIndex=f},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnAppState=void 0;var a,o,i,l=r(n(22)),s=r(n(5)),u=r(n(20)),c=(r(n(23)),n(9)),d=n(2),f=new(a=function e(){var t=this;(0,s.default)(this,e),(0,l.default)(this,"foregroundOnce",o,this),(0,l.default)(this,"currentState",i,this),d.AppState.addEventListener("change",(0,c.action)((function(e){t.currentState=e,t.foregroundOnce=t.foregroundOnce||"active"===e})))},o=(0,u.default)(a.prototype,"foregroundOnce",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"active"===d.AppState.currentState}}),i=(0,u.default)(a.prototype,"currentState",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.AppState.currentState}}),a);t.RnAppState=f},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;var a=n(21),o=r(n(343)),i=r(n(345));t.parse=function(e){if(!e)return null;"string"===typeof e&&(e=new i.default(e,!0));var t=Object.assign(o.default.parse(e.hash.replace(/^[^?]*\?*/,"")),e.query||o.default.parse((0,a.get)(e,"search").replace(/^\?*/,"")));if(t.url){var n=new i.default(t.url);n.hostname&&(t.host=n.hostname),n.port?t.port=n.port:/^ws:/.test(t.url)?t.port="80":t.port="443"}return t.host||(t.host=e.hostname),t.port||(t.port=""+e.port),t}},,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PushNotification=void 0;var a=r(n(12)),o=r(n(13)),i=function(e){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/[+/]/g,"-")},l={register:function(){var e=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(window.Notification&&"granted"!==window.Notification.permission){e.next=4;break}return e.abrupt("return");case 4:window.Notification.requestPermission();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getToken:function(){var e=(0,o.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.ready;case 2:return t=e.sent,e.next=5,t.pushManager.getSubscription();case 5:if(e.t0=e.sent,e.t0){e.next=10;break}return e.next=9,t.pushManager.subscribe({userVisibleOnly:!0});case 9:e.t0=e.sent;case 10:return n=e.t0,e.abrupt("return",{endpoint:n.endpoint,p256dh:i(n.getKey("p256dh")),auth:i(n.getKey("auth"))});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),resetBadgeNumber:function(){}};t.PushNotification=l},,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.IncomingItemWithTimer=t.DidMountTimer=t.CallNotify=void 0;var a,o,i,l=r(n(22)),s=r(n(5)),u=r(n(14)),c=r(n(53)),d=r(n(18)),f=r(n(17)),p=r(n(20)),g=(r(n(23)),n(9)),h=n(6),b=n(1),v=n(2),m=n(16),y=n(11),C=n(19),S=n(4),x=n(10),k=n(33),P=n(128),w=n(350),A=n(8),T=n(7),I=n(3),j=v.StyleSheet.create({Notify:{flexDirection:"row",alignItems:"center",borderBottomWidth:1,borderColor:T.v.borderBg,backgroundColor:T.v.hoverBg},Notify_Info:{flex:1,paddingLeft:12,paddingVertical:5},Notify_Btn_reject:{borderColor:T.v.colors.danger},Notify_Btn_accept:{borderColor:T.v.colors.primary}}),_=(0,h.observer)((o=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).didMountTimer=0,(0,l.default)(e,"didMount",i,(0,c.default)(e)),e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.didMountTimer=k.BackgroundTimer.setTimeout((0,g.action)((function(){e.didMountTimer=0,e.didMount=!0})),1e3)}},{key:"componentWillUnmount",value:function(){this.didMountTimer&&k.BackgroundTimer.clearTimeout(this.didMountTimer)}},{key:"render",value:function(){return this.didMount?this.props.children:null}}]),n}(b.Component),i=(0,p.default)(o.prototype,"didMount",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=o))||a;t.DidMountTimer=_;var R=(0,h.observer)((function(){var e;Object.keys((0,C.getCallStore)().callkeepMap),(0,C.getCallStore)().calls.map((function(e){return e.callkeepUuid}));var t=(0,C.getCallStore)().getCallInNotify();if((0,C.getCallStore)().inPageCallManage||!t)return null;var n=(0,C.getCallStore)().callkeepMap[t.callkeepUuid],r=null!==n&&void 0!==n&&n.hasAction||"web"===v.Platform.OS||null===(e=(0,y.getAuthStore)().getCurrentAccount())||void 0===e||!e.pushNotificationEnabled?b.Fragment:_,a=(0,y.getAuthStore)().pbxConfig,o=t.incoming&&"false"===(null===a||void 0===a?void 0:a["webphone.call.hangup"]),i=(0,C.getCallStore)().calls.filter((function(e){return e.incoming&&!e.answered&&e.id!==t.id})).length;return(0,I.jsxs)(r,{children:[(0,C.getCallStore)().shouldRingInNotify(t.callkeepUuid)&&(0,I.jsx)(w.IncomingItem,{}),(0,I.jsxs)(A.RnTouchableOpacity,{style:j.Notify,onPress:function(){return(0,x.Nav)().goToPageCallManage()},children:[(0,I.jsxs)(v.View,{style:j.Notify_Info,children:[(0,I.jsx)(A.RnText,{bold:!0,children:t.getDisplayName()}),(0,I.jsxs)(A.RnText,{children:[(0,S.intl)("Incoming Call",{}),i>0?" ("+(0,S.intl)("{{$0}} in background",{$0:i})+")":""]})]}),!o&&(0,I.jsx)(P.ButtonIcon,{bdcolor:T.v.colors.danger,color:T.v.colors.danger,onPress:t.hangupWithUnhold,path:m.mdiClose,size:20,style:j.Notify_Btn_reject}),(0,I.jsx)(P.ButtonIcon,{bdcolor:T.v.colors.primary,color:T.v.colors.primary,onPress:function(){return t.answer()},path:m.mdiCheck,size:20,style:j.Notify_Btn_accept})]})]})}));t.CallNotify=R;t.IncomingItemWithTimer=function(){return(0,I.jsx)(_,{children:(0,I.jsx)(w.IncomingItem,{})})}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.OutgoingItemWithSDP=t.OutgoingItem=t.IncomingItem=t.AnsweredItem=void 0;var a=r(n(5)),o=r(n(14)),i=r(n(18)),l=r(n(17)),s=n(1),u=r(n(793)),c=r(n(794)),d=n(3);t.IncomingItem=function(){return(0,d.jsx)("audio",{autoPlay:!0,loop:!0,src:c.default,muted:!1})};t.OutgoingItem=function(){return(0,d.jsx)("audio",{autoPlay:!0,loop:!0,src:u.default,muted:!1})};var f=function(e){(0,i.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,a.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).audioRef=(0,s.createRef)(),e}return(0,o.default)(n,[{key:"componentDidMount",value:function(){this.audioRef.current&&this.props.earlyMedia&&this.props.earlyMedia!==this.audioRef.current.srcObject&&(this.audioRef.current.srcObject=this.props.earlyMedia,this.audioRef.current.play())}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return(0,d.jsx)("audio",{autoPlay:!0,ref:this.audioRef,muted:!1})}}]),n}(s.Component);t.OutgoingItemWithSDP=f;var p=function(e){(0,i.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,a.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).audioRef=(0,s.createRef)(),e}return(0,o.default)(n,[{key:"componentDidMount",value:function(){this.audioRef.current&&this.props.voiceStreamObject&&this.props.voiceStreamObject!==this.audioRef.current.srcObject&&(this.audioRef.current.srcObject=this.props.voiceStreamObject,this.audioRef.current.play())}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return(0,d.jsx)("audio",{autoPlay:!0,ref:this.audioRef,muted:!1})}}]),n}(s.Component);t.AnsweredItem=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPlayer=void 0;var r=n(6),a=n(2),o=n(3),i=a.StyleSheet.create({loading:{flex:1,width:"100%",height:"100%",padding:50}}),l=(0,r.observer)((function(e){return e.sourceObject?(0,o.jsx)("video",{ref:function(t){t&&(t.srcObject=e.sourceObject)},style:{width:"100%",height:"100%",objectFit:"cover"},autoPlay:!0}):(0,o.jsx)(a.ActivityIndicator,{style:i.loading})}));t.VideoPlayer=l},function(e,t,n){n(353),n(518),n(522),n(627),n(628),n(635),n(762),n(765),n(774),n(776),n(777);var r=n(2),a=n(778),o=n(809);r.AppRegistry.registerComponent("BrekekePhone",(function(){return a.App}));var i=function(e){r.AppRegistry.runApplication("BrekekePhone",{rootTag:e})};window._BrekekePhoneWebRoot&&i(window._BrekekePhoneWebRoot),(0,o.exposeEmbedApi)(i)},function(e,t,n){"web"===n(2).Platform.OS&&(window._BrekekePhoneWebRoot=document.getElementById("__brekeke_phone_web_root"),"boolean"!==typeof window._BrekekePhoneCaptureConsole&&(window._BrekekePhoneCaptureConsole=!!window._BrekekePhoneWebRoot)),window.Brekeke||(window.Brekeke={}),window.Brekeke.Phone||(window.Brekeke.Phone={})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(0),a=r(n(35)),o=r(n(34)),i=r(n(260)),l=r(n(77)),s=n(2),u=n(519),c=n(150),d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return e?e.message?e.message:"object"===typeof e?i.default.stringify(e):""+e:""+e})),a=r.shift()||"";if("web"===s.Platform.OS){for(var l={},d=/%\w/g,f=0,p=null;null!==(p=d.exec(a));)"%c"===p[0]&&(l[f]=!0),f++;a=a.replace(/%c/g,""),r=r.filter((function(e,t){return!l[t]}))}var g=u.format.apply(void 0,[a].concat((0,o.default)(r))).replace(/\s+/g," ").trim();if((g=(g=(g=g.replace(/((\s+@\s+)|( : \w+@index)|(\W\w*@http)).+/,"")).replace(/ : Error at \w+\.log \(http.+/,"")).replace(/^.+\[(trial|debug|log|info|warn|error)\]\s*/,"")).indexOf("JsSIP:Transport reconnection attempt")>=0&&c.sipErrorEmitter.emit("error",null),!(g.indexOf("`new NativeEventEmitter()` was called")>=0))return g};!function(){if("web"!==s.Platform.OS||window._BrekekePhoneCaptureConsole){var e=["debug","log","info","warn","error"].reduce((function(e,t){var n=console[t].bind(console);return e[t]="web"===s.Platform.OS?function(){var e=d.apply(void 0,arguments);e&&n((0,l.default)().format("YYYY/MM/DD HH:mm:ss.SSS")+" "+e)}:function(){var e,n=d.apply(void 0,arguments);n&&(null===(e=window.debugStore)||void 0===e||e.captureConsoleOutput(t,n))},e}),{});Object.entries(e).forEach((function(e){var t=(0,a.default)(e,2),n=t[0],r=t[1];Object.defineProperty(console,n,{get:function(){return r},set:function(){}})})),console.info("captureConsoleOutput: console output is being captured!")}}()},,,,function(e,t,n){var r=n(0);n(523),n(524);var a=r(n(120));function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(n(2));i.ViewPropTypes=i.ViewPropTypes||{},i.Text.propTypes=i.Text.propTypes||{style:a.default.any},window.navigator.getUserMedia=window.navigator.getUserMedia||window.navigator.mediaDevices.getUserMedia||navigator.mozGetUserMedia},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t._=void 0;var n=Object.assign(window,{__DEV__:!1});t._=n},function(e,t,n){var r=n(0);n(525),n(526);var a=r(n(595)),o=r(n(623));window.JsSIP=window.JsSIP||a.default,window.CryptoJS=window.CryptoJS||{MD5:o.default}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(9);(0,r.configure)({enforceActions:"never",computedRequiresReaction:!1,observableRequiresReaction:!1,reactionRequiresObservable:!1,disableErrorBoundaries:!1}),(0,r.onReactionError)((function(e){console.error("onReactionError:",e)}))},function(e,t,n){var r=n(0),a=r(n(307)),o=r(n(102));a.default.setMessages("en",Object.assign({},o.default,{required:"This field is required"})),a.default.useLang("en"),a.default.register("hostname",(function(e){return"string"===typeof e&&!(/[^\w-.]/.test(e)||/^[-.]/.test(e)||/[-.]$/.test(e)||/\.{2,}/.test(e)||e.length>255)}),"Invalid host name"),a.default.register("port",(function(e){return"string"===typeof e&&!(/\D/.test(e)||/^0/.test(e)||parseInt(e)>65535)}),"Invalid port")},,,,function(e,t,n){var r={"./ar":159,"./ar.js":159,"./az":160,"./az.js":160,"./be":161,"./be.js":161,"./bg":162,"./bg.js":162,"./bs":163,"./bs.js":163,"./ca":164,"./ca.js":164,"./cs":165,"./cs.js":165,"./cy":166,"./cy.js":166,"./da":167,"./da.js":167,"./de":168,"./de.js":168,"./el":169,"./el.js":169,"./en":102,"./en.js":102,"./es":170,"./es.js":170,"./et":171,"./et.js":171,"./eu":172,"./eu.js":172,"./fa":173,"./fa.js":173,"./fi":174,"./fi.js":174,"./fr":175,"./fr.js":175,"./hr":176,"./hr.js":176,"./hu":177,"./hu.js":177,"./id":178,"./id.js":178,"./it":179,"./it.js":179,"./ja":180,"./ja.js":180,"./ka":181,"./ka.js":181,"./ko":182,"./ko.js":182,"./lt":183,"./lt.js":183,"./lv":184,"./lv.js":184,"./mk":185,"./mk.js":185,"./mn":186,"./mn.js":186,"./ms":187,"./ms.js":187,"./nb_NO":188,"./nb_NO.js":188,"./nl":189,"./nl.js":189,"./pl":190,"./pl.js":190,"./pt":191,"./pt.js":191,"./pt_BR":192,"./pt_BR.js":192,"./ro":193,"./ro.js":193,"./ru":194,"./ru.js":194,"./se":195,"./se.js":195,"./sl":196,"./sl.js":196,"./sq":197,"./sq.js":197,"./sr":198,"./sr.js":198,"./sv":199,"./sv.js":199,"./tr":200,"./tr.js":200,"./ua":201,"./ua.js":201,"./uk":202,"./uk.js":202,"./vi":203,"./vi.js":203,"./zh":204,"./zh.js":204,"./zh_TW":205,"./zh_TW.js":205};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=632},,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Nav2=void 0;var a=r(n(5)),o=n(206),i=n(684),l=n(704),s=n(707),u=n(708),c=n(710),d=n(715),f=n(332),p=n(716),g=n(717),h=n(720),b=n(723),v=n(724),m=n(741),y=n(742),C=n(743),S=n(744),x=n(223),k=n(748),P=n(749),w=n(750),A=n(751),T=n(753),I=n(754),j=n(755),_=n(756),R=n(758),O=n(759),B=n(62),M=n(11),U=n(19),L=n(10),F=n(75),D=function e(){var t=this;(0,a.default)(this,e),this.goToPageAccountSignIn=F.RnStacker.createGoTo({PageAccountSignIn:l.PageAccountSignIn},!0),this.backToPageAccountSignIn=F.RnStacker.createBackTo({PageAccountSignIn:l.PageAccountSignIn},!0),this.goToPageContactPhonebook=F.RnStacker.createGoTo({PageContactPhonebook:w.PageContactPhonebook},!0),this.backToPageContactPhonebook=F.RnStacker.createBackTo({PageContactPhonebook:w.PageContactPhonebook},!0),this.goToPageContactUsers=F.RnStacker.createGoTo({PageContactUsers:A.PageContactUsers},!0),this.backToPageContactUsers=F.RnStacker.createBackTo({PageContactUsers:A.PageContactUsers},!0),this.goToPageChatRecents=F.RnStacker.createGoTo({PageChatRecents:S.PageChatRecents},!0),this.backToPageChatRecents=F.RnStacker.createBackTo({PageChatRecents:S.PageChatRecents},!0),this.goToPageWebChat=F.RnStacker.createGoTo({PageWebChat:O.PageWebChat},!0),this.backToPageWebChat=F.RnStacker.createBackTo({PageWebChat:O.PageWebChat},!0),this.goToPageCallKeypad=F.RnStacker.createGoTo({PageCallKeypad:d.PageCallKeypad},!0),this.backToPageCallKeypad=F.RnStacker.createBackTo({PageCallKeypad:d.PageCallKeypad},!0),this.goToPageCallRecents=F.RnStacker.createGoTo({PageCallRecents:g.PageCallRecents},!0),this.backToPageCallRecents=F.RnStacker.createBackTo({PageCallRecents:g.PageCallRecents},!0),this.goToPageCallParks=F.RnStacker.createGoTo({PageCallParks:f.PageCallParks},!0),this.backToPageCallParks=F.RnStacker.createBackTo({PageCallParks:f.PageCallParks},!0),this.goToPageSettingsOther=F.RnStacker.createGoTo({PageSettingsOther:R.PageSettingsOther},!0),this.backToPageSettingsOther=F.RnStacker.createBackTo({PageSettingsOther:R.PageSettingsOther},!0),this.goToPageSettingsCurrentAccount=F.RnStacker.createGoTo({PageSettingsCurrentAccount:j.PageSettingsCurrentAccount},!0),this.backToPageSettingsCurrentAccount=F.RnStacker.createBackTo({PageSettingsCurrentAccount:j.PageSettingsCurrentAccount},!0),this.goToPageAccountCreate=F.RnStacker.createGoTo({PageAccountCreate:i.PageAccountCreate}),this.backToPageAccountCreate=F.RnStacker.createBackTo({PageAccountCreate:i.PageAccountCreate}),this.goToPageAccountUpdate=F.RnStacker.createGoTo({PageAccountUpdate:s.PageAccountUpdate}),this.backToPageAccountUpdate=F.RnStacker.createBackTo({PageAccountUpdate:s.PageAccountUpdate}),this.goToPagePhonebookCreate=F.RnStacker.createGoTo({PagePhonebookCreate:T.PagePhonebookCreate}),this.backToPagePhonebookCreate=F.RnStacker.createBackTo({PagePhonebookCreate:T.PagePhonebookCreate}),this.goToPagePhonebookUpdate=F.RnStacker.createGoTo({PagePhonebookUpdate:I.PagePhonebookUpdate}),this.backToPagePhonebookUpdate=F.RnStacker.createBackTo({PagePhonebookUpdate:I.PagePhonebookUpdate}),this.goToPageCallManage=function(e){var t=(0,U.getCallStore)(),n=t.getOngoingCall(),r=null===n||void 0===n?void 0:n.callkeepUuid;null!==e&&void 0!==e&&e.isOutgoingCall||!r||n.transferring||B.BrekekeUtils.onPageCallManage(r),t.inPageCallManage={isFromCallBar:null===e||void 0===e?void 0:e.isFromCallBar}},this.backToPageCallManage=function(e){var t=(0,U.getCallStore)(),n=t.getOngoingCall(),r=null===n||void 0===n?void 0:n.callkeepUuid;r&&!n.transferring&&B.BrekekeUtils.onPageCallManage(r),t.inPageCallManage={isFromCallBar:null===e||void 0===e?void 0:e.isFromCallBar},F.RnStacker.stacks.length>1&&F.RnStacker.dismiss()},this.goToPageCallBackgrounds=F.RnStacker.createGoTo({PageCallBackgrounds:u.PageCallBackgrounds}),this.backToPageCallBackgrounds=F.RnStacker.createBackTo({PageCallBackgrounds:u.PageCallBackgrounds}),this.goToPageCallTransferChooseUser=F.RnStacker.createGoTo({PageCallTransferChooseUser:h.PageCallTransferChooseUser}),this.backToPageCallTransferChooseUser=F.RnStacker.createBackTo({PageCallTransferChooseUser:h.PageCallTransferChooseUser}),this.goToPageCallTransferDial=F.RnStacker.createGoTo({PageCallTransferDial:b.PageCallTransferDial}),this.backToPageCallTransferDial=F.RnStacker.createBackTo({PageCallTransferDial:b.PageCallTransferDial}),this.goToPageCallParks2=F.RnStacker.createGoTo({PageCallParks2:p.PageCallParks2}),this.backToPageCallParks2=F.RnStacker.createBackTo({PageCallParks2:p.PageCallParks2}),this.goToPageCallDtmfKeypad=F.RnStacker.createGoTo({PageCallDtmfKeypad:c.PageCallDtmfKeypad}),this.backToPageCallDtmfKeypad=F.RnStacker.createBackTo({PageCallDtmfKeypad:c.PageCallDtmfKeypad}),this.goToPageChatDetail=F.RnStacker.createGoTo({PageChatDetail:v.PageChatDetail}),this.backToPageChatDetail=F.RnStacker.createBackTo({PageChatDetail:v.PageChatDetail}),this.goToPageChatGroupCreate=F.RnStacker.createGoTo({PageChatGroupCreate:m.PageChatGroupCreate}),this.backToPageChatGroupCreate=F.RnStacker.createBackTo({PageChatGroupCreate:m.PageChatGroupCreate}),this.goToPageChatGroupInvite=F.RnStacker.createGoTo({PageChatGroupInvite:C.PageChatGroupInvite}),this.backToPageChatGroupInvite=F.RnStacker.createBackTo({PageChatGroupInvite:C.PageChatGroupInvite}),this.goToPageChatGroupDetail=F.RnStacker.createGoTo({PageChatGroupDetail:y.PageChatGroupDetail}),this.backToPageChatGroupDetail=F.RnStacker.createBackTo({PageChatGroupDetail:y.PageChatGroupDetail}),this.goToPageSettingsDebug=F.RnStacker.createGoTo({PageSettingsDebug:_.PageSettingsDebug}),this.backToPageSettingsDebug=F.RnStacker.createBackTo({PageSettingsDebug:_.PageSettingsDebug}),this.goToPageContactEdit=F.RnStacker.createGoTo({PageContactEdit:x.PageContactEdit}),this.backToPageContactEdit=F.RnStacker.createBackTo({PageContactEdit:x.PageContactEdit},!0),this.goToPageContactGroupCreate=F.RnStacker.createGoTo({PageContactGroupCreate:k.PageContactGroupCreate}),this.goToPageContactGroupEdit=F.RnStacker.createGoTo({PageContactGroupEdit:P.PageContactGroupEdit}),this.goToPageIndex=function(){var e,n=(0,M.getAuthStore)().getCurrentAccount();if(!n)return t.customPageIndex=void 0,void t.goToPageAccountSignIn();if(t.customPageIndex)return t.customPageIndex(),void(t.customPageIndex=void 0);var r=(0,o.menus)();(0,o.normalizeSavedNavigation)();var a=n.navIndex,i=null===(e=n.navSubMenus)||void 0===e?void 0:e[a];r[a].subMenusMap[i].navFn()}};t.Nav2=D,(0,L.setNav)(new D)},,,,,,,,,,,,,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayer=void 0;var r=(0,n(6).observer)((function(){return null}));t.AudioPlayer=r},,,,,,,,,,,,,,,function(e){e.exports=JSON.parse('{"name":"brekekephone","version":"2.11.22","private":true,"homepage":"./","scripts":{"start":"craco start","rn":"react-native start","android":"react-native run-android","shake":"adb shell input keyevent 82","ios":"react-native run-ios","bitcode":"[ -d node_modules/react-native-webrtc/ios/WebRTC.dSYM ] || bash node_modules/react-native-webrtc/tools/downloadBitcode.sh","clean":"yarn --check-files && rm -rf ios/build/* ~/Library/Developer/Xcode/DerivedData/* && cd ios && pod install --repo-update && cd .. && npx jetify && cd android && ./gradlew clean","build":"rm -rf node_modules/.cache/babel* && craco build && node .embed","intl":"rm -rf node_modules/.cache/babel* .intlNewEn.json && export EXTRACT_INTL=1 && babel src -x .js,.ts,.tsx -d build && rm -rf build && node .intlBuild","format":"eslint --ignore-path=.gitignore --ext=.js,.ts,.tsx --fix . && prettier --loglevel=error --ignore-path=.gitignore --write .","test":"yarn test:eslint && yarn test:prettier && yarn test:typescript && yarn test:type-coverage","test:eslint":"eslint --ignore-path=.gitignore --ext=.js,.ts,.tsx --max-warnings=0 .","test:prettier":"prettier --ignore-path=.gitignore --list-different .","test:typescript":"tsc","test:type-coverage":"type-coverage","postinstall":"husky install && patch-package"},"dependencies":{"@react-native-async-storage/async-storage":"1.17.3","@react-native-community/netinfo":"9.3.9","@react-native-community/push-notification-ios":"1.10.1","brekekejs":"github:brekekesoftware/brekekejs#12ad700201a08033a68df8a18304f8623b45018f","buffer":"6.0.3","circular-json":"0.5.9","es6-shim":"0.35.6","es7-shim":"6.0.0","eventemitter3":"4.0.7","filesize":"8.0.7","handlebars":"4.7.7","helper-moment":"0.2.0","html-entities":"2.3.3","json-stable-stringify":"1.0.1","jssip":"github:brekekesoftware/jssip#412551e0b72918ab9a0b7456a0c9fe06e9456c17","lodash":"4.17.21","md5":"2.3.0","mobx":"5.15.7","mobx-react":"github:brekekesoftware/mobx-react#d2ff70ff50e97b4eeda157e0dc7945020bc3fd8f","moment":"2.29.1","polished":"4.1.4","prop-types":"15.8.1","qs":"6.10.3","react":"18.0.0","react-art":"18.0.0","react-device-detect":"2.1.2","react-dom":"18.0.0","react-native":"0.66.3","react-native-background-timer":"2.4.1","react-native-callkeep":"github:brekekesoftware/react-native-callkeep#6c9e248fda2bea09a98aaec2588b5859f83316f3","react-native-document-picker":"4.3.0","react-native-emoji-selector":"0.2.0","react-native-exception-handler":"2.10.10","react-native-fast-image":"8.5.11","react-native-fcm":"github:brekekesoftware/react-native-fcm#91cc3dbac290e445d02c4f0eed47fa79e749d481","react-native-fs":"2.19.0","react-native-get-random-values":"1.7.2","react-native-hyperlink":"0.0.19","react-native-image-picker":"github:brekekesoftware/react-native-image-picker#dc6856f2553afaee28fc620ab86a132aaf25e381","react-native-image-zoom-viewer-fixed":"3.2.5","react-native-incall-manager":"github:brekekesoftware/react-native-incall-manager#da530d28465e6d383f78ae798d813261c402c5a3","react-native-iphone-x-helper":"1.3.1","react-native-keyboard-spacer":"0.4.1","react-native-linear-gradient":"2.5.6","react-native-share":"5.3.0","react-native-splash-screen":"github:brekekesoftware/react-native-splash-screen#a78ee51c0f89652a2a223ff2bc4ec10928bf2c30","react-native-svg":"12.3.0","react-native-svg-web":"1.0.9","react-native-video":"github:brekekesoftware/react-native-video#d8a142fd578278b4b7307466b3b87dc6cb32db7c","react-native-voip-push-notification":"github:brekekesoftware/react-native-voip-push-notification#4c8be182d2515a25f3f12c7f12e01c1b2f9cb70c","react-native-web":"0.17.7","react-native-web-linear-gradient":"1.1.2","react-native-webrtc":"github:brekekesoftware/react-native-webrtc#6cac2cfa0aad8e35f0b78e5d1ac8f161431e4b71","react-native-webview":"11.23.1","react-native-wifi-reborn":"4.7.0","url-parse":"1.5.10","uuid":"8.3.2","validatorjs":"3.22.1"},"devDependencies":{"@babel/cli":"7.17.6","@babel/core":"7.17.8","@babel/plugin-proposal-decorators":"7.17.8","@babel/plugin-proposal-optional-chaining":"7.16.7","@babel/plugin-transform-react-jsx":"7.17.3","@babel/plugin-transform-runtime":"7.17.0","@craco/craco":"6.4.3","@prettier/plugin-xml":"2.0.1","@types/circular-json":"0.4.0","@types/handlebars":"4.1.0","@types/json-stable-stringify":"1.0.34","@types/lodash":"4.14.181","@types/md5":"2.3.2","@types/qs":"6.9.7","@types/react":"17.0.43","@types/react-dom":"17.0.14","@types/react-native":"0.66.3","@types/react-native-background-timer":"2.0.0","@types/react-native-incall-manager":"3.2.1","@types/react-native-keyboard-spacer":"0.4.2","@types/react-native-share":"3.3.3","@types/react-native-video":"5.0.13","@types/react-native-webrtc":"1.75.5","@types/url-parse":"1.4.8","@types/uuid":"8.3.4","@types/validatorjs":"3.15.0","@typescript-eslint/parser":"5.17.0","circular-dependency-plugin":"5.2.2","eslint-plugin-import":"2.25.4","eslint-plugin-react-app":"6.2.2","eslint-plugin-simple-import-sort":"7.0.0","fs-extra":"10.0.1","husky":"7.0.4","lint-staged":"12.3.7","metro-react-native-babel-preset":"0.70.0","patch-package":"6.5.1","prettier":"2.6.1","react-scripts":"4.0.3","type-coverage":"2.21.1","typescript":"4.6.3"},"lint-staged":{"*.{js,ts,tsx}":["eslint --fix","prettier --write"],"*.{html,scss,json,md}":"prettier --write"},"typeCoverage":{"atLeast":100,"ignoreCatch":true},"cracoConfig":".cracorc.js","browserslist":"ie 10-11"}')},,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnImageVideoLoader=void 0;var a=r(n(12)),o=r(n(13)),i=r(n(35)),l=n(1),s=n(2),u=r(n(96)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(209)),d=n(16),f=n(43),p=n(7),g=n(3);function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var b=200,v=s.StyleSheet.create({image:{width:b,height:b,borderRadius:5,overflow:"hidden"},video:{width:b,height:b,borderRadius:5,overflow:"hidden",backgroundColor:p.v.layerBgVideo},loading:{position:"absolute",top:0,left:0,backgroundColor:p.v.layerBg,width:b,height:b,borderRadius:5,overflow:"hidden"},loadingVideo:{position:"absolute",top:0,left:0,backgroundColor:p.v.layerBg,width:b,height:b,borderRadius:5,overflow:"hidden"},imageBroken:{marginLeft:0,marginTop:0,backgroundColor:"blue",aspectRatio:1,alignItems:"center",width:"100%",height:b}});t.RnImageVideoLoader=function(e){var t=e.url,n=e.state,r=e.fileType,h=(0,l.useState)(""),m=(0,i.default)(h,2),y=m[0],C=m[1],S=(0,l.useCallback)((function(){var e=new Image;e.src=y||"";var t=window.open("");null===t||void 0===t||t.document.write(e.outerHTML)}),[y]),x=function(){var e=(0,o.default)(a.default.mark((function e(t){var n,r,o,i,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.split("/"),e.next=4,caches.open(n[0]);case 4:return r=e.sent,o=new Request(n[1]),e.next=8,r.match(o);case 8:return i=e.sent,e.next=11,null===i||void 0===i?void 0:i.blob();case 11:(l=e.sent)&&C(URL.createObjectURL(l)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),C(""),console.error("ImageVideoLoader.readImage error:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){t&&x(t)}),[t]);var k="success"!==n&&"failure"!==n&&"stopped"!==n,P="failure"===n||"stopped"===n,w="success"===n&&!!y;if("success"===n&&!y)return null;var A="image"===r?v.loading:v.loadingVideo;return(0,g.jsxs)(s.View,{style:v.image,children:[k&&(0,g.jsx)(s.ActivityIndicator,{size:"small",color:"white",style:A}),w&&("image"===r?(0,g.jsx)(f.RnTouchableOpacity,{onPress:S,children:(0,g.jsx)(u.default,{source:{uri:y},style:v.image})}):(0,g.jsx)(s.View,{style:v.video,children:(0,g.jsx)("video",{controls:!0,src:y,playsInline:!0,width:b,height:b})})),P&&(0,g.jsx)(c.default,{preserveAspectRatio:"xMinYMin slice",height:b,viewBox:"3 3  18 18",width:b,children:(0,g.jsx)(c.Path,{d:d.mdiImageBrokenVariant,fill:p.v.colors.greyTextChat})})]})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RnStatusBar=void 0;var r=n(2),a=n(210),o=n(43),i=n(7),l=n(3),s=r.StyleSheet.create({RnStatusBar:Object.assign({backgroundColor:i.v.hoverBg},i.v.backdropZindex,r.Platform.select({ios:{height:(0,a.getStatusBarHeight)(!0)}})),RnStatusBar__warning:{backgroundColor:i.v.colors.warning,borderColor:i.v.colors.warning},RnStatusBar__danger:{backgroundColor:i.v.colors.danger,borderColor:i.v.colors.danger},Border:Object.assign({position:"absolute",bottom:0,left:0,right:0,borderColor:i.v.borderBg,borderBottomWidth:1},i.v.backdropZindex)});t.RnStatusBar=function(e){return"web"===r.Platform.OS?null:(0,l.jsxs)(o.RnTouchableOpacity,{style:[s.RnStatusBar,e.warning&&s.RnStatusBar__warning,e.danger&&s.RnStatusBar__danger],onPress:e.onPress,children:[(0,l.jsx)(r.StatusBar,{backgroundColor:e.danger?i.v.colors.danger:e.warning?i.v.colors.warning:i.v.hoverBg,barStyle:"dark-content"}),(0,l.jsx)(r.View,{style:s.Border})]})}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnSwitch=void 0;var a=r(n(54)),o=n(2),i=n(7),l=n(3),s=["enabled","style"],u=o.StyleSheet.create({RnSwitch:{height:12,width:32,backgroundColor:i.v.fn.darken(.05,i.v.hoverBg),borderRadius:12},RnSwitch__enabled:{backgroundColor:i.v.colors.primaryFn(.1)},Circle:Object.assign({position:"absolute",top:-3,left:-1,width:18,height:18,borderRadius:18,backgroundColor:i.v.fn.darken(.05,i.v.borderBg)},i.v.boxShadow),Circle__enabled:{left:null,right:-1,backgroundColor:i.v.colors.primary}});t.RnSwitch=function(e){var t=e.enabled,n=e.style,r=(0,a.default)(e,s);return(0,l.jsx)(o.View,Object.assign({},r,{style:[u.RnSwitch,t&&u.RnSwitch__enabled,n],children:(0,l.jsx)(o.View,{style:[u.Circle,t&&u.Circle__enabled]})}))}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnTextInput=void 0;var a=r(n(54)),o=n(1),i=n(2),l=n(7),s=n(3),u=["keyboardType","style"],c=i.StyleSheet.create({RnTextInput:{position:"relative",fontSize:l.v.fontSize,fontWeight:l.v.fontWeight,fontFamily:l.v.fontFamily,color:l.v.color}}),d=(0,o.forwardRef)((function(e,t){var n=e.keyboardType,r=e.style,o=(0,a.default)(e,u);return(0,s.jsx)(i.TextInput,Object.assign({autoCapitalize:"none",ref:t},o,{keyboardType:"web"===i.Platform.OS?null:n,style:[c.RnTextInput,r]}))}));t.RnTextInput=d},,,,,,,,,,function(e){e.exports=JSON.parse('["<Unnamed>","A new version is available: {{$0}}","Accounts","Action Required","Add all user to the list","Add item","Add/Remove Contact","Add/Remove user","All messages in this thread have been loaded","An unexpected error occurred","Answer","App information and debugging","BACKGROUND CALLS","Background calls","Background service for Brekeke Phone","Brekeke Phone is running on background","Brekeke Phone is up-to-date, checked {{$0}}","Brekeke Phone needs to your permission to display calls","Busy","CALL IS ON HOLD","CALL PARK","CANCEL","CAPTURE ALL DEBUG LOG","CHAT","CLEAR","CONFERENCE","CREATE","CREATE NEW ACCOUNT","CURRENT ACCOUNT","CURRENT CALL","Call duration: {{$0}}","Can not get permission to show call notification","Can not open the url","Cancel","Canceled","Capacity","Chat","Check all","Checking for update...","Clear Logs","Clear all log files","Connecting to {{$0}}...","Connecting...","Copy link","Copy message","Create a new sign in account","Create group chat","Create new contact","Current Account","Current version: {{$0}}","DEBUG LOG","DIAL","DISCARD","Debug","Delete ","Delete contacts","Dialing...","Disabled","Discard Changes","Display with grouping","Do you want to clear all the log files?","Do you want to discard all unsaved changes and go back?","Do you want to join this group?","Do you want to remove this account?","Do you want to remove this park?","Do you want to reset the form to the original data?","Do you want to update your account?\\\\nYou\'ll need to sign out and then sign in again.","Edit buddy list","Edit grouping and user order","Enabled","Enter field","Enter your number","Error","Failed","Failed to accept file","Failed to accept the group chat","Failed to build and open log file","Failed to change UC status","Failed to clear the log files","Failed to create the group chat","Failed to delete contact","Failed to delete unused debug log file","Failed to get front camera information","Failed to get more chats","Failed to get recent chats","Failed to hold the call","Failed to initialize push notification","Failed to invite group chat","Failed to leave the group","Failed to load PBX users","Failed to load contact detail for {{$0}}","Failed to load contact list","Failed to load unread chat messages","Failed to make conference for the transfer","Failed to park the call","Failed to pick file from system","Failed to read debug log file size","Failed to read debug log settings from storage","Failed to reject file","Failed to reject the group chat","Failed to save accounts to local storage","Failed to save the contact","Failed to save user list","Failed to send file","Failed to send the message","Failed to set extension properties","Failed to start recording the call","Failed to stop recording the call","Failed to stop the transfer","Failed to sync Push Notification settings for {{$0}}","Failed to transfer the call","Failed to unhold the call","Failed to write debug log to file","GROUP NAME","Group chat invited by {{$0}}","Group name is existed","Group name is required","HOLD","HOSTNAME","Hide call menu buttons","Incoming Call","Incoming call","Incoming call, duration: {{$0}}","Invisible","Invite","Invite more people","Inviting Group Member","Join","KEYPAD","Keypad","Keypad dial manually","LANGUAGE","LOCALIZATION","Leave group","Load more contacts","Load more messages","Loading...","Logout","MUTE","Manually check for update","Members","Missed call","More...","NEW PARK","New Account","New Group","New Phonebook","No Group","No account","No buddy selected","No target","No target to call","OPEN DEBUG LOG","OPEN IN APP","OPEN IN BROWSER","OTHER SETTINGS","On hold","Online","Only make one outgoing call","Open Brekeke Phone on store","Open debug log","Other Settings","Other settings for PBX/UC","Outgoing call, duration: {{$0}}","PARK","PARK (0)","PARK {{$0}}","PARKS","PARKS ({{$0}})","PASSWORD","PHONE","PHONEBOOK","PORT","PUSH NOTIFICATION","Park","Park number {{$0}} already exist","Park number: ","Permissions required","Phone {{$0}}","Phonebook","RECENT CALLS ({{$0}})","RECENT CHAT THREADS","RECENTS","RECORD","REMOVE","RESET","Recents","Reconnect to server","Reload","Remove Account","Remove Park","Remove group","Reset","Reset form","SAVE","SEARCH CONTACTS","SEARCH FOR USERS","SEARCH NAME, PHONE NUMBER ...","SHOW OFFLINE USERS","SIGN IN","SPEAKER","START PARKING","STATUS","STATUS NOTE","Save Account","Select from photo library","Select target to start transfer","Share link to external app","Share message to external app","Show","Show call menu buttons","Start video call","Start voice call","Success","TENANT","TRANSFER","Take a new photo","Take a new video","Tap the below button to create one","The account password is empty","There is no account created","There\'s currently no message in this thread","There\'s no active chat thread","This account has no park number","This contact doesn\'t have any phone number","This phone index is already in use. Do you want to continue?","Today","Transfer","Transferring","UC recent active chat","UC signed in from another location","UNHOLD","UNMUTE","UPDATE","USER","USERNAME","USERS","Uncheck all","Update Account","Update Phonebook","Users","Users, {{$0}} total","VIDEO","VOICEMAIL ({{$0}})","Voicemail","Voicemail and recent calls","WEBCHAT","WEBCHAT THREADS","Warning","Web Phone needs your action to work well on browser. Press OK to continue","WebChat","Yesterday","You are running an in-browser version of Web Phone","You have rejected this group or it has been deleted","Your park numbers","Your phonebook contacts","at {{$0}}","label","park number","{{$0}} accounts in total","{{$0}} connection failed","{{$0}} in background","{{$0}} other call is in background","{{$0}} other calls are in background","{{$0}} total","{{$0}}/{{$1}} online"]')},function(e){e.exports=JSON.parse('["<\u540d\u524d\u306a\u3057>","\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5229\u7528\u53ef\u80fd\u3067\u3059: {{$0}}","\u30a2\u30ab\u30a6\u30f3\u30c8","\u5bfe\u5fdc\u304c\u5fc5\u8981","\u3059\u3079\u3066\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u30ea\u30b9\u30c8\u306b\u8ffd\u52a0\u3059\u308b","\u30a2\u30a4\u30c6\u30e0\u306e\u8ffd\u52a0","\u30e6\u30fc\u30b6\u30fc\u306e\u8ffd\u52a0/\u524a\u9664","\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0/\u524a\u9664\u3059\u308b","\u3053\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u5168\u3066\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8aad\u8fbc\u3080","\u4e88\u671f\u305b\u306c\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002","\u5fdc\u7b54","\u30a2\u30d7\u30ea\u60c5\u5831\u3068\u30c7\u30d0\u30c3\u30b0","\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9 \u30b3\u30fc\u30eb","\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9 \u30b3\u30fc\u30eb","\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9 \u30b5\u30fc\u30d3\u30b9 Brekeke Phone","Brekeke Phone \u306f\u30d0\u30c3\u30af\u30b0\u30e9\u30f3\u30c9\u3067\u7a3c\u50cd\u3057\u3066\u3044\u307e\u3059","Brekeke Phone \u306f\u6700\u65b0\u7248\u3067\u3059\u3002 \u78ba\u8a8d\u65e5\u6642: {{$0}}","Brekeke Phone \u306f\u901a\u8a71\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u3001\u3042\u306a\u305f\u306e\u8a31\u53ef\u3092\u8981\u6c42\u3057\u3066\u3044\u307e\u3059","\u30d3\u30b8\u30fc","\u4fdd\u7559\u4e2d","\u30b3\u30fc\u30eb\u30d1\u30fc\u30af","\u30ad\u30e3\u30f3\u30bb\u30eb","\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0 \u6709\u52b9/\u7121\u52b9","\u30c1\u30e3\u30c3\u30c8","\u30af\u30ea\u30a2","\u4f1a\u8b70","\u4f5c\u6210","\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210","\u73fe\u5728\u306e\u30a2\u30ab\u30a6\u30f3\u30c8","\u73fe\u5728\u306e\u901a\u8a71","\u901a\u8a71\u6642\u9593: {{$0}}","\u901a\u8a71\u306e\u901a\u77e5\u3092\u8868\u793a\u3059\u308b\u8a31\u53ef\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093","URL\u3092\u30aa\u30fc\u30d7\u30f3\u3067\u304d\u307e\u305b\u3093","\u30ad\u30e3\u30f3\u30bb\u30eb","\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f","\u5bb9\u91cf","\u30c1\u30e3\u30c3\u30c8","\u3059\u3079\u3066\u30c1\u30a7\u30c3\u30af\u3059\u308b","\u66f4\u65b0\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059...","\u30ed\u30b0\u3092\u6d88\u53bb","\u5168\u3066\u306e\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u6d88\u53bb","{{$0}} \u3078\u63a5\u7d9a\u4e2d...","\u63a5\u7d9a\u4e2d...","\u30ea\u30f3\u30af\u3092\u30b3\u30d4\u30fc","\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30b3\u30d4\u30fc","\u65b0\u898f\u30b5\u30a4\u30f3\u30a4\u30f3\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210","\u30b0\u30eb\u30fc\u30d7\u30c1\u30e3\u30c3\u30c8\u306e\u4f5c\u6210","\u65b0\u898f\u9023\u7d61\u5148\u306e\u4f5c\u6210","\u73fe\u5728\u306e\u30a2\u30ab\u30a6\u30f3\u30c8","\u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3: {{$0}}","\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0","\u30c0\u30a4\u30e4\u30eb","\u7834\u68c4","\u30c7\u30d0\u30c3\u30b0","\u524a\u9664 ","\u9023\u7d61\u5148\u306e\u524a\u9664","\u30c0\u30a4\u30e4\u30eb\u4e2d...","\u7121\u52b9","\u5909\u66f4\u3092\u7834\u68c4\u3059\u308b","\u30b0\u30eb\u30fc\u30d7\u5316\u3057\u3066\u8868\u793a\u3059\u308b","\u5168\u3066\u306e\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u307e\u3059\u304b?","\u4fdd\u5b58\u3057\u3066\u3044\u306a\u3044\u5909\u66f4\u70b9\u3092\u7834\u68c4\u3057\u3066\u5143\u306e\u753b\u9762\u306b\u623b\u308a\u307e\u3059\u304b\uff1f","\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u53c2\u52a0\u3057\u307e\u3059\u304b?","\u3053\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f","\u3053\u306e\u30d1\u30fc\u30af\u756a\u53f7\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f","\u30d5\u30a9\u30fc\u30e0\u3092\u30ea\u30bb\u30c3\u30c8\u3057\u3066\u30aa\u30ea\u30b8\u30ca\u30eb\u30c7\u30fc\u30bf\u306b\u623b\u3057\u307e\u3059\u304b\uff1f","\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\u3092\u66f4\u65b0\u3057\u307e\u3059\u304b?\\\\n\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8\u3001\u30b5\u30a4\u30f3\u30a4\u30f3\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002","\u30e6\u30fc\u30b6\u30fc\u4e00\u89a7\u306e\u7de8\u96c6","\u30b0\u30eb\u30fc\u30d7\u3068\u30e6\u30fc\u30b6\u30fc\u9806\u3092\u7de8\u96c6\u3059\u308b","\u6709\u52b9","\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u5165\u529b","\u756a\u53f7\u3092\u5165\u529b","\u30a8\u30e9\u30fc","\u5931\u6557","\u30d5\u30a1\u30a4\u30eb\u306e\u8a31\u53ef\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30b0\u30eb\u30fc\u30d7\u30c1\u30e3\u30c3\u30c8\u306e\u8a31\u53ef\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\u3068\u30aa\u30fc\u30d7\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f","UC\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u5909\u66f4\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u6d88\u53bb\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30b0\u30eb\u30fc\u30d7\u30c1\u30e3\u30c3\u30c8\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u9023\u7d61\u5148\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u4f7f\u7528\u3057\u3066\u3044\u306a\u3044\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30d5\u30ed\u30f3\u30c8\u30ab\u30e1\u30e9\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30c1\u30e3\u30c3\u30c8\u306e\u8ffd\u52a0\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u6700\u8fd1\u306e\u30c1\u30e3\u30c3\u30c8\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u901a\u8a71\u306e\u4fdd\u7559\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u306e\u521d\u671f\u5316\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30b0\u30eb\u30fc\u30d7\u30c1\u30e3\u30c3\u30c8\u3078\u306e\u62db\u5f85\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30b0\u30eb\u30fc\u30d7\u304b\u3089\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f","PBX\u30e6\u30fc\u30b6\u30fc\u306e\u8aad\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f","{{$0}} \u306b\u3064\u3044\u3066\u3001\u9023\u7d61\u5148\u8a73\u7d30\u306e\u30ed\u30fc\u30c9\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u9023\u7d61\u5148\u30ea\u30b9\u30c8\u306e\u8aad\u307f\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u672a\u8aad\u30c1\u30e3\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u8aad\u307f\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u8ee2\u9001\u306e\u305f\u3081\u306e\u4f1a\u8b70\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u901a\u8a71\u306e\u30d1\u30fc\u30af\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u306e\u8aad\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30b9\u30c8\u30ec\u30fc\u30b8\u304b\u3089\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u8a2d\u5b9a\u60c5\u5831\u306e\u8aad\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30d5\u30a1\u30a4\u30eb\u306e\u62d2\u5426\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30b0\u30eb\u30fc\u30d7\u30c1\u30e3\u30c3\u30c8\u306e\u62d2\u5426\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306e\u30ed\u30fc\u30ab\u30eb\u30b9\u30c8\u30ec\u30fc\u30b8\u3078\u306e\u4fdd\u5b58\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u9023\u7d61\u5148\u306e\u4fdd\u5b58\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30e6\u30fc\u30b6\u30fc\u4e00\u89a7\u306e\u4fdd\u5b58\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30d5\u30a1\u30a4\u30eb\u306e\u9001\u4fe1\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9001\u4fe1\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u5185\u7dda\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u8a2d\u5b9a\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u901a\u8a71\u9332\u97f3\u306e\u958b\u59cb\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u901a\u8a71\u9332\u97f3\u306e\u505c\u6b62\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u8ee2\u9001\u306e\u505c\u6b62\u306b\u5931\u6557\u3057\u307e\u3057\u305f","{{$0}} \u306e\u305f\u3081\u306e\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u8a2d\u5b9a\u306e\u540c\u671f\u304c\u5931\u6557\u3057\u307e\u3057\u305f","\u901a\u8a71\u306e\u8ee2\u9001\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u901a\u8a71\u306e\u4fdd\u7559\u89e3\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f","\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u306e\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u66f8\u304d\u8fbc\u307f\u304c\u5931\u6557\u3057\u307e\u3057\u305f","\u30b0\u30eb\u30fc\u30d7\u540d","{{$0}} \u304b\u3089\u30b0\u30eb\u30fc\u30d7\u30c1\u30e3\u30c3\u30c8\u3078\u306e\u62db\u5f85","\u30b0\u30eb\u30fc\u30d7\u540d\u304c\u65e2\u306b\u5b58\u5728\u3057\u3066\u3044\u307e\u3059","\u30b0\u30eb\u30fc\u30d7\u540d\u304c\u5fc5\u8981\u3067\u3059","\u4fdd\u7559","\u30db\u30b9\u30c8\u540d","\u901a\u8a71\u30e1\u30cb\u30e5\u30fc\u30dc\u30bf\u30f3\u3092\u96a0\u3059","\u7740\u4fe1","\u7740\u4fe1","\u7740\u4fe1, \u901a\u8a71\u6642\u9593: {{$0}}","\u96a0\u3059","\u62db\u5f85\u3059\u308b","\u4ed6\u306e\u4eba\u3092\u62db\u5f85\u3059\u308b","\u30b0\u30eb\u30fc\u30d7\u30e1\u30f3\u30d0\u30fc\u3092\u62db\u5f85\u3059\u308b","\u53c2\u52a0","\u30ad\u30fc\u30d1\u30c3\u30c9","\u30ad\u30fc\u30d1\u30c3\u30c9","\u30ad\u30fc\u30d1\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30c0\u30a4\u30e4\u30eb","\u8a00\u8a9e","\u30ed\u30fc\u30ab\u30e9\u30a4\u30ba","\u30b0\u30eb\u30fc\u30d7\u304b\u3089\u96e2\u308c\u308b","\u3055\u3089\u306b\u9023\u7d61\u5148\u3092\u8aad\u8fbc\u3080","\u3055\u3089\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8aad\u8fbc\u3080","\u8aad\u8fbc\u4e2d...","\u30ed\u30b0\u30a2\u30a6\u30c8","\u30df\u30e5\u30fc\u30c8","\u624b\u52d5\u3067\u66f4\u65b0\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b","\u30e1\u30f3\u30d0\u30fc","\u4e0d\u5728\u7740\u4fe1","\u3055\u3089\u306b...","\u65b0\u898f\u30d1\u30fc\u30af","\u65b0\u30a2\u30ab\u30a6\u30f3\u30c8","\u65b0\u898f\u30b0\u30eb\u30fc\u30d7","\u65b0\u898f\u96fb\u8a71\u5e33","\u30b0\u30eb\u30fc\u30d7\u306a\u3057","\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u3042\u308a\u307e\u305b\u3093","\u30d0\u30c7\u30a3\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093","\u30bf\u30fc\u30b2\u30c3\u30c8\u304c\u3042\u308a\u307e\u305b\u3093","\u901a\u8a71\u306e\u305f\u3081\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u304c\u3042\u308a\u307e\u305b\u3093","\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u3092\u958b\u304f","\u30a2\u30d7\u30ea\u3067\u958b\u304f","\u30d6\u30e9\u30a6\u30b6\u3067\u958b\u304f","\u305d\u306e\u4ed6\u306e\u8a2d\u5b9a","\u4fdd\u7559","\u30aa\u30f3\u30e9\u30a4\u30f3","\u767a\u4fe1\u306f1\u56de\u3060\u3051","\u30b9\u30c8\u30a2\u3067Brekeke Phone\u3092\u898b\u308b","\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u3092\u958b\u304f","\u305d\u306e\u4ed6\u306e\u8a2d\u5b9a","PBX/UC \u306e\u305d\u306e\u4ed6\u306e\u8a2d\u5b9a","\u767a\u4fe1, \u901a\u8a71\u6642\u9593: {{$0}}","\u30d1\u30fc\u30af","\u30d1\u30fc\u30af (0)","\u30d1\u30fc\u30af {{$0}}","\u30d1\u30fc\u30af","\u30d1\u30fc\u30af ({{$0}})","\u30d1\u30b9\u30ef\u30fc\u30c9","\u7aef\u672b","\u96fb\u8a71\u5e33","\u30dd\u30fc\u30c8","\u30d7\u30c3\u30b7\u30e5\u901a\u77e5","\u30d1\u30fc\u30af","\u30d1\u30fc\u30af\u756a\u53f7 {{$0}} \u306f\u3059\u3067\u306b\u5b58\u5728\u3057\u307e\u3059","\u30d1\u30fc\u30af\u756a\u53f7: ","\u5fc5\u8981\u3068\u3059\u308b\u6a29\u9650","\u7aef\u672b {{$0}}","\u96fb\u8a71\u5e33","\u6700\u8fd1\u306e\u901a\u8a71 ({{$0}})","\u6700\u8fd1\u306e\u30c1\u30e3\u30c3\u30c8\u30b9\u30ec\u30c3\u30c9","\u5c65\u6b74","\u9332\u97f3","\u524a\u9664","\u30ea\u30bb\u30c3\u30c8","\u5c65\u6b74","\u30b5\u30fc\u30d0\u30fc\u306b\u518d\u63a5\u7d9a","\u518d\u8aad\u8fbc\u307f","\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u524a\u9664","\u30d1\u30fc\u30af\u306e\u524a\u9664","\u30b0\u30eb\u30fc\u30d7\u3092\u524a\u9664\u3059\u308b","\u30ea\u30bb\u30c3\u30c8","\u30d5\u30a9\u30fc\u30e0\u306e\u30ea\u30bb\u30c3\u30c8","\u4fdd\u5b58","\u9023\u7d61\u5148\u306e\u691c\u7d22","\u30e6\u30fc\u30b6\u30fc\u306e\u691c\u7d22","\u540d\u524d\u3001\u96fb\u8a71\u756a\u53f7...\u306e\u691c\u7d22","\u30aa\u30d5\u30e9\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc\u3092\u8868\u793a\u3059\u308b","\u30b5\u30a4\u30f3\u30a4\u30f3","\u30b9\u30d4\u30fc\u30ab\u30fc","\u30d1\u30fc\u30af\u958b\u59cb","\u30b9\u30c6\u30fc\u30bf\u30b9","\u30b9\u30c6\u30fc\u30bf\u30b9 \u30ce\u30fc\u30c8","\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4fdd\u5b58","\u30d5\u30a9\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u304b\u3089\u9078\u629e","\u8ee2\u9001\u5148\u306e\u9078\u629e","\u5916\u90e8\u30a2\u30d7\u30ea\u306b\u30ea\u30f3\u30af\u3092\u30b7\u30a7\u30a2","\u5916\u90e8\u30a2\u30d7\u30ea\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30b7\u30a7\u30a2","\u8868\u793a","\u901a\u8a71\u30e1\u30cb\u30e5\u30fc\u30dc\u30bf\u30f3\u306e\u8868\u793a","\u30d3\u30c7\u30aa\u901a\u8a71\u306e\u958b\u59cb","\u97f3\u58f0\u901a\u8a71\u306e\u958b\u59cb","\u6210\u529f","\u30c6\u30ca\u30f3\u30c8","\u8ee2\u9001","\u65b0\u898f\u306b\u5199\u771f\u3092\u64ae\u308b","\u65b0\u898f\u306b\u30d3\u30c7\u30aa\u3092\u64ae\u308b","\u4e0b\u306e\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044","\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093","\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u305b\u3093","\u73fe\u5728\u3053\u306e\u30b9\u30ec\u30c3\u30c9\u306b\u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3042\u308a\u307e\u305b\u3093","\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e3\u30c3\u30c8\u30b9\u30ec\u30c3\u30c9\u306f\u3042\u308a\u307e\u305b\u3093","\u3053\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u306f\u30d1\u30fc\u30af\u756a\u53f7\u304c\u3042\u308a\u307e\u305b\u3093","\u3053\u306e\u9023\u7d61\u5148\u306b\u306f\u96fb\u8a71\u756a\u53f7\u304c\u3042\u308a\u307e\u305b\u3093","\u3053\u306e\u7aef\u672b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306f\u65e2\u306b\u4f7f\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u7d9a\u884c\u3057\u307e\u3059\u304b\uff1f","\u672c\u65e5","\u8ee2\u9001","\u8ee2\u9001\u4e2d","UC \u6700\u8fd1\u306e\u30a2\u30af\u30c6\u30a3\u30d6\u30c1\u30e3\u30c3\u30c8","UC \u4ed6\u306e\u5834\u6240\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u3055\u308c\u307e\u3057\u305f","\u4fdd\u7559\u89e3\u9664","\u30df\u30e5\u30fc\u30c8\u89e3\u9664","\u66f4\u65b0","\u30e6\u30fc\u30b6\u30fc","\u540d","\u30e6\u30fc\u30b6\u30fc","\u3059\u3079\u3066\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3059","\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u66f4\u65b0","\u96fb\u8a71\u5e33\u306e\u66f4\u65b0","\u30e6\u30fc\u30b6\u30fc","\u30e6\u30fc\u30b6\u30fc, \u5408\u8a08 {{$0}}","\u30d3\u30c7\u30aa","\u7559\u5b88\u756a\u96fb\u8a71 ({{$0}})","\u7559\u5b88\u756a\u96fb\u8a71","\u7559\u5b88\u756a\u96fb\u8a71\u3068\u6700\u8fd1\u306e\u901a\u8a71","\u30a6\u30a7\u30d6\u30c1\u30e3\u30c3\u30c8","\u30a6\u30a7\u30d6\u30c1\u30e3\u30c3\u30c8 \u30b9\u30ec\u30c3\u30c9","\u8b66\u544a","Web Phone \u3092\u30d6\u30e9\u30a6\u30b6\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u3042\u306a\u305f\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u3067\u3059\u3002\u7d9a\u884c\u3059\u308b\u5834\u5408\u306f [OK] \u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044","\u30a6\u30a7\u30d6\u30c1\u30e3\u30c3\u30c8","\u6628\u65e5","\u30d6\u30e9\u30a6\u30b6\u5185\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Web Phone \u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059","\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u306f\u62d2\u5426\u3055\u308c\u3066\u3044\u308b\u304b\u3001\u307e\u305f\u306f\u524a\u9664\u3055\u308c\u3066\u3044\u307e\u3059","\u3042\u306a\u305f\u306e\u30d1\u30fc\u30af\u756a\u53f7","\u3042\u306a\u305f\u306e\u96fb\u8a71\u5e33\u306e\u9023\u7d61\u5148","at {{$0}}","\u30e9\u30d9\u30eb","\u30d1\u30fc\u30af\u756a\u53f7","\u5408\u8a08 {{$0}}\u30a2\u30ab\u30a6\u30f3\u30c8","{{$0}} \u63a5\u7d9a\u5931\u6557","{{$0}} \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306b\u3042\u308a\u307e\u3059","{{$0}} \u4ed6\u306e\u901a\u8a71\u306f\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306b\u3042\u308a\u307e\u3059","{{$0}} \u4ed6\u306e\u901a\u8a71\u306f\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306b\u3042\u308a\u307e\u3059","\u5408\u8a08 {{$0}}","{{$0}}/{{$1}} \u30aa\u30f3\u30e9\u30a4\u30f3"]')},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PageAccountCreate=void 0;var r=n(211),a=n(32),o=n(4),i=n(10),l=n(3);t.PageAccountCreate=function(){return(0,l.jsx)(r.AccountCreateForm,{onBack:(0,i.Nav)().backToPageAccountSignIn,onSave:function(e){a.accountStore.upsertAccount(e),(0,i.Nav)().backToPageAccountSignIn()},title:(0,o.intl)("New Account",{})})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=void 0;var r=n(21),a=n(9);t.createStore=function(e){for(var t={set:function(e,n){(0,r.set)(t,e,"function"===typeof n?n((0,r.get)(t,e)):n)},upsert:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";t.set(e,(function(e){return e.reduce((function(e,t){return e||t[r]!==n[r]?e:(Object.assign(t,n),!0)}),!1)||e.push(n),e}))},remove:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";t.set(e,(function(e){return e.filter((function(e){return e[r]!==n}))}))},extends:function(e){if(e){if("function"===typeof e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e=e.apply(void 0,[t].concat(r))}if("function"!==typeof e){var i=(e.observable?Object.keys(e.observable):[]).concat(Object.keys(e));i.forEach((function(e){if(e in t)throw new Error("createStore.extends: Duplicated key "+e)})),e.observable&&((0,a.extendObservable)(t,e.observable),delete e.observable),Object.assign(t,e)}}}},n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return t.extends.apply(t,[e].concat(o)),t}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PhonebookAutoComplete=void 0;var a=r(n(34)),o=r(n(35)),i=n(1),l=n(2),s=n(26),u=n(43),c=n(7),d=n(3),f=l.StyleSheet.create({txtPb:{width:"100%",textAlign:"left",marginHorizontal:10},itemPb:{width:"100%",paddingVertical:5,borderBottomColor:"grey",borderBottomWidth:.5},autocompleteContainer:Object.assign({flex:1,left:0,position:"absolute",right:0,top:0,zIndex:1,padding:5,backgroundColor:"blue"},l.Platform.select({web:{marginTop:0},default:{marginTop:25}})),viewFlatList:Object.assign({position:"absolute",borderRadius:5,backgroundColor:"white",paddingVertical:5,paddingHorizontal:10,width:l.Dimensions.get("screen").width-30,maxHeight:300,top:188,zIndex:1e5,marginHorizontal:15},l.Platform.select({ios:{shadowColor:c.v.borderBg,shadowOpacity:.45,shadowRadius:5,shadowOffset:{width:5,height:10}},android:{elevation:10},web:{boxShadow:"0px 0px 10px "+c.v.borderBg}}))});t.PhonebookAutoComplete=function(e){var t=e.value,n=e.onPressItem,r=(0,i.useState)(!1),c=(0,o.default)(r,2),p=c[0],g=c[1];(0,i.useEffect)((function(){s.contactStore.loadPbxBoook(),g(!1)}),[t]);var h=(0,a.default)(function(){if(!s.contactStore.pbxBooks.length)return[];if(!t)return(0,a.default)(s.contactStore.pbxBooks);var e=s.contactStore.pbxBooks.filter((function(e){return e.phonebook.toLowerCase().startsWith(t.toLowerCase())}));return!e.length||1===e.length&&t===e[0].phonebook?[]:e}());return h.length&&!0!==p?(0,d.jsx)(l.View,{style:f.viewFlatList,children:(0,d.jsx)(l.ScrollView,{children:h.map((function(e,t){return(0,d.jsx)(u.RnTouchableOpacity,{style:f.itemPb,onPress:function(){g(!0),null===n||void 0===n||n(e)},children:(0,d.jsx)(l.Text,{style:f.txtPb,children:e.phonebook})},t)}))})}):null}},,function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/ding.4bf3338b.mp3"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0;var r=n(21),a=n(6),o=n(2),i=n(210),l=n(71),s=n(49),u=n(323),c=n(324),d=n(696),f=n(7),p=n(3),g=o.StyleSheet.create({Footer:{position:"absolute",bottom:0,right:0},Footer__noKeyboard:Object.assign({left:0,paddingBottom:(0,i.getBottomSpace)(),backgroundColor:f.v.bg},f.v.boxShadow),ActionsOuter:{alignItems:"center",flexDirection:"row",paddingHorizontal:10,marginVertical:8},ActionsSpacing:{flex:1},ActionsInner:{flexDirection:"row",width:"100%",minWidth:260,maxWidth:f.v.maxModalWidth}}),h=(0,a.observer)((function(e){var t=(0,s.arrToMap)(Object.keys(e).filter((function(e){return e.startsWith("fab")})),(function(e){return(0,r.lowerFirst)(e.replace("fab",""))}),(function(t){return e[t]})),n=e.menu,a=e.isTab,i=t.onNext,f=t.render;return f||(n||i||l.RnKeyboard.isKeyboardShowing)&&!l.RnKeyboard.isKeyboardAnimating?(0,p.jsxs)(o.View,{style:[g.Footer,(f||!l.RnKeyboard.isKeyboardShowing)&&g.Footer__noKeyboard],children:[f?f():l.RnKeyboard.isKeyboardShowing?(0,p.jsx)(d.ToggleKeyboard,Object.assign({},t)):i?(0,p.jsxs)(o.View,{style:g.ActionsOuter,children:[(0,p.jsx)(o.View,{style:g.ActionsSpacing}),(0,p.jsx)(o.View,{style:g.ActionsInner,children:(0,p.jsx)(u.FooterActions,Object.assign({},t))}),(0,p.jsx)(o.View,{style:g.ActionsSpacing})]}):null,!l.RnKeyboard.isKeyboardShowing&&n&&!a&&(0,p.jsx)(c.Navigation,{menu:n})]}):null}));t.Footer=h},,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.rnVibrate=void 0;var r=n(2);t.rnVibrate=function(){r.Vibration.vibrate(1e3)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleKeyboard=void 0;var r=n(6),a=n(2),o=n(16),i=n(71),l=n(215),s=n(8),u=n(7),c=n(3),d=a.StyleSheet.create({ToggleKeyboard:Object.assign({flexDirection:"row",marginRight:8,marginBottom:4,borderRadius:u.v.borderRadius,paddingVertical:8,width:u.v.iconSize+24,backgroundColor:u.v.hoverBg},u.v.boxShadow),Text:{width:0,lineHeight:u.v.iconSize,overflow:"hidden"}}),f=(0,r.observer)((function(e){var t=e.onShowKeyboard;return"web"===a.Platform.OS||!i.RnKeyboard.isKeyboardShowing&&!t?null:(0,c.jsx)(l.AnimatedSize,{animateWidth:!0,children:(0,c.jsxs)(s.RnTouchableOpacity,{onPress:i.RnKeyboard.isKeyboardShowing?a.Keyboard.dismiss:t,style:d.ToggleKeyboard,children:[(0,c.jsx)(s.RnText,{style:d.Text,children:"\u200a"}),(0,c.jsx)(s.RnIcon,{path:i.RnKeyboard.isKeyboardShowing?o.mdiKeyboardOffOutline:o.mdiKeyboardOutline})]})})}));t.ToggleKeyboard=f},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;var a=r(n(35)),o=n(1),i=n(2),l=n(698),s=n(699),u=n(700),c=n(701),d=n(702),f=n(7),p=n(3),g=i.StyleSheet.create({Header:{position:"absolute",top:0,left:0,right:0},Outer:{backgroundColor:f.v.bg},Outer__compact:Object.assign({},f.v.boxShadow),Outer__transparent:{backgroundColor:"transparent"},Inner__hasBackBtn:{paddingLeft:35}});t.Header=function(e){var t=e.compact,n=e.description,r=e.dropdown,f=e.menu,h=e.onBack,b=e.onCreate,v=e.subMenu,m=e.title,y=e.isTab,C=e.transparent,S=(0,o.useState)(!1),x=(0,a.default)(S,2),k=x[0],P=x[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(i.View,{style:g.Header,children:(0,p.jsxs)(i.View,{style:[g.Outer,t&&g.Outer__compact,C&&g.Outer__transparent],children:[(0,p.jsxs)(i.View,{style:h&&g.Inner__hasBackBtn,children:[(0,p.jsx)(d.Title,{compact:t,description:n,title:m}),h&&(0,p.jsx)(l.BackBtn,{compact:t,onPress:h}),r&&(0,p.jsx)(u.DropdownBtn,{onPress:function(){return P(!0)}})]}),f&&(0,p.jsx)(c.Navigation,{isTab:y,menu:f,subMenu:v})]})}),r&&k&&(0,p.jsx)(u.Dropdown,{close:function(){return P(!1)},compact:t,dropdown:r}),!r&&b&&(0,p.jsx)(s.CreateBtn,{onPress:b,white:C})]})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BackBtn=void 0;var r=n(2),a=n(16),o=n(81),i=n(8),l=n(3),s=r.StyleSheet.create({BackBtn:{position:"absolute",top:0,left:0},Inner:{width:50,height:70,paddingHorizontal:0,paddingVertical:20,borderRadius:0}});t.BackBtn=function(e){var t=e.compact,n=e.onPress,u=(0,o.useAnimation)(t,{height:[70,40],paddingVertical:[20,5]});return(0,l.jsx)(i.RnTouchableOpacity,{onPress:n,style:s.BackBtn,children:(0,l.jsx)(r.Animated.View,{style:[s.Inner,u],children:(0,l.jsx)(i.RnIcon,{path:a.mdiKeyboardBackspace})})})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CreateBtn=void 0;var r=n(2),a=n(16),o=n(8),i=n(7),l=n(3),s=r.StyleSheet.create({CreateBtn:{position:"absolute",top:11,right:5,width:50,height:50,borderRadius:25,backgroundColor:i.v.colors.primary},CreateBtn__white:{backgroundColor:i.v.bg}});t.CreateBtn=function(e){var t=e.onPress,n=e.white;return(0,l.jsx)(o.RnTouchableOpacity,{onPress:t,style:[s.CreateBtn,n&&s.CreateBtn__white],children:(0,l.jsx)(o.RnIcon,{color:n?"black":"white",path:a.mdiPlus})})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownBtn=t.Dropdown=void 0;var r=n(2),a=n(16),o=n(215),i=n(8),l=n(7),s=n(3),u=r.StyleSheet.create({Backdrop:Object.assign({position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:l.v.fn.transparentize(.8,"black")},l.v.backdropZindex),Dropdown:Object.assign({position:"absolute",top:60,right:15,width:250},l.v.boxShadow,l.v.backdropZindex),Dropdown__compact:{top:35},Inner:{borderRadius:l.v.borderRadius,backgroundColor:l.v.bg},Item:{paddingVertical:10,paddingHorizontal:15,borderBottomWidth:1,borderColor:l.v.borderBg},Item__last:{borderBottomWidth:0},Btn:{position:"absolute",top:0,bottom:0,right:0,width:50}});t.Dropdown=function(e){var t=e.close,n=e.compact,r=e.dropdown;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.RnTouchableOpacity,{activeOpacity:1,onPress:t,style:u.Backdrop}),(0,s.jsx)(o.AnimatedSize,{innerStyle:u.Inner,style:[u.Dropdown,n&&u.Dropdown__compact],children:r.map((function(e,n){var a=e.danger,o=e.label,l=e.onPress,c=e.primary,d=e.warning;return(0,s.jsx)(i.RnTouchableOpacity,{onPress:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){t(),null===l||void 0===l||l()})),style:[u.Item,n===r.length-1&&u.Item__last],children:(0,s.jsx)(i.RnText,{primary:c,warning:d,danger:a,children:o})},n)}))})]})};t.DropdownBtn=function(e){var t=e.onPress;return(0,s.jsx)(i.RnTouchableOpacity,{onPress:t,style:u.Btn,children:(0,s.jsx)(i.RnIcon,{path:a.mdiDotsVertical})})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Navigation=void 0;var r=n(6),a=n(1),o=n(2),i=n(37),l=n(324),s=n(206),u=n(216),c=n(8),d=n(7),f=n(3),p=o.StyleSheet.create({Navigation:{flexDirection:"row",alignSelf:"stretch",backgroundColor:d.v.bg},Btn:{flex:1,paddingVertical:8,alignItems:"center",borderBottomWidth:3,borderColor:d.v.borderBg},Btn__active:{borderColor:d.v.colors.primary},Text__active:{color:d.v.colors.primary},Unread:{top:-5,left:25},ml:{left:35,width:20}}),g=(0,r.observer)((function(e){var t=e.menu,n=e.subMenu,r=e.isTab?(0,u.getTabs)(t):(0,s.getSubMenus)(t),d=(0,a.useCallback)((function(e,t){return(0,f.jsx)(o.View,{style:l.css.UnreadOuter,children:(0,f.jsx)(o.View,{style:[l.css.Unread,p.Unread,t],children:(0,f.jsx)(c.RnText,{style:l.css.UnreadText,bold:!0,white:!0,center:!0,children:e})})})}),[]);return(0,f.jsx)(o.View,{style:p.Navigation,children:r.map((function(e){var t=e.key===n,r=i.chatStore.unreadCount,a=i.chatStore.getNumberWebchatNoti();return(0,f.jsxs)(c.RnTouchableOpacity,{onPress:t?void 0:e.navFn,style:[p.Btn,t&&p.Btn__active],children:[(0,f.jsx)(c.RnText,{small:!0,style:t&&p.Text__active,children:e.label}),"chat"===e.key&&!!r&&d(r),"webchat"===e.key&&!!a&&d(a,p.ml)]},e.key)}))})}));t.Navigation=g},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Title=void 0;var r=n(2),a=n(81),o=n(329),i=n(8),l=n(70),s=n(7),u=n(3),c=r.StyleSheet.create({Container:{padding:15},Title:{fontSize:s.v.fontSizeTitle,lineHeight:s.v.lineHeightTitle,fontWeight:"bold",color:"black"},Description:{color:s.v.subColor}});t.Title=function(e){var t=e.compact,n=e.description,d=e.title,f=(0,a.useAnimation)(t,{paddingVertical:[15,10]}),p=(0,a.useAnimation)(t,{fontSize:[s.v.fontSizeTitle,s.v.fontSizeSubTitle],lineHeight:[s.v.lineHeightTitle,20]});return(0,u.jsxs)(r.Animated.View,{style:[c.Container,f],children:[(0,u.jsx)(l.AnimatedText,{style:[c.Title,p],children:(0,o.trimDisplayName)(d)}),!t&&(0,u.jsx)(i.RnText,{style:c.Description,children:n||"\u200a"})]})}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Toast=void 0;var a=r(n(35)),o=n(1),i=n(2),l=n(8),s=n(3),u=i.StyleSheet.create({container:{position:"absolute",right:0,left:0,top:10,justifyContent:"center",alignItems:"center"},content:{padding:10,backgroundColor:"#000",maxWidth:"50%",opacity:.8,borderRadius:5},textStyle:{fontSize:16,color:"#fff",textAlign:"center"}});t.Toast=function(e){var t=e.title,n=e.isVisible,r=e.containerStyles,c=(0,o.useState)(new i.Animated.Value(0)),d=(0,a.default)(c,1)[0],f=t.length>50?t.substring(0,50)+"...":t;return(0,o.useEffect)((function(){n&&(d.setValue(1),i.Animated.timing(d,{toValue:0,duration:3e3,useNativeDriver:!0}).start())}),[d,n]),(0,s.jsx)(i.View,{style:[u.container,r],children:(0,s.jsx)(i.Animated.View,{style:[u.content,{opacity:d}],children:(0,s.jsx)(l.RnText,{style:u.textStyle,children:f})})})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PageAccountSignIn=void 0;var r=n(6),a=n(2),o=n(16),i=n(705),l=n(217),s=n(30),u=n(8),c=n(7),d=n(32),f=n(4),p=n(80),g=n(10),h=n(3),b=a.StyleSheet.create({PageAccountSignIn_ListServers:{height:"70%",minHeight:320},PageAccountSignIn_Spacing:{flex:1,maxHeight:"20%"},Space:{height:15},CornerButton:Object.assign({position:"absolute",bottom:0,paddingTop:25,paddingBottom:10,paddingHorizontal:15},c.v.backdropZindex),CornerButton__info:{left:0},CornerButton__language:{right:0},CornerButton_Inner:{flexDirection:"row",justifyContent:"flex-end"},CornerButton_Inner__info:{paddingLeft:19},CornerButton_Inner__language:{paddingRight:18},CornerButton_Icon:Object.assign({position:"absolute"},a.Platform.select({android:{top:4},default:{top:2}})),CornerButton_Icon__info:{left:0},CornerButton_Icon__language:{right:0}}),v=(0,r.observer)((function(){var e=d.accountStore.accounts.map((function(e){return e.id})).filter((function(e){return e})),t=e.length;return(0,h.jsxs)(l.BrekekeGradient,{children:[(0,h.jsxs)(s.Layout,{description:(0,f.intl)("{{$0}} accounts in total",{$0:t}),noScroll:!0,onCreate:t?(0,g.Nav)().goToPageAccountCreate:void 0,title:(0,f.intl)("Accounts",{}),transparent:!0,children:[(0,h.jsx)(a.View,{style:{flexDirection:"column",width:"100%",justifyContent:"space-around"}}),(0,h.jsx)(a.View,{style:b.PageAccountSignIn_Spacing}),t?(0,h.jsx)(a.FlatList,{data:e,horizontal:!0,keyExtractor:function(e){return e},renderItem:function(e){var n=e.index,r=e.item;return(0,h.jsx)(i.AccountSignInItem,{id:r,last:n===t-1})},showsHorizontalScrollIndicator:!1,style:b.PageAccountSignIn_ListServers}):(0,h.jsx)(i.AccountSignInItem,{empty:!0})]}),(0,h.jsx)(u.RnTouchableOpacity,{onPress:(0,g.Nav)().goToPageSettingsDebug,style:b.CornerButton,children:(0,h.jsxs)(a.View,{style:[b.CornerButton_Inner,b.CornerButton_Inner__info],children:[(0,h.jsx)(u.RnIcon,{color:"white",path:o.mdiLadybug,size:16,style:[b.CornerButton_Icon,b.CornerButton_Icon__info]}),(0,h.jsx)(u.RnText,{bold:!0,white:!0,children:c.currentVersion})]})}),(0,h.jsx)(u.RnTouchableOpacity,{onPress:p.intlStore.localeLoading?void 0:p.intlStore.selectLocale,style:[b.CornerButton,b.CornerButton__language],children:(0,h.jsxs)(a.View,{style:[b.CornerButton_Inner,b.CornerButton_Inner__language],children:[(0,h.jsx)(u.RnText,{bold:!0,white:!0,children:p.intlStore.localeLoading?"\u200a":p.intlStore.getLocaleName()}),(0,h.jsx)(u.RnIcon,{color:"white",path:p.intlStore.localeLoading?o.mdiDotsHorizontal:o.mdiUnfoldMoreHorizontal,size:16,style:[b.CornerButton_Icon,b.CornerButton_Icon__language]})]})}),(0,h.jsx)(a.View,{style:b.Space})]})}));t.PageAccountSignIn=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AccountSignInItem=void 0;var r=n(6),a=n(2),o=n(16),i=n(32),l=n(11),s=n(19),u=n(4),c=n(10),d=n(15),f=n(44),p=n(323),g=n(8),h=n(7),b=n(3),v=a.StyleSheet.create({AccountSignInItem:{backgroundColor:h.v.bg,marginBottom:15,marginLeft:15,borderRadius:h.v.borderRadius,width:280},AccountSignInItem__last:{marginRight:15},AccountSignInItem__empty:{height:"70%",minHeight:320,marginVertical:45,marginLeft:15,padding:15},AccountSignInItem_Btns:{position:"absolute",bottom:15,left:15,right:15}}),m=(0,r.observer)((function(e){if(e.empty)return(0,b.jsxs)(a.View,{style:[v.AccountSignInItem,v.AccountSignInItem__empty],children:[(0,b.jsx)(g.RnText,{subTitle:!0,children:(0,u.intl)("No account",{})}),(0,b.jsx)(g.RnText,{children:(0,u.intl)("There is no account created",{})}),(0,b.jsx)(g.RnText,{children:(0,u.intl)("Tap the below button to create one",{})}),(0,b.jsx)(a.View,{style:v.AccountSignInItem_Btns,children:(0,b.jsx)(p.FooterActions,{onNext:(0,c.Nav)().goToPageAccountCreate,onNextText:(0,u.intl)("CREATE NEW ACCOUNT",{})})})]});if(!e.id)return null;var t=i.accountStore.accountsMap[e.id];if(!t)return null;var n=i.accountStore.pnSyncLoadingMap[e.id];return(0,b.jsxs)(a.View,{style:[v.AccountSignInItem,e.last&&v.AccountSignInItem__last],children:[(0,b.jsxs)(g.RnTouchableOpacity,{onPress:function(){return(0,c.Nav)().goToPageAccountUpdate({id:t.id})},children:[(0,b.jsx)(f.Field,{icon:o.mdiAccountCircleOutline,label:(0,u.intl)("USERNAME",{}),value:t.pbxUsername}),(0,b.jsx)(f.Field,{icon:o.mdiApplicationOutline,label:(0,u.intl)("TENANT",{}),value:t.pbxTenant}),(0,b.jsx)(f.Field,{icon:o.mdiWeb,label:(0,u.intl)("HOSTNAME",{}),value:t.pbxHostname}),(0,b.jsx)(f.Field,{icon:o.mdiServerNetwork,label:(0,u.intl)("PORT",{}),value:t.pbxPort})]}),(0,b.jsx)(f.Field,{label:(0,u.intl)("PUSH NOTIFICATION",{}),onValueChange:function(e){return i.accountStore.upsertAccount({id:t.id,pushNotificationEnabled:e})},type:"Switch",value:t.pushNotificationEnabled,loading:n}),(0,b.jsx)(f.Field,{label:"UC",onValueChange:function(e){return i.accountStore.upsertAccount({id:t.id,ucEnabled:e})},type:"Switch",value:t.ucEnabled}),(0,b.jsx)(a.View,{style:v.AccountSignInItem_Btns,children:(0,b.jsx)(p.FooterActions,{onBack:function(){d.RnAlert.prompt({title:(0,u.intl)("Remove Account",{}),message:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.View,{children:(0,b.jsxs)(g.RnText,{small:!0,children:[t.pbxUsername," - ",t.pbxHostname]})}),(0,b.jsx)(g.RnText,{children:(0,u.intl)("Do you want to remove this account?",{})})]}),onConfirm:function(){i.accountStore.removeAccount(t.id)}})},onBackIcon:o.mdiClose,onMore:function(){return(0,c.Nav)().goToPageAccountUpdate({id:t.id})},onMoreIcon:o.mdiDotsHorizontal,onNext:function(){(0,l.getAuthStore)().signIn(t),"web"!==a.Platform.OS&&(0,s.getCallStore)().endCallKeepAllCalls()},onNextText:(0,u.intl)("SIGN IN",{})})})]})}));t.AccountSignInItem=m},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PageAccountUpdate=void 0;var r=n(6),a=n(211),o=n(32),i=n(4),l=n(10),s=n(3),u=(0,r.observer)((function(e){return(0,s.jsx)(a.AccountCreateForm,{onBack:(0,l.Nav)().backToPageAccountSignIn,onSave:function(e){o.accountStore.upsertAccount(e),(0,l.Nav)().backToPageAccountSignIn()},title:(0,i.intl)("Update Account",{}),updating:o.accountStore.accountsMap[e.id]})}));t.PageAccountUpdate=u},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageCallBackgrounds=void 0;var a=r(n(34)),o=n(6),i=n(16),l=n(51),s=n(44),u=n(30),c=n(8),d=n(7),f=n(19),p=n(4),g=n(10),h=n(107),b=n(3),v=(0,o.observer)((function(){var e=(0,f.getCallStore)().calls.filter((function(e){return e.id!==(0,f.getCallStore)().ongoingCallId})),t=(0,f.getCallStore)().getOngoingCall(),n=function(e,t){var n=[i.mdiPhoneHangup].concat((0,a.default)(!e.answered&&e.incoming?[i.mdiPhone]:[])),r=[d.v.colors.danger].concat((0,a.default)(!e.answered&&e.incoming?[d.v.colors.primary]:[])),o=[e.hangupWithUnhold].concat((0,a.default)(!e.answered&&e.incoming?[function(){e.answer(),(0,f.getCallStore)().onSelectBackgroundCall(e)}]:[]));return(0,b.jsx)(l.UserItem,Object.assign({icons:n,iconColors:r,iconFuncs:o,lastMessage:e.answered?e.transferring?(0,p.intl)("Transferring",{}):e.holding?(0,p.intl)("On hold",{}):(0,b.jsx)(h.Duration,{children:e.answeredAt}):e.incoming?(0,p.intl)("Incoming Call",{}):(0,p.intl)("Dialing...",{}),selected:t},e),e.id)};return(0,b.jsxs)(u.Layout,{compact:!0,onBack:(0,g.Nav)().backToPageCallManage,title:(0,p.intl)("Background calls",{}),children:[(0,b.jsx)(s.Field,{isGroup:!0,label:(0,p.intl)("CURRENT CALL",{})}),(t?[t]:[]).map((function(e){return(0,b.jsx)(c.RnTouchableOpacity,{onPress:function(){return(0,g.Nav)().backToPageCallManage()},children:n(e,!0)},e.id)})),!!e.length&&(0,b.jsx)(s.Field,{hasMargin:!0,isGroup:!0,label:(0,p.intl)("BACKGROUND CALLS",{})}),e.map((function(e){return(0,b.jsx)(c.RnTouchableOpacity,{onPress:!e.answered&&e.incoming?void 0:function(){return(0,f.getCallStore)().onSelectBackgroundCall(e)},children:n(e)},e.id)}))]})}));t.PageCallBackgrounds=v},function(e,t,n){"use strict";n.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABU1BMVEUAAAD////////j4+Pm5ubm5ubg4Ovf3+fi4unj4+q+vsTe4+Pf4+Pg5OTe4uLf4uLf4uLe4eHg4OC9wMC5vLzg4uTh4ePh4+Pg4OHf3+Hf4OLg4OHf3+C1tbXf4eHg4OHf4OHg4OHg4OHg4OPf3+Hg4eHg4OHg4OHf4OHg4OLh4eLf4OGxsbGxsbHg4OHf3+Df4eLf4OHg4OHg4OHg4eHg4OHf3+Cqq6uqqqqoqKjf3+Df4ODf39+lpaWmpqbf3+ClpaXg4OHf4ODg4ODf3+Df4ODg4OCenp6fn5+goKChoaGjo6OlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+ysrKzs7O3t7e4uLi5ubm7u7u+vr6/v7/AwMDCwsLDw8PFxcXGxsbIyMjJycnMzMzNzc3W1tbX19fY2NjZ2dna2trc3Nzf39/f3+Dg4OCTBZWQAAAAR3RSTlMABAUJChQZICMkKzY3OT5HV15kbW6EkJGSmK+8wMHJy87Oz9DS1NXX2Nvb3N3f4OHi5Obt7e7v8fX29vb4+vr6+/v9/f7+/kiNpIAAAAGUSURBVBgZdcFpQ1JRFAXQLY6oZTk0UFraZHOaUWaGpHkohkgKyqwstIEE9v//FOK75953eW8thE2kHmXYkXmYmkCs0wsZOjJXTyHK0HX2uDaEHjObjLA5g7DBu4xxexCOZJqx0kmo/hVazV/1+u8mrccJGA+oDorSVTykuonARaqyqB2qC+ga2aaxI46PNLaSOLZI40BCDmksomOMKi8hBapxAPM0/orniMYVoO8Vje/i+Ukjm8Ak1Qfx1KjO4jLVe/FUqFJYpiqI5x3VEl5Q5cWTp3qONlVJPGWqNlpUFfFUqFpoUVXFU6VqoU31VTz7VG2sUf0TzxHVGpZpvZGQt7SWcInWroR8oZXCJK2muHJ0nEEiS+ubOOq0sn3AHB1VUTU65gCM01WUQJmuMXTcoksCdM3jWPI1rc8S2KW1NYKu8zQaJVGlBo1zCNzhiT0J2eOJGzD6V0j+qYkv96lB8kkCaji9X5BIhR/pYTgG1iXG+gDCZiXSLHqMPpMeT0cRZXo1J47c6jRiTd3fkK6X96YQ8h9ti83kCEQM1AAAAABJRU5ErkJggg=="},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageCallDtmfKeypad=void 0;var a,o,i,l=r(n(22)),s=r(n(5)),u=r(n(14)),c=r(n(53)),d=r(n(18)),f=r(n(17)),p=r(n(20)),g=(r(n(23)),n(9)),h=n(6),b=n(1),v=n(64),m=n(219),y=n(220),C=n(30),S=n(11),x=n(19),k=n(4),P=n(10),w=n(71),A=n(3),T=(0,h.observer)((o=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,l.default)(e,"txt",i,(0,c.default)(e)),e.txtRef=(0,b.createRef)(),e.txtSelection={start:0,end:0},e.showKeyboard=function(){var t;null===(t=e.txtRef.current)||void 0===t||t.focus()},e.sendKey=function(e){var t=(0,x.getCallStore)().getOngoingCall(),n=(0,S.getAuthStore)().getCurrentAccount();t&&n&&v.sip.sendDTMF({signal:e,sessionId:t.id,tenant:t.pbxTenant||n.pbxTenant,talkerId:t.pbxTalkerId||t.partyNumber})},e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=(0,x.getCallStore)().getOngoingCall();this.prevId&&this.prevId!==(null===e||void 0===e?void 0:e.id)&&(0,P.Nav)().backToPageCallManage(),this.prevId=null===e||void 0===e?void 0:e.id}},{key:"render",value:function(){var e=this,t=(0,x.getCallStore)().getOngoingCall();return(0,A.jsxs)(C.Layout,{title:null===t||void 0===t?void 0:t.getDisplayName(),description:(0,k.intl)("Keypad dial manually",{}),onBack:(0,P.Nav)().backToPageCallManage,children:[(0,A.jsx)(y.ShowNumber,{refInput:this.txtRef,selectionChange:w.RnKeyboard.isKeyboardShowing?void 0:function(t){Object.assign(e.txtSelection,{start:t.nativeEvent.selection.start,end:t.nativeEvent.selection.end})},setTarget:function(t){e.txt=t},value:this.txt}),!w.RnKeyboard.isKeyboardShowing&&(0,A.jsx)(m.KeyPad,{onPressNumber:function(t){e.sendKey(t);var n=e.txtSelection,r=n.end,a=n.start,o=Math.min(a,r),i=Math.max(a,r),l=""===t;l&&a===r&&a&&(o-=1);var s=e.txt;e.txt=s.substring(0,o)+t+s.substring(i);var u=o+(l?0:1);e.txtSelection.start=u,e.txtSelection.end=u},showKeyboard:this.showKeyboard})]})}}]),n}(b.Component),i=(0,p.default)(o.prototype,"txt",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=o))||a;t.PageCallDtmfKeypad=T},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.cancelRecentPn=void 0;var r=n(19);t.cancelRecentPn=function(e){return(0,r.getCallStore)().onSipUaCancel(e)}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getCameraSourceIds=t.getCameraSourceId=void 0;var a=r(n(12)),o=r(n(34)),i=r(n(13)),l=n(2),s=n(4),u=n(15),c=function(){var e=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.navigator.mediaDevices){e.next=4;break}return u.RnAlert.error({unexpectedErr:new Error("Can not access mediaDevices, check if your connection is https secured")}),e.abrupt("return",void 0);case 4:return e.abrupt("return",n.enumerateDevices().then((function(e){return e.find((function(e){return/videoinput/i.test(e.kind)&&t?/front/i.test(e.facing):/environment/i.test(e.facing)}))})).then((function(e){return(null===e||void 0===e?void 0:e.deviceId)||void 0})).catch((function(e){u.RnAlert.error({message:(0,s.intlDebug)("Failed to get front camera information",{}),err:e})})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getCameraSourceId=c;var d=function(){var e=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.navigator.mediaDevices){e.next=4;break}return u.RnAlert.error({unexpectedErr:new Error("Can not access mediaDevices, check if your connection is https secured")}),e.abrupt("return",[]);case 4:return e.abrupt("return",t.enumerateDevices().then((function(e){var t=e.filter((function(e){return/videoinput/i.test(e.kind)}));if(1===t.length)return[].concat((0,o.default)(t),(0,o.default)(t));var n=t.find((function(e){return"web"===l.Platform.OS?e.label.includes("Front"):e.facing.includes("front")})),r=t.find((function(e){return"web"===l.Platform.OS?e.label.includes("Back"):e.facing.includes("environment")})),a=[];return n&&a.push(n),r&&a.push(r),a})).catch((function(e){return u.RnAlert.error({message:(0,s.intlDebug)("Failed to get front camera information",{}),err:e}),[]})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.getCameraSourceIds=d},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.turnConfig=void 0;t.turnConfig={}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageCallKeypad=void 0;var a,o,i,l=r(n(22)),s=r(n(5)),u=r(n(14)),c=r(n(53)),d=r(n(18)),f=r(n(17)),p=r(n(20)),g=(r(n(23)),n(9)),h=n(6),b=n(1),v=n(219),m=n(220),y=n(30),C=n(19),S=n(4),x=n(15),k=n(71),P=n(3),w=(0,h.observer)((o=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,l.default)(e,"txt",i,(0,c.default)(e)),e.txtRef=(0,b.createRef)(),e.txtSelection={start:0,end:0},e.showKeyboard=function(){var t;null===(t=e.txtRef.current)||void 0===t||t.focus()},e.callVoice=function(){e.txt=e.txt.trim(),e.txt?(0,C.getCallStore)().startCall(e.txt):x.RnAlert.error({message:(0,S.intlDebug)("No target to call",{})})},e}return(0,u.default)(n,[{key:"render",value:function(){var e=this;return(0,P.jsxs)(y.Layout,{description:(0,S.intl)("Keypad dial manually",{}),fabOnNext:k.RnKeyboard.isKeyboardShowing?this.callVoice:void 0,fabOnNextText:(0,S.intl)("DIAL",{}),menu:"call",subMenu:"keypad",title:(0,S.intl)("Keypad",{}),children:[(0,P.jsx)(m.ShowNumber,{refInput:this.txtRef,selectionChange:function(t){Object.assign(e.txtSelection,{start:t.nativeEvent.selection.end,end:t.nativeEvent.selection.end})},setTarget:function(t){e.txt=t},value:this.txt}),!k.RnKeyboard.isKeyboardShowing&&(0,P.jsx)(v.KeyPad,{callVoice:this.callVoice,onPressNumber:function(t){var n=e.txtSelection,r=n.end,a=n.start,o=Math.min(a,r),i=Math.max(a,r),l=""===t;l&&a===r&&a&&(o-=1);var s=e.txt;e.txt=s.substring(0,o)+t+s.substring(i);var u=o+(l?0:1);e.txtSelection.start=u,e.txtSelection.end=u},showKeyboard:this.showKeyboard})]})}}]),n}(b.Component),i=(0,p.default)(o.prototype,"txt",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=o))||a;t.PageCallKeypad=w},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PageCallParks2=void 0;var r=n(332),a=n(3);t.PageCallParks2=function(e){return(0,a.jsx)(r.PageCallParks,Object.assign({},e,{callParks2:!0}))}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageCallRecents=void 0;var a,o=r(n(5)),i=r(n(14)),l=r(n(18)),s=r(n(17)),u=n(6),c=r(n(77)),d=n(1),f=n(2),p=n(16),g=n(51),h=n(44),b=n(30),v=n(32),m=n(11),y=n(19),C=n(26),S=n(4),x=n(718),k=n(3),P=(0,u.observer)(a=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){if("ios"===f.Platform.OS){var t=function(){"active"===f.AppState.currentState&&x.PushNotification.resetBadgeNumber()};t(),e.appStateSubscription=f.AppState.addEventListener("change",t)}},e.componentWillUnmount=function(){var t;null===(t=e.appStateSubscription)||void 0===t||t.remove()},e.isMatchUser=function(e){return e.partyNumber.includes(C.contactStore.callSearchRecents)?e.id:""},e.getAvatar=function(e){return{id:e,avatar:(C.contactStore.getUcUserById(e)||{}).avatar}},e.getMatchedCalls=function(){var t=(0,m.getAuthStore)(),n=t.getCurrentData();n||v.accountStore.findDataAsync(t.getCurrentAccount());var r=((null===n||void 0===n?void 0:n.recentCalls.filter(e.isMatchUser))||[]).filter((function(e){return"string"===typeof e.created&&(13===(e.created+"").length||14===(e.created+"").length)})),a=(0,c.default)().format("MMM D");return r.map((function(e){return Object.assign({},e,{created:(e.created+"").replace(" - "+a,"")})}))},e}return(0,i.default)(n,[{key:"render",value:function(){var e=this,t=this.getMatchedCalls();return(0,k.jsxs)(b.Layout,{description:(0,S.intl)("Voicemail and recent calls",{}),menu:"call",subMenu:"recents",title:(0,S.intl)("Recents",{}),children:[(0,k.jsx)(h.Field,{icon:p.mdiMagnify,label:(0,S.intl)("SEARCH NAME, PHONE NUMBER ...",{}),onValueChange:function(e){C.contactStore.callSearchRecents=e},value:C.contactStore.callSearchRecents}),(0,k.jsx)(h.Field,{isGroup:!0,label:(0,S.intl)("VOICEMAIL ({{$0}})",{$0:(0,y.getCallStore)().newVoicemailCount})}),(0,k.jsx)(g.UserItem,{iconFuncs:[function(){return(0,y.getCallStore)().startCall("8")}],icons:[p.mdiPhone],name:(0,S.intl)("Voicemail",{}),isVoicemail:!0}),(0,k.jsx)(h.Field,{isGroup:!0,label:(0,S.intl)("RECENT CALLS ({{$0}})",{$0:t.length})}),t.map((function(t,n){var r;return(0,d.createElement)(g.UserItem,Object.assign({iconFuncs:[function(){return(0,y.getCallStore)().startVideoCall(t.partyNumber)},function(){return(0,y.getCallStore)().startCall(t.partyNumber)}]},C.contactStore.getUcUserById(t.partyNumber),{icons:[p.mdiVideo,p.mdiPhone],isRecentCall:!0,canChat:null===(r=(0,m.getAuthStore)().getCurrentAccount())||void 0===r?void 0:r.ucEnabled,key:n},e.getAvatar(t.partyNumber),t))}))]})}}]),n}(d.Component))||a;t.PageCallRecents=P},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PushNotification=void 0;var a=r(n(12)),o=r(n(13));n(333);var i=r(n(213)),l=r(n(719)),s=n(334),u="",c=function(e){e&&(u=e)},d="",f=function(e){e&&(d=e)},p=function(){var e=(0,o.default)(a.default.mark((function e(t,n){var r,o,i,l,u=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],o=null!==t&&void 0!==t&&t.getData?t.getData():t,l=o,(i=o)&&i.dictionaryPayload&&((l=i.dictionaryPayload).callkeepUuid=i.callkeepUuid),e.next=7,n();case 7:return e.next=9,(0,s.parse)(l,r);case 9:if(e.sent){e.next=12;break}return e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g={register:function(){var e=(0,o.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),l.default.addEventListener("register",c),l.default.addEventListener("notification",(function(e){return p(e,t)})),l.default.addEventListener("didLoadWithEvents",(function(e){null!==e&&void 0!==e&&e.length&&e.forEach((function(e){var n=e.name,r=e.data;n===l.default.RNVoipPushRemoteNotificationsRegisteredEvent?"string"===typeof r&&c(r):n===l.default.RNVoipPushRemoteNotificationReceivedEvent&&p(r,t)}))})),l.default.registerVoipToken(),i.default.addEventListener("register",f),i.default.addEventListener("notification",(function(e){return p(e,t)})),i.default.addEventListener("localNotification",(function(e){return p(e,t,!0)})),i.default.requestPermissions(),e.next=11,i.default.getInitialNotification();case 11:n=e.sent,p(n,t,!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getVoipToken:function(){return Promise.resolve(u)},getToken:function(){return Promise.resolve(d)},resetBadgeNumber:function(){i.default.setApplicationIconBadgeNumber(0)}};t.PushNotification=g},,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageCallTransferChooseUser=void 0;var a,o,i,l=r(n(22)),s=r(n(5)),u=r(n(14)),c=r(n(53)),d=r(n(18)),f=r(n(17)),p=r(n(20)),g=(r(n(23)),n(21)),h=n(9),b=n(6),v=n(1),m=n(2),y=n(16),C=n(222),S=n(51),x=n(44),k=n(30),P=n(216),w=n(11),A=n(19),T=n(26),I=n(4),j=n(10),_=n(65),R=n(3),O=(0,b.observer)((o=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,l.default)(e,"txtSearch",i,(0,c.default)(e)),e.resolveMatch=function(e){var t,n,r,a,o=T.contactStore.getPbxUserById(e),i=T.contactStore.getUcUserById(e)||{};return{name:o.name,avatar:i.avatar,number:e,status:i.status,calling:!(null===(t=o.talkers)||void 0===t||!t.filter((function(e){return"calling"===e.status})).length),ringing:!(null===(n=o.talkers)||void 0===n||!n.filter((function(e){return"ringing"===e.status})).length),talking:!(null===(r=o.talkers)||void 0===r||!r.filter((function(e){return"talking"===e.status})).length),holding:!(null===(a=o.talkers)||void 0===a||!a.filter((function(e){return"holding"===e.status})).length)}},e.renderUserSelectionMode=function(){var t=_.userStore.filterUser(e.txtSearch,!0).displayUsers;return(0,R.jsx)(C.ContactSectionList,{sectionListData:t,isTransferCall:!0})},e.renderAllUserMode=function(){if(!(0,w.getAuthStore)().getCurrentAccount())return null;var t=T.contactStore.pbxUsers.map((function(e){return e.id})).map(e.resolveMatch).filter((function(t){var n=t.name.toLowerCase(),r=e.txtSearch.toLowerCase(),a=t.number.toLowerCase();return n.includes(r)||a.includes(r)})),n={};t.forEach((function(e){e.name=e.name||e.number||"";var t=e.name.charAt(0).toUpperCase();/[A-Z]/.test(t)||(t="#"),n[t]||(n[t]=[]),n[t].push(e)}));var r=Object.keys(n).map((function(e){return{title:e,data:n[e]}}));return(r=(0,g.orderBy)(r,"title")).forEach((function(e){e.data=(0,g.orderBy)(e.data,"name")})),(0,R.jsx)(m.SectionList,{sections:r,keyExtractor:function(e,t){return e.number},renderItem:function(e){var t=e.item,n=e.index;return(0,R.jsx)(B,{item:t,index:n})},renderSectionHeader:function(e){var t=e.section.title;return(0,R.jsx)(x.Field,{isGroup:!0,label:t})}})},e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){T.contactStore.pbxUsers.length||T.contactStore.getPbxUsers(),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=(0,A.getCallStore)().getOngoingCall();this.prevId&&this.prevId!==(null===e||void 0===e?void 0:e.id)&&(0,j.Nav)().backToPageCallManage(),this.prevId=null===e||void 0===e?void 0:e.id}},{key:"render",value:function(){var e=this,t=(0,w.getAuthStore)(),n=t.getCurrentAccount();if(!n)return null;var r=t.isBigMode()||!n.pbxLocalAllUsers;return(0,R.jsxs)(k.Layout,{description:(0,I.intl)("Select target to start transfer",{}),onBack:(0,j.Nav)().backToPageCallManage,menu:"call_transfer",subMenu:"list_user",isTab:!0,title:(0,I.intl)("Transfer",{}),children:[(0,R.jsx)(x.Field,{icon:y.mdiMagnify,label:(0,I.intl)("SEARCH FOR USERS",{}),onValueChange:function(t){e.txtSearch=t},value:this.txtSearch}),r?this.renderUserSelectionMode():this.renderAllUserMode()]})}}]),n}(v.Component),i=(0,p.default)(o.prototype,"txtSearch",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=o))||a;t.PageCallTransferChooseUser=O,(0,P.setPageCallTransferChooseUser)(O);var B=(0,b.observer)((function(e){var t=e.item,n=e.index,r=(0,A.getCallStore)().getOngoingCall();return(0,R.jsx)(S.UserItem,Object.assign({iconFuncs:[function(){return null===r||void 0===r?void 0:r.transferAttended(t.number)},function(){return null===r||void 0===r?void 0:r.transferBlind(t.number)}],icons:[y.mdiPhoneForward,y.mdiPhone]},t),n)}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Dropdown=void 0;var r=n(2),a=n(722),o=n(7),i=n(3),l=r.StyleSheet.create({container:Object.assign({position:"absolute",borderRadius:5,backgroundColor:"white",paddingVertical:5,paddingHorizontal:10},r.Platform.select({ios:{shadowColor:o.v.borderBg,shadowOpacity:.45,shadowRadius:5,shadowOffset:{width:5,height:10}},android:{elevation:10},web:{boxShadow:"0px 0px 10px "+o.v.borderBg}}))});t.Dropdown=function(e){var t=e.items,n=void 0===t?[]:t,o=e.position,s=void 0===o?{}:o;return(0,i.jsx)(r.View,{style:[l.container,Object.assign({},s)],children:n.map((function(e,t){return(0,i.jsx)(a.DropdownItem,{title:e.title,onPress:e.onPress,disabled:e.disabled},"DropdownItem - "+t)}))})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownItem=void 0;var r=n(2),a=n(70),o=n(43),i=n(7),l=n(3),s=r.StyleSheet.create({container:{paddingVertical:5},disableText:{color:i.v.colors.greyTextChat}});t.DropdownItem=function(e){var t=e.title,n=e.onPress,r=e.disabled,i=void 0!==r&&r;return(0,l.jsx)(o.RnTouchableOpacity,{onPress:n,style:s.container,disabled:i,children:(0,l.jsx)(a.RnText,{style:i&&s.disableText,children:t})})}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageCallTransferDial=void 0;var a,o,i,l=r(n(22)),s=r(n(5)),u=r(n(14)),c=r(n(53)),d=r(n(18)),f=r(n(17)),p=r(n(20)),g=(r(n(23)),n(9)),h=n(6),b=n(1),v=n(219),m=n(220),y=n(30),C=n(216),S=n(19),x=n(4),k=n(10),P=n(15),w=n(71),A=n(3),T=(0,h.observer)((o=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,l.default)(e,"txt",i,(0,c.default)(e)),e.txtRef=(0,b.createRef)(),e.txtSelection={start:0,end:0},e.showKeyboard=function(){var t;null===(t=e.txtRef.current)||void 0===t||t.focus()},e.transferBlind=function(){var t;e.txt=e.txt.trim(),e.txt?null===(t=(0,S.getCallStore)().getOngoingCall())||void 0===t||t.transferBlind(e.txt):P.RnAlert.error({message:(0,x.intlDebug)("No target",{})})},e.transferAttended=function(){var t;e.txt=e.txt.trim(),e.txt?null===(t=(0,S.getCallStore)().getOngoingCall())||void 0===t||t.transferAttended(e.txt):P.RnAlert.error({message:(0,x.intlDebug)("No target",{})})},e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=(0,S.getCallStore)();this.prevId&&this.prevId!==e.ongoingCallId&&(0,k.Nav)().backToPageCallManage(),this.prevId=e.ongoingCallId}},{key:"render",value:function(){var e=this;return(0,A.jsxs)(y.Layout,{description:(0,x.intl)("Select target to start transfer",{}),onBack:(0,k.Nav)().backToPageCallManage,menu:"call_transfer",subMenu:"external_number",isTab:!0,title:(0,x.intl)("Transfer",{}),children:[(0,A.jsx)(m.ShowNumber,{refInput:this.txtRef,selectionChange:function(t){Object.assign(e.txtSelection,{start:t.nativeEvent.selection.end,end:t.nativeEvent.selection.end})},setTarget:function(t){e.txt=t},value:this.txt}),!w.RnKeyboard.isKeyboardShowing&&(0,A.jsx)(v.KeyPad,{callVoice:this.transferBlind,callVoiceForward:this.transferAttended,onPressNumber:function(t){var n=e.txtSelection,r=n.end,a=n.start,o=Math.min(a,r),i=Math.max(a,r),l=""===t;l&&a===r&&a&&(o-=1);var s=e.txt;e.txt=s.substring(0,o)+t+s.substring(i);var u=o+(l?0:1);e.txtSelection.start=u,e.txtSelection.end=u},showKeyboard:this.showKeyboard})]})}}]),n}(b.Component),i=(0,p.default)(o.prototype,"txt",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=o))||a;t.PageCallTransferDial=T,(0,C.setPageCallTransferDial)(T)},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageChatDetail=void 0;var a,o,i=r(n(12)),l=r(n(13)),s=r(n(5)),u=r(n(14)),c=r(n(18)),d=r(n(17)),f=r(n(20)),p=n(9),g=n(6),h=n(1),b=n(2),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(335)),m=n(40),y=n(108),C=n(336),S=n(337),x=n(30),k=n(8),P=n(7),w=n(19),A=n(37),T=n(26),I=n(4),j=n(10),_=n(15),R=n(49),O=n(33),B=n(214),M=n(338),U=n(106),L=n(106),F=n(3);function D(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}var V=b.StyleSheet.create({LoadMore:{alignSelf:"center",paddingBottom:15,fontSize:P.v.fontSizeSmall,paddingHorizontal:10},LoadMore__btn:{color:P.v.colors.primary},LoadMore__finished:{color:P.v.colors.warning}}),N=(0,g.observer)((o=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loadingRecent:!1,loadingMore:!1,editingText:"",blobFile:{url:"",fileType:""},topic_id:"",emojiTurnOn:!1,blobVideo:void 0},e.numberOfChatsPerLoadMore=y.numberOfChatsPerLoad,e.edittingTextEmoji="",e.editingTextReplace=!1,e.renderChatInput=function(){return(0,F.jsx)(S.ChatInput,{onEmojiTurnOn:function(){return e.setState({emojiTurnOn:!e.state.emojiTurnOn},(function(){var t;null===(t=e.view)||void 0===t||t.scrollToEnd()}))},onSelectionChange:e.onSelectionChange,onTextChange:e.setEditingText,onTextSubmit:e.submitEditingText,openFileRnPicker:function(){return(0,M.pickFile)(e.sendFile)},text:e.state.editingText})},e.onSelectionChange=function(t){var n=t.nativeEvent.selection;e.editingTextReplace=!1,n.start!==n.end?(e.edittingTextEmoji=e.state.editingText.substring(n.start,n.end),e.editingTextReplace=!0):e.edittingTextEmoji=e.state.editingText.substring(0,n.start)},e.emojiSelectFunc=function(t){var n=e.edittingTextEmoji.concat(t);""===e.state.editingText?(e.setState({editingText:t}),e.edittingTextEmoji=t):e.editingTextReplace?(e.setState({editingText:e.state.editingText.replace(e.edittingTextEmoji,t)}),e.editingTextReplace=!1,e.edittingTextEmoji=t):(e.setState({editingText:e.state.editingText.replace(e.edittingTextEmoji,n)}),e.edittingTextEmoji=e.edittingTextEmoji.concat(t))},e.setViewRef=function(t){e.view=t},e.justMounted=!0,e.closeToBottom=!0,e.currentScrollPosition=0,e.isLoadingMore=!1,e.onContentSizeChange=function(t,n){if(e.view&&!e.state.emojiTurnOn){var r,a;if(e.closeToBottom)null===(r=e.view)||void 0===r||r.scrollToEnd({animated:!e.justMounted}),e.justMounted&&(e.justMounted=!1);if(n&&e.isLoadingMore)e.isLoadingMore=!1,null===(a=e.view)||void 0===a||a.scrollTo({y:n-e.currentScrollPosition,animated:!1})}},e.onScroll=function(t){var n=t.nativeEvent.layoutMeasurement.height,r=t.nativeEvent.contentOffset,a=t.nativeEvent.contentSize.height;e.closeToBottom=n+r.y>=a-20,e.currentScrollPosition=a},e.resolveChat=function(t){var n=e.chatById[t],r=A.chatStore.getFileById(n.file),a=n.text,o=e.resolveCreator(n.creator);return{id:t,creatorId:o.id,creatorName:o.name||o.id,creatorAvatar:o.avatar,text:a,type:n.type,file:r,created:n.created,createdByMe:o.id===e.me.id}},e.me=m.uc.me(),e.resolveCreator=function(t){return t===e.me.id?e.me:T.contactStore.getUcUserById(t)||{}},e.loadRecent=function(){e.setState({loadingRecent:!0});var t=e.props.buddy;m.uc.getBuddyChats(t,{max:y.numberOfChatsPerLoad}).then((function(n){A.chatStore.pushMessages(t,n),O.BackgroundTimer.setTimeout(e.onContentSizeChange,300)})).catch((function(e){_.RnAlert.error({message:(0,I.intlDebug)("Failed to get recent chats",{}),err:e})})).then((function(){e.setState({loadingRecent:!1})}))},e.loadMore=function(){e.isLoadingMore=!0,e.setState({loadingMore:!0}),e.numberOfChatsPerLoadMore=e.numberOfChatsPerLoadMore+y.numberOfChatsPerLoad;var t=(A.chatStore.getMessagesByThreadId(e.props.buddy)[0]||{}).created||0,n={max:e.numberOfChatsPerLoadMore,end:t},r=e.props.buddy;m.uc.getBuddyChats(r,n).then((function(e){A.chatStore.pushMessages(r,e)})).catch((function(e){_.RnAlert.error({message:(0,I.intlDebug)("Failed to get more chats",{}),err:e})})).then((function(){e.setState({loadingMore:!1})})).then((function(){var t=e.props.buddy;A.chatStore.getMessagesByThreadId(t).length<e.numberOfChatsPerLoadMore&&A.chatStore.updateThreadConfig(t,!1,{allMessagesLoaded:!0})}))},e.setEditingText=function(t){e.setState({editingText:t})},e.submitting=!1,e.submitEditingText=function(){var t=e.state.editingText.trim();t&&!e.submitting&&(e.state.emojiTurnOn&&e.setState({emojiTurnOn:!e.state.emojiTurnOn}),e.submitting=!0,m.uc.sendBuddyChatText(e.props.buddy,t).then(e.onSubmitEditingTextSuccess).catch(e.onSubmitEditingTextFailure).then((function(){e.submitting=!1})))},e.onSubmitEditingTextSuccess=function(t){A.chatStore.pushMessages(e.props.buddy,t),e.setState({editingText:""})},e.onSubmitEditingTextFailure=function(e){_.RnAlert.error({message:(0,I.intlDebug)("Failed to send the message",{}),err:e})},e.acceptFile=function(t){m.uc.acceptFile(t.id).then((function(n){return e.onAcceptFileSuccess(n,t)})).catch(e.onAcceptFileFailure)},e.onAcceptFileSuccess=function(e,t){var n=(0,B.formatFileType)(t.name),r=new FileReader;r.onload=function(){var e=(0,l.default)(i.default.mark((function e(r){var a,o,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(a=r.target)||void 0===a?void 0:a.result,l=A.chatStore.getFileById(t.id)){e.next=4;break}return e.abrupt("return");case 4:Object.assign(l,{url:o,fileType:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsDataURL(e),(0,U.saveBlob)(e,t.name)},e.onAcceptFileFailure=function(e){_.RnAlert.error({message:(0,I.intlDebug)("Failed to accept file",{}),err:e})},e.rejectFile=function(t){m.uc.rejectFile(t).catch(e.onRejectFileFailure)},e.onRejectFileFailure=function(e){_.RnAlert.error({message:(0,I.intlDebug)("Failed to reject file",{}),err:e})},e.readFile=function(t){var n=(0,B.formatFileType)(t.name);e.setState({blobFile:{url:t.uri,fileType:n}})},e.handleSaveBlobFileWeb=function(){var t=(0,l.default)(i.default.mark((function t(n,r,a){var o,l;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.props.buddy,t.prev=1,t.next=4,(0,L.saveBlobFile)(r.id,r.topic_id,r.fileType,n);case 4:l=t.sent,Object.assign(r,{url:l}),A.chatStore.upsertFile(r),A.chatStore.pushMessages(o,a),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error("PageChatDetail.handleSaveBlobFileWeb err",t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n,r){return t.apply(this,arguments)}}(),e.sendFile=function(t){e.readFile(t);var n=T.contactStore.getUcUserById(e.props.buddy);m.uc.sendFile(null===n||void 0===n?void 0:n.id,t).then((function(n){e.setState({topic_id:n.file.topic_id});var r=e.props.buddy;Object.assign(n.file,e.state.blobFile,{save:"success"}),Object.assign(n.file,{target:{user_id:r}}),"web"===b.Platform.OS?e.handleSaveBlobFileWeb(t,n.file,n.chat):(A.chatStore.upsertFile(n.file),A.chatStore.pushMessages(r,n.chat))})).catch((function(e){_.RnAlert.error({message:(0,I.intlDebug)("Failed to send file",{}),err:e})}))},e}return(0,u.default)(n,[{key:"chatById",get:function(){return(0,R.arrToMap)(A.chatStore.getMessagesByThreadId(this.props.buddy),"id",(function(e){return e}))}},{key:"componentDidMount",value:function(){this.loadRecent();var e=this.props.buddy;m.uc.readUnreadChats(e),A.chatStore.updateThreadConfig(e,!1,{isUnread:!1})}},{key:"componentDidUpdate",value:function(){var e=this.props.buddy;A.chatStore.getThreadConfig(e).isUnread&&A.chatStore.updateThreadConfig(e,!1,{isUnread:!1})}},{key:"componentWillUnmount",value:function(){if("web"===b.Platform.OS){var e=this.state.topic_id;e&&caches.delete(e)}}},{key:"render",value:function(){var e,t=this,n=this.props.buddy,r=A.chatStore.getThreadConfig(n),a=r.allMessagesLoaded,o=r.isUnread,i=this.state,l=i.loadingMore,s=i.loadingRecent,u=i.emojiTurnOn,c=A.chatStore.getMessagesByThreadId(this.props.buddy),d=c?null===(e=c[c.length-1])||void 0===e?void 0:e.text:void 0,f=u&&o;return(0,F.jsxs)(x.Layout,{compact:!0,containerOnContentSizeChange:this.onContentSizeChange,containerOnScroll:this.onScroll,containerRef:this.setViewRef,fabRender:this.renderChatInput,onBack:(0,j.Nav)().backToPageChatRecents,title:(0,T.getPartyName)(n)||n,isShowToastMessage:f,incomingMessage:d,dropdown:[{label:(0,I.intl)("Start voice call",{}),onPress:function(){return(0,w.getCallStore)().startCall(n)}},{label:(0,I.intl)("Start video call",{}),onPress:function(){return(0,w.getCallStore)().startVideoCall(n)}}],children:[s?(0,F.jsx)(k.RnText,{style:V.LoadMore,children:(0,I.intl)("Loading...",{})}):a?(0,F.jsx)(k.RnText,{center:!0,style:[V.LoadMore,V.LoadMore__finished],children:A.chatStore.getMessagesByThreadId(this.props.buddy).length?(0,I.intl)("All messages in this thread have been loaded",{}):(0,I.intl)("There's currently no message in this thread",{})}):(0,F.jsx)(k.RnTouchableOpacity,{onPress:l?void 0:function(){return t.loadMore()},children:(0,F.jsx)(k.RnText,{bold:!l,style:[V.LoadMore,!l&&V.LoadMore__btn],children:l?(0,I.intl)("Loading...",{}):(0,I.intl)("Load more messages",{})})}),(0,F.jsx)(C.MessageList,{acceptFile:this.acceptFile,list:c,loadMore:this.loadMore,rejectFile:this.rejectFile,resolveChat:this.resolveChat}),u&&(0,F.jsx)(b.View,{children:(0,F.jsx)(v.default,{category:v.Categories.emotion,columns:10,onEmojiSelected:function(e){return t.emojiSelectFunc(e)},showHistory:!0,showSearchBar:!0,showSectionTitles:!0,showTabs:!0})})]})}}]),n}(h.Component),(0,f.default)(o.prototype,"chatById",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"chatById"),o.prototype),a=o))||a;t.PageChatDetail=N},,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var a,o=r(n(5)),i=r(n(14)),l=r(n(18)),s=r(n(17)),u=n(6),c=n(1),d=n(2),f=r(n(727)),p=r(n(63)),g=n(16),h=n(4),b=n(15),v=n(85),m=n(88),y=n(330),C=n(739),S=n(8),x=n(7),k=n(3),P=d.StyleSheet.create({Message:Object.assign({position:"relative",paddingBottom:5,paddingHorizontal:10,overflow:"hidden"},d.Platform.select({web:{maxWidth:"calc(100vw - 60px)"},default:{maxWidth:d.Dimensions.get("screen").width-60}})),File:{marginTop:0},Image:{width:150,height:150},Message__call:{fontSize:x.v.fontSizeSmall,color:x.v.colors.warning},Message_File_Button_Wrapper:{flexDirection:"row"},Message_File_Button:{flex:1,paddingVertical:1,paddingHorizontal:8,fontSize:12,marginTop:4,borderRadius:4},Message_File_Cancel_Button:{color:x.v.colors.danger,borderWidth:1,borderColor:x.v.colors.danger},Message_File_Accept_Button:{backgroundColor:x.v.colors.primary,borderWidth:1,borderColor:x.v.colors.primary,marginLeft:4,color:"#fff"},Message_File_Preview_Wrapper:{flexDirection:"row",alignItems:"flex-start"},Message_File_Preview_Info:Object.assign({marginLeft:5},d.Platform.select({web:{width:"calc(100vw - 119px)"},default:{width:d.Dimensions.get("screen").width-119}})),Message_File_Preview_Info_Size:{color:"#9e9e9e",fontSize:13},Message_File_Preview_Status:{fontWeight:x.v.fontWeight},Message_File_Preview_Status__Success:{color:x.v.colors.primary},Message_File_Preview_Status__Failed:{color:x.v.colors.danger},Link:Object.assign({color:x.v.colors.primary,padding:0},d.Platform.select({web:{display:"inline"}}))}),w=(0,u.observer)((function(e){return(0,k.jsx)(d.View,{style:[P.File,P.Message],children:(0,k.jsxs)(d.View,{children:[(0,k.jsxs)(d.View,{style:P.Message_File_Preview_Wrapper,children:[(0,k.jsx)(S.RnIcon,{path:g.mdiFile,size:50}),(0,k.jsxs)(d.View,{style:P.Message_File_Preview_Info,children:[(0,k.jsx)(S.RnText,{numberOfLines:1,children:e.name}),(0,k.jsxs)(S.RnText,{style:P.Message_File_Preview_Info_Size,children:[e.size," KB"]})]})]}),(0,k.jsxs)(d.View,{style:P.Message_File_Button_Wrapper,children:["waiting"===e.state&&"image"!==e.fileType&&(0,k.jsx)(S.RnTouchableOpacity,{onPress:e.reject,children:(0,k.jsx)(S.RnText,{style:[P.Message_File_Button,P.Message_File_Cancel_Button],children:"Cancel"})}),!!e.incoming&&"waiting"===e.state&&"image"!==e.fileType&&(0,k.jsx)(S.RnTouchableOpacity,{onPress:e.accept,children:(0,k.jsx)(S.RnText,{style:[P.Message_File_Button,P.Message_File_Accept_Button],children:"Accept"})})]}),"success"===e.state&&"image"!==e.fileType&&(0,k.jsxs)(S.RnText,{style:[P.Message_File_Preview_Status,P.Message_File_Preview_Status__Success],children:["(",(0,h.intl)("Success",{}),")"]}),"failure"===e.state&&"image"!==e.fileType&&(0,k.jsxs)(S.RnText,{style:[P.Message_File_Preview_Status,P.Message_File_Preview_Status__Failed],children:["(",(0,h.intl)("Failed",{}),")"]}),"stopped"===e.state&&"image"!==e.fileType&&(0,k.jsxs)(S.RnText,{style:[P.Message_File_Preview_Status,P.Message_File_Preview_Status__Failed],children:["(",(0,h.intl)("Canceled",{}),")"]})]})})})),A=(0,u.observer)(a=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onLinkPress=function(e){"web"!==d.Platform.OS?d.Linking.canOpenURL(e)?d.Linking.openURL(e):b.RnAlert.error({message:(0,h.intlDebug)("Can not open the url",{})}):window.open(e,"_blank","noopener")},e.onLinkLongPress=function(t){v.RnPicker.open({options:[{key:2,label:(0,h.intl)("Copy link",{}),icon:g.mdiDotsHorizontal},{key:3,label:(0,h.intl)("Share link to external app",{}),icon:g.mdiDotsHorizontal},{key:0,label:(0,h.intl)("Copy message",{}),icon:g.mdiDotsHorizontal},{key:1,label:(0,h.intl)("Share message to external app",{}),icon:g.mdiDotsHorizontal}],onSelect:function(n){return e.onRnPickerSelect(n,t)}})},e.onMessagePress=function(){v.RnPicker.open({options:[{key:0,label:(0,h.intl)("Copy message",{}),icon:g.mdiDotsHorizontal},{key:1,label:(0,h.intl)("Share message to external app",{}),icon:g.mdiDotsHorizontal}],onSelect:e.onRnPickerSelect})},e.onRnPickerSelect=function(t,n){var r=t&&1!==t?n:e.props.text;t&&2!==t?p.default.open({message:r}):d.Clipboard.setString(r)},e}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,t=e.file,n=t&&("image"===t.fileType||"video"===t.fileType),r="web"===d.Platform.OS?d.View:S.RnTouchableOpacity,a=(0,m.formatChatContent)(e),o=a.text,i=a.isTextOnly;return(0,k.jsxs)(k.Fragment,{children:[!!o&&!t&&(0,k.jsx)(r,{style:P.Message,onLongPress:this.onMessagePress,children:(0,k.jsx)(f.default,{onPress:this.onLinkPress,linkStyle:P.Link,onLongPress:this.onLinkLongPress,children:(0,k.jsx)(S.RnText,{style:!i&&P.Message__call,children:(0,y.trimHtml)(o)})})}),!!t&&n&&(0,k.jsx)(C.ItemImageVideoChat,Object.assign({},t)),!!t&&!n&&(0,k.jsx)(w,Object.assign({},e.file,{accept:function(){return e.acceptFile(e.file)},createdByMe:e.createdByMe,reject:function(){return e.rejectFile(e.file)}}))]})}}]),n}(c.Component))||a;t.Message=A},,,,,,,,,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ItemImageVideoChat=void 0;var r=n(6),a=n(2),o=n(40),i=n(16),l=n(4),s=n(15),u=n(740),c=n(8),d=n(43),f=n(7),p=n(3),g=a.StyleSheet.create({vMessage:Object.assign({marginBottom:5,marginLeft:10},a.Platform.select({web:{width:"calc(100vw - 119px)"},default:{width:a.Dimensions.get("screen").width-119}})),textFileInfo:{color:f.v.colors.greyTextChat,fontSize:13},textFileInfoLineThrough:{color:f.v.colors.greyTextChat,fontSize:13,textDecorationLine:"line-through"},vHorizontal:{flexDirection:"row",alignItems:"center"}}),h=(0,r.observer)((function(e){var t,n,r=e.incoming||null===(t=e.target)||void 0===t||!t.user_id?"":" -> "+(null===(n=e.target)||void 0===n?void 0:n.user_id),f="stopped"===e.state,h=f||"success"===e.state||"failure"===e.state,b=f?g.textFileInfoLineThrough:g.textFileInfo,v=function(e){s.RnAlert.error({message:(0,l.intlDebug)("Failed to reject file",{}),err:e})};return(0,p.jsx)(a.View,{children:(0,p.jsxs)(a.View,{style:g.vMessage,children:[(0,p.jsxs)(c.RnText,{numberOfLines:2,style:b,children:[e.name,r]}),(0,p.jsxs)(a.View,{style:g.vHorizontal,children:[(0,p.jsxs)(c.RnText,{style:b,children:[(0,u.formatBytes)((null===e||void 0===e?void 0:e.size)||0,2)," ("+e.transferPercent+"%) "]}),!h&&(0,p.jsx)(d.RnTouchableOpacity,{onPress:function(){o.uc.rejectFile(e).catch(v)},children:(0,p.jsx)(c.RnIcon,{path:i.mdiCloseCircle,color:"black",size:13})})]}),(0,p.jsx)(c.RnImageVideoLoader,Object.assign({},e))]})})}));t.ItemImageVideoChat=h},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatBytes=void 0;t.formatBytes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!(e=+e))return"0 Bytes";var n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,o)).toFixed(r))+""+a[o]}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageChatGroupCreate=void 0;var a,o=r(n(34)),i=r(n(5)),l=r(n(14)),s=r(n(18)),u=r(n(17)),c=n(6),d=n(1),f=n(40),p=n(51),g=n(44),h=n(30),b=n(8),v=n(37),m=n(26),y=n(4),C=n(10),S=n(15),x=n(3),k=(0,c.observer)(a=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))).state={name:"",members:[]},e.setName=function(t){e.setState({name:t})},e.toggleBuddy=function(t){var n=e.state.members;n.includes(t)?e.setState({members:n.filter((function(e){return e!==t}))}):e.setState({members:[].concat((0,o.default)(n),[t])})},e.create=function(){var t=e.state,n=t.members,r=t.name;r.trim()?f.uc.createChatGroup(r,n).then(e.onCreateSuccess).catch(e.onCreateFailure):S.RnAlert.error({message:(0,y.intlDebug)("Group name is required",{})})},e.onCreateSuccess=function(e){v.chatStore.upsertGroup(e),f.uc.joinChatGroup(e.id),(0,C.Nav)().goToPageChatRecents()},e.onCreateFailure=function(e){S.RnAlert.error({message:(0,y.intlDebug)("Failed to create the group chat",{}),err:e})},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this;return(0,x.jsxs)(h.Layout,{fabOnBack:(0,C.Nav)().goToPageChatRecents,fabOnNext:this.create,fabOnNextText:(0,y.intl)("CREATE",{}),onBack:(0,C.Nav)().backToPageChatRecents,title:(0,y.intl)("New Group",{}),children:[(0,x.jsx)(g.Field,{label:(0,y.intl)("GROUP NAME",{}),onValueChange:this.setName,value:this.state.name}),(0,x.jsx)(g.Field,{isGroup:!0,label:(0,y.intl)("Members",{})}),m.contactStore.ucUsers.map((function(t,n){return(0,x.jsx)(b.RnTouchableOpacity,{onPress:function(){return e.toggleBuddy(t.id)},children:(0,x.jsx)(p.UserItem,Object.assign({},t,{selected:e.state.members.includes(t.id)}),t.id)},n)}))]})}}]),n}(d.Component))||a;t.PageChatGroupCreate=k},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageChatGroupDetail=void 0;var a,o,i=r(n(12)),l=r(n(13)),s=r(n(5)),u=r(n(14)),c=r(n(18)),d=r(n(17)),f=r(n(20)),p=n(9),g=n(6),h=n(1),b=n(2),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=V(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(335)),m=n(40),y=n(108),C=n(336),S=n(337),x=n(30),k=n(70),P=n(43),w=n(7),A=n(19),T=n(37),I=n(26),j=n(4),_=n(10),R=n(15),O=n(49),B=n(33),M=n(214),U=n(338),L=n(106),F=n(106),D=n(3);function V(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(V=function(e){return e?n:t})(e)}var N=b.StyleSheet.create({LoadMore:{alignSelf:"center",paddingBottom:15,fontSize:w.v.fontSizeSmall,paddingHorizontal:10},LoadMore__btn:{color:w.v.colors.primary},LoadMore__finished:{color:w.v.colors.warning}}),E=(0,g.observer)((o=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={target:"",loadingRecent:!1,loadingMore:!1,editingText:"",blobFile:{url:"",fileType:""},topic_id:"",emojiTurnOn:!1},e.numberOfChatsPerLoadMore=y.numberOfChatsPerLoad,e.edittingTextEmoji="",e.editingTextReplace=!1,e.renderChatInput=function(){return(0,D.jsx)(S.ChatInput,{onEmojiTurnOn:function(){return e.setState({emojiTurnOn:!e.state.emojiTurnOn})},onSelectionChange:e.onSelectionChange,onTextChange:e.setEditingText,onTextSubmit:e.submitEditingText,openFileRnPicker:function(){return(0,U.pickFile)(e.sendFile)},text:e.state.editingText})},e.onSelectionChange=function(t){var n=t.nativeEvent.selection;e.editingTextReplace=!1,n.start!==n.end?(e.edittingTextEmoji=e.state.editingText.substring(n.start,n.end),e.editingTextReplace=!0):e.edittingTextEmoji=e.state.editingText.substring(0,n.start)},e.emojiSelectFunc=function(t){var n=e.edittingTextEmoji.concat(t);""===e.state.editingText?(e.setState({editingText:t}),e.edittingTextEmoji=t):e.editingTextReplace?(e.setState({editingText:e.state.editingText.replace(e.edittingTextEmoji,t)}),e.editingTextReplace=!1,e.edittingTextEmoji=t):(e.setState({editingText:e.state.editingText.replace(e.edittingTextEmoji,n)}),e.edittingTextEmoji=e.edittingTextEmoji.concat(t))},e.setViewRef=function(t){e.view=t},e.justMounted=!0,e.closeToBottom=!0,e.currentScrollPosition=0,e.isLoadingMore=!1,e.onContentSizeChange=function(t,n){var r,a;e.closeToBottom&&(null===(r=e.view)||void 0===r||r.scrollToEnd({animated:!e.justMounted}),e.justMounted&&(e.justMounted=!1));n&&e.isLoadingMore&&(e.isLoadingMore=!1,null===(a=e.view)||void 0===a||a.scrollTo({y:n-e.currentScrollPosition,animated:!1}))},e.onScroll=function(t){var n=t.nativeEvent.layoutMeasurement.height,r=t.nativeEvent.contentOffset,a=t.nativeEvent.contentSize.height;e.closeToBottom=n+r.y>=a-20,e.currentScrollPosition=a},e.me=m.uc.me(),e.resolveBuddy=function(t){return t===e.me.id?e.me:t.startsWith("#")?{id:t.replace("#",""),name:"Guest",avatar:null}:I.contactStore.getUcUserById(t)||{}},e.resolveChat=function(t){var n=e.chatById[t],r=n.text,a=T.chatStore.getFileById(n.file),o=e.resolveBuddy(n.creator);return{id:t,creatorId:o.id,creatorName:o.name||o.id,creatorAvatar:o.avatar,file:a,text:r,type:n.type,created:n.created,createdByMe:o.id===e.me.id}},e.loadMore=function(){e.isLoadingMore=!0,e.setState({loadingMore:!0}),e.numberOfChatsPerLoadMore=e.numberOfChatsPerLoadMore+y.numberOfChatsPerLoad;var t=(T.chatStore.getMessagesByThreadId(e.props.groupId)[0]||{}).created||0,n={max:e.numberOfChatsPerLoadMore,end:t};m.uc.getGroupChats(e.props.groupId,n).then((function(t){T.chatStore.pushMessages(e.props.groupId,t)})).catch((function(e){R.RnAlert.error({message:(0,j.intlDebug)("Failed to get more chats",{}),err:e})})).then((function(){e.setState({loadingMore:!1})})).then((function(){var t=e.props.groupId;T.chatStore.getMessagesByThreadId(t).length<e.numberOfChatsPerLoadMore&&T.chatStore.updateThreadConfig(t,!0,{allMessagesLoaded:!0})}))},e.setEditingText=function(t){e.setState({editingText:t})},e.submitting=!1,e.submitEditingText=function(){if(!e.submitting){var t=e.state.editingText.trim();t&&(e.state.emojiTurnOn&&e.setState({emojiTurnOn:!e.state.emojiTurnOn}),e.submitting=!0,m.uc.sendGroupChatText(e.props.groupId,t).then((function(t){T.chatStore.pushMessages(e.props.groupId,[t]),e.setState({editingText:""})})).catch((function(e){R.RnAlert.error({message:(0,j.intlDebug)("Failed to send the message",{}),err:e})})).then((function(){e.submitting=!1})))}},e.updateConfStatus=function(e,t){var n=T.chatStore.getGroupById(e),r=Object.assign({},n,{webchat:Object.assign({},n.webchat,{conf_status:t?m.Constants.CONF_STATUS_INACTIVE:m.Constants.CONF_STATUS_INVITED})});T.chatStore.upsertGroup(r)},e.leave=function(){var t=e.props.groupId;m.uc.leaveChatConference(t,!0).then((function(n){T.chatStore.isWebchat(t)?e.updateConfStatus(t,n.closes):T.chatStore.removeGroup(t),(0,_.Nav)().backToPageChatRecents()})).catch((function(e){R.RnAlert.error({message:(0,j.intlDebug)("Failed to leave the group",{}),err:e})}))},e.invite=function(){(0,_.Nav)().goToPageChatGroupInvite({groupId:e.props.groupId})},e.call=function(e,t){t?(0,A.getCallStore)().startVideoCall(e):(0,A.getCallStore)().startCall(e)},e.callVoiceConference=function(){var t=e.props.groupId;t.startsWith("uc")||(t="uc"+e.props.groupId),e.call(t,!1)},e.callVideoConference=function(){var t=e.props.groupId;t.startsWith("uc")||(t="uc"+e.props.groupId),e.call(t,!0)},e.readFile=function(t){var n=(0,M.formatFileType)(t.name);e.setState({blobFile:{url:t.uri,fileType:n}})},e.sendFile=function(t){e.readFile(t);var n=e.props.groupId;m.uc.sendFiles(n,t).then((function(n){return e.onSendFileSuccess(n,t)})).catch(e.onSendFileFailure)},e.handleSaveBlobFileWeb=function(){var t=(0,l.default)(i.default.mark((function t(n,r,a){var o,l;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.props.groupId,t.prev=1,t.next=4,(0,F.saveBlobFile)(r.id,r.topic_id,r.fileType,n);case 4:l=t.sent,Object.assign(r,{url:l}),T.chatStore.upsertFile(r),T.chatStore.pushMessages(o,a),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error("PageChatGroupDetail.handleSaveBlobFileWeb err",t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n,r){return t.apply(this,arguments)}}(),e.onSendFileSuccess=function(t,n){var r=e.props.groupId,a=e.state.blobFile;e.setState({topic_id:t.file.topic_id}),Object.assign(t.file,a,{save:"success"}),"web"===b.Platform.OS?e.handleSaveBlobFileWeb(n,t.file,t.chat):(T.chatStore.upsertFile(t.file),T.chatStore.pushMessages(r,t.chat))},e.onSendFileFailure=function(e){R.RnAlert.error({message:(0,j.intlDebug)("Failed to send file",{}),err:e})},e.acceptFile=function(t){m.uc.acceptFile(t.id).then((function(n){return e.onAcceptFileSuccess(n,t)})).catch(e.onAcceptFileFailure)},e.onAcceptFileSuccess=function(e,t){var n,r=["PNG","JPG","JPEG","GIF"].includes((null===(n=t.name.split(".").pop())||void 0===n?void 0:n.toUpperCase())||"")?"image":"other",a=new FileReader;a.onload=function(){var e=(0,l.default)(i.default.mark((function e(n){var a,o,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(a=n.target)||void 0===a?void 0:a.result,l=T.chatStore.getFileById(t.id)){e.next=4;break}return e.abrupt("return");case 4:Object.assign(l,{url:o,fileType:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsDataURL(e),(0,L.saveBlob)(e,t.name)},e.onAcceptFileFailure=function(e){R.RnAlert.error({message:(0,j.intlDebug)("Failed to accept file",{}),err:e})},e.rejectFile=function(t){m.uc.rejectFile(t).catch(e.onRejectFileFailure)},e.onRejectFileFailure=function(e){R.RnAlert.error({message:(0,j.intlDebug)("Failed to reject file",{}),err:e})},e}return(0,u.default)(n,[{key:"chatById",get:function(){return(0,O.arrToMap)(T.chatStore.getMessagesByThreadId(this.props.groupId),"id",(function(e){return e}))}},{key:"componentDidMount",value:function(){this.loadRecent(),T.chatStore.updateThreadConfig(this.props.groupId,!0,{isUnread:!1})}},{key:"componentDidUpdate",value:function(){var e=this.props.groupId;T.chatStore.getThreadConfig(e).isUnread&&T.chatStore.updateThreadConfig(e,!1,{isUnread:!1})}},{key:"componentWillUnmount",value:function(){if("web"===b.Platform.OS){var e=this.state.topic_id;e&&caches.delete(e)}}},{key:"render",value:function(){var e=this,t=this.props.groupId,n=T.chatStore.getGroupById(t),r=T.chatStore.getThreadConfig(t).allMessagesLoaded,a=this.state,o=a.loadingMore,i=a.loadingRecent,l=T.chatStore.getMessagesByThreadId(this.props.groupId);return(0,D.jsxs)(x.Layout,{compact:!0,containerOnContentSizeChange:this.onContentSizeChange,containerOnScroll:this.onScroll,fabRender:this.renderChatInput,containerRef:this.setViewRef,dropdown:[{label:(0,j.intl)("Invite more people",{}),onPress:this.invite},{label:(0,j.intl)("Start voice call",{}),onPress:this.callVoiceConference},{label:(0,j.intl)("Start video call",{}),onPress:this.callVideoConference},{label:(0,j.intl)("Leave group",{}),onPress:this.leave,danger:!0}],onBack:(0,_.Nav)().backToPageChatRecents,title:null===n||void 0===n?void 0:n.name,children:[i?(0,D.jsx)(k.RnText,{style:N.LoadMore,children:(0,j.intl)("Loading...",{})}):r?(0,D.jsx)(k.RnText,{center:!0,style:[N.LoadMore,N.LoadMore__finished],children:T.chatStore.getMessagesByThreadId(this.props.groupId).length?(0,j.intl)("All messages in this thread have been loaded",{}):(0,j.intl)("There's currently no message in this thread",{})}):(0,D.jsx)(P.RnTouchableOpacity,{onPress:o?void 0:function(){return e.loadMore()},children:(0,D.jsx)(k.RnText,{bold:!o,style:[N.LoadMore,!o&&N.LoadMore__btn],children:o?(0,j.intl)("Loading...",{}):(0,j.intl)("Load more messages",{})})}),(0,D.jsx)(C.MessageList,{acceptFile:this.acceptFile,isGroupChat:!0,list:l,loadMore:this.loadMore,rejectFile:this.rejectFile,resolveChat:this.resolveChat}),this.state.emojiTurnOn&&(0,D.jsx)(b.View,{children:(0,D.jsx)(v.default,{category:v.Categories.emotion,columns:10,onEmojiSelected:function(t){return e.emojiSelectFunc(t)},showHistory:!0,showSearchBar:!0,showSectionTitles:!0,showTabs:!0})})]})}},{key:"loadRecent",value:function(){var e=this;this.setState({loadingRecent:!0}),m.uc.getGroupChats(this.props.groupId,{max:y.numberOfChatsPerLoad}).then((function(t){T.chatStore.pushMessages(e.props.groupId,t),B.BackgroundTimer.setTimeout(e.onContentSizeChange,300)})).catch((function(e){R.RnAlert.error({message:(0,j.intlDebug)("Failed to get recent chats",{}),err:e})})).then((function(){e.setState({loadingRecent:!1})}))}}]),n}(h.Component),(0,f.default)(o.prototype,"chatById",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"chatById"),o.prototype),a=o))||a;t.PageChatGroupDetail=E},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageChatGroupInvite=void 0;var a,o=r(n(86)),i=r(n(5)),l=r(n(14)),s=r(n(18)),u=r(n(17)),c=n(6),d=n(1),f=n(2),p=n(40),g=n(51),h=n(44),b=n(30),v=n(8),m=n(7),y=n(37),C=n(26),S=n(4),x=n(10),k=n(15),P=n(3),w=f.StyleSheet.create({PageChatGroupInvite:{},PageChatGroupInvite_TextInput:Object.assign({padding:10},m.v.boxShadow),PageChatGroupInvite_Outer:{paddingTop:5,paddingHorizontal:10},PageChatGroupInvite_BtnSave:{marginTop:15,padding:10,borderRadius:m.v.borderRadius,backgroundColor:m.v.colors.primary},PageChatGroupInvite_BtnText:{alignItems:"center",color:"white",fontSize:m.v.fontSizeSubTitle},PageChatGroupInvite_GroupName:{fontSize:m.v.fontSizeTitle,padding:5},PageChatGroupInvite_Text:{paddingTop:15,fontSize:m.v.fontSizeTitle}}),A=(0,c.observer)(a=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))).state={selectedBuddy:{}},e.isNotMember=function(t){var n;return!(null!==(n=y.chatStore.getGroupById(e.props.groupId).members)&&void 0!==n&&n.includes(t))},e.resolveBuddy=function(e){return C.contactStore.getUcUserById(e)},e.toggleBuddy=function(t){var n=e.state.selectedBuddy;n=Object.assign({},n,(0,o.default)({},t,!n[t])),e.setState({selectedBuddy:n})},e.invite=function(){var t=e.state.selectedBuddy,n=Object.keys(t);n.length?p.uc.inviteChatGroupMembers(e.props.groupId,n).catch(e.onInviteFailure).then(e.back):k.RnAlert.error({message:(0,S.intlDebug)("No buddy selected",{})})},e.onInviteFailure=function(e){k.RnAlert.error({message:(0,S.intlDebug)("Failed to invite group chat",{}),err:e})},e.back=function(){(0,x.Nav)().backToPageChatGroupDetail({groupId:e.props.groupId})},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this;return(0,P.jsxs)(b.Layout,{onBack:this.back,title:(0,S.intl)("Inviting Group Member",{}),children:[(0,P.jsxs)(f.View,{style:w.PageChatGroupInvite_Outer,children:[(0,P.jsx)(v.RnText,{style:w.PageChatGroupInvite_GroupName,children:y.chatStore.getGroupById(this.props.groupId).name}),(0,P.jsx)(v.RnTouchableOpacity,{onPress:this.invite,style:w.PageChatGroupInvite_BtnSave,children:(0,P.jsx)(v.RnText,{style:w.PageChatGroupInvite_BtnText,children:(0,S.intl)("Invite",{})})}),(0,P.jsx)(v.RnText,{style:w.PageChatGroupInvite_Text,children:(0,S.intl)("Members",{})})]}),(0,P.jsx)(h.Field,{isGroup:!0}),C.contactStore.ucUsers.map((function(e){return e.id})).filter(this.isNotMember).map((function(t,n){return(0,P.jsx)(v.RnTouchableOpacity,{onPress:function(){return e.toggleBuddy(t)},children:(0,P.jsx)(g.UserItem,Object.assign({},e.resolveBuddy(t),{selected:e.state.selectedBuddy[t]}),t)},n)}))]})}}]),n}(d.Component))||a;t.PageChatGroupInvite=A},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageChatRecents=void 0;var a,o=r(n(12)),i=r(n(34)),l=r(n(13)),s=r(n(5)),u=r(n(14)),c=r(n(18)),d=r(n(17)),f=r(n(103)),p=n(21),g=n(6),h=n(1),b=n(40),v=n(745),m=n(44),y=n(30),C=n(8),S=n(32),x=n(11),k=n(37),P=n(26),w=n(4),A=n(10),T=n(49),I=n(88),j=n(3),_=(0,g.observer)(a=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(e=t.call.apply(t,[this].concat(a))).getLastChat=function(e){var t=(0,I.filterTextOnly)(k.chatStore.getMessagesByThreadId(e));return t.length?t[t.length-1]:{}},e.saveLastChatItem=function(){var e=(0,l.default)(o.default.mark((function e(t){var n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=(0,i.default)(t).filter((function(e){return(null===e||void 0===e?void 0:e.created)||(null===e||void 0===e?void 0:e.group)}));n.length>20;)n.pop();return e.next=4,(0,x.getAuthStore)().getCurrentDataAsync();case 4:r=e.sent,(0,f.default)(n)!==(0,f.default)(r.recentChats)&&(r.recentChats=n,S.accountStore.saveAccountsToLocalStorageDebounced());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.handleGroupSelect=function(){var e=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.chatStore.handleMoveToChatGroupDetail(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return(0,u.default)(n,[{key:"render",value:function(){var e=this,t=k.chatStore.groups.filter((function(e){return e.webchat&&e.webchat.conf_status!==b.Constants.CONF_STATUS_JOINED})),n=k.chatStore.groups.filter((function(e){return e.jointed})).map((function(e){return e.id})),r=k.chatStore.threadIdsOrderedByRecent,a=(0,T.arrToMap)(k.chatStore.groups,"id",(function(e){return e})),o=(0,T.arrToMap)(P.contactStore.ucUsers,"id",(function(e){return e})),l=(0,x.getAuthStore)(),s=l.getCurrentData();s||S.accountStore.findDataAsync(l.getCurrentAccount());var u=(null===s||void 0===s?void 0:s.recentChats.filter((function(e){return n.indexOf(e.id)<0&&r.indexOf(e.id)<0})))||[],c=u.filter((function(e){return e.group}));c.push.apply(c,(0,i.default)(n.map((function(t){return Object.assign({},e.getLastChat(t),{threadId:t})}))));var d=u.filter((function(e){return!e.group}));d.push.apply(d,(0,i.default)(r.map((function(t){return Object.assign({},e.getLastChat(t),{threadId:t})}))));var f=function(e){return function(t){var n=t,r="boolean"===typeof n.group?n.id:n.threadId,i=(e?a:o)[r],l=(null===i||void 0===i?void 0:i.name)||n.name||"",s=k.chatStore.getThreadConfig(r).isUnread;"boolean"!==typeof s&&(s=n.unread||!1);var u=k.chatStore.isWebchat(r),c=k.chatStore.isWebchatJoined(r);u&&!c&&(s=!0);var d=(0,I.formatChatContent)(n);return{id:r,name:l,text:d.text,type:d.isTextOnly?1:n.type||n.ctype,group:!!e,unread:s,created:n.created}}},g=[].concat((0,i.default)(c.map(f(!0))),(0,i.default)(d.map(f(!1))));g=(0,I.filterTextOnly)(g);var h=(g=(0,p.uniqBy)(g,"id")).reduce((function(e,t){return e[t.id]=!0,e}),{});return(0,I.filterTextOnly)(null===s||void 0===s?void 0:s.recentChats).forEach((function(e){h[e.id]||g.push(e)})),g=g.filter((function(e){return!t.some((function(t){return t.id===e.id}))})),g=(0,p.orderBy)(g,["created","name"]).reverse(),this.saveLastChatItem(g),(0,j.jsxs)(y.Layout,{description:(0,w.intl)("UC recent active chat",{}),dropdown:[{label:(0,w.intl)("Create group chat",{}),onPress:(0,A.Nav)().goToPageChatGroupCreate}],menu:"contact",subMenu:"chat",title:(0,w.intl)("Chat",{}),children:[(0,j.jsx)(m.Field,{isGroup:!0,label:(0,w.intl)("RECENT CHAT THREADS",{})}),!g.length&&(0,j.jsx)(C.RnText,{center:!0,normal:!0,small:!0,warning:!0,style:{marginTop:5},children:(0,w.intl)("There's no active chat thread",{})}),(0,j.jsx)(v.ListUsers,{recents:g,groupById:a,onGroupSelect:this.handleGroupSelect,userById:o,onUserSelect:function(e){return(0,A.Nav)().goToPageChatDetail({buddy:e})}})]})}}]),n}(h.Component))||a;t.PageChatRecents=_},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ListUsers=void 0;var r=n(6),a=n(2),o=n(37),i=n(26),l=n(108),s=n(51),u=n(8),c=n(7),d=n(3),f=a.StyleSheet.create({Unread:{backgroundColor:c.v.colors.primaryFn(.5)}}),p=(0,r.observer)((function(e){return(0,d.jsx)(d.Fragment,{children:e.recents.map((function(t){var n=t.id,r=t.name,a=t.group,c=t.text,p=t.unread,g=t.created;return(0,d.jsx)(u.RnTouchableOpacity,{onPress:function(){return a?e.onGroupSelect(n):e.onUserSelect(n)},style:(p||o.chatStore.getThreadConfig(n).isUnread)&&f.Unread,children:(0,d.jsx)(s.UserItem,Object.assign({name:r||(0,i.getPartyName)(n)},(a?e.groupById:e.userById)[n],{lastMessage:c,group:a,isRecentChat:!0,lastMessageDate:(0,l.formatDateTimeSemantic)(g)}),n)},n)}))})}));t.ListUsers=p},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionItem=void 0;var a=r(n(54)),o=n(2),i=n(331),l=n(70),s=n(43),u=n(3),c=["isSelected","title","onPress","disabled","style"],d=o.StyleSheet.create({SelectionItem:{flexDirection:"row",alignItems:"center",marginVertical:5},SelectionItem_Disabled:{opacity:.5},SelectionItem_Title:{marginLeft:12}});t.SelectionItem=function(e){var t=e.isSelected,n=e.title,r=e.onPress,o=e.disabled,f=void 0!==o&&o,p=e.style,g=(0,a.default)(e,c);return(0,u.jsxs)(s.RnTouchableOpacity,Object.assign({},g,{style:[d.SelectionItem,f&&d.SelectionItem_Disabled,p],onPress:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){f||r()})),children:[(0,u.jsx)(i.RnCheckBox,{isSelected:t,onPress:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){f||r()})),disabled:f}),(0,u.jsx)(l.RnText,{style:d.SelectionItem_Title,children:n})]}))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ContactList=void 0;var r=n(6),a=n(2),o=n(65),i=n(51),l=n(43),s=n(3),u=(0,r.observer)((function(e){return(0,s.jsx)(a.View,{children:(0,s.jsx)(a.FlatList,{data:e.data,renderItem:function(e){var t=e.item;return(0,s.jsx)(c,{item:t})},keyExtractor:function(e){return e.user_id}})})}));t.ContactList=u;var c=(0,r.observer)((function(e){var t=e.item;return(0,s.jsx)(a.View,{children:(0,s.jsx)(l.RnTouchableOpacity,{onPress:function(){return o.userStore.selectUserId(t.user_id)},disabled:o.userStore.isSelectedAddAllUser,children:(0,s.jsx)(i.UserItem,{id:t.user_id,name:t.name||t.user_id,avatar:t.profile_image_url,disabled:o.userStore.isSelectedAddAllUser,isSelected:o.userStore.isSelectedAddAllUser||o.userStore.selectedUserIds[t.user_id],onSelect:function(){return o.userStore.selectUserId(t.user_id)},isSelection:!0})})},t.user_id)}))},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageContactGroupCreate=void 0;var a,o,i,l=r(n(22)),s=r(n(5)),u=r(n(14)),c=r(n(53)),d=r(n(18)),f=r(n(17)),p=r(n(20)),g=(r(n(23)),n(9)),h=n(6),b=n(1),v=n(2),m=n(51),y=n(44),C=n(30),S=n(43),x=n(4),k=n(10),P=n(15),w=n(129),A=n(65),T=n(33),I=n(223),j=n(3),_=(0,h.observer)((o=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,l.default)(e,"selectedUserItems",i,(0,c.default)(e)),e.state={name:"",didMount:!1},e.setName=function(t){return e.setState({name:t})},e.create=function(){var t=e.state.name;t.trim()?A.userStore.groups.some((function(e){return e.name===t.trim()}))?P.RnAlert.error({message:(0,x.intlDebug)("Group name is existed",{})}):(A.userStore.addGroup(t,e.selectedUserItems),w.RnDropdown.setShouldUpdatePosition(!0),(0,k.Nav)().backToPageContactEdit()):P.RnAlert.error({message:(0,x.intlDebug)("Group name is required",{})})},e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){var e=this;T.BackgroundTimer.setTimeout((function(){return e.setState({didMount:!0})}),300)}},{key:"render",value:function(){var e=this;return(0,j.jsxs)(C.Layout,{fabOnBack:(0,k.Nav)().goToPageContactEdit,fabOnNext:this.create,fabOnNextText:(0,x.intl)("CREATE",{}),onBack:(0,k.Nav)().backToPageContactEdit,title:(0,x.intl)("New Group",{}),children:[(0,j.jsx)(y.Field,{label:(0,x.intl)("GROUP NAME",{}),onValueChange:this.setName,value:this.state.name}),(0,j.jsx)(y.Field,{isGroup:!0,label:(0,x.intl)("Members",{})}),this.state.didMount?(0,j.jsx)(v.FlatList,{data:A.userStore.dataListAllUser,renderItem:function(t){var n=t.item,r=t.index;return(0,j.jsx)(R,{item:n,index:r,selectedUsers:e.selectedUserItems})},keyExtractor:function(e){return e.user_id}}):(0,j.jsx)(v.ActivityIndicator,{style:I.css.loadingIcon,size:"large"})]})}}]),n}(b.Component),i=(0,p.default)(o.prototype,"selectedUserItems",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=o))||a;t.PageContactGroupCreate=_;var R=(0,h.observer)((function(e){var t=e.item,n=e.index,r=e.selectedUsers,a=function(e){r[e.user_id]?delete r[t.user_id]:r[e.user_id]=e};return(0,j.jsx)(v.View,{children:(0,j.jsx)(S.RnTouchableOpacity,{onPress:function(){return a(t)},children:(0,j.jsx)(m.UserItem,{id:t.user_id,name:t.name||t.user_id,avatar:t.profile_image_url,isSelected:!!r[t.user_id],onSelect:function(){return a(t)},isSelection:!0})})},"PageContactGroupCreate-"+t.user_id+"-"+n)}))},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageContactGroupEdit=void 0;var a,o,i,l=r(n(22)),s=r(n(5)),u=r(n(14)),c=r(n(53)),d=r(n(18)),f=r(n(17)),p=r(n(20)),g=(r(n(23)),n(9)),h=n(6),b=n(1),v=n(2),m=n(51),y=n(44),C=n(30),S=n(43),x=n(4),k=n(10),P=n(129),w=n(65),A=n(33),T=n(223),I=n(3),j=(0,h.observer)((o=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,l.default)(e,"selectedUserItems",i,(0,c.default)(e)),e.state={didMount:!1},e.selectUser=function(t){e.selectedUserItems[t.user_id]?delete e.selectedUserItems[t.user_id]:e.selectedUserItems[t.user_id]=t},e.create=function(){var t=e.props.listItem.filter((function(t){return!e.selectedUserItems[t.user_id]}));w.userStore.editGroup(e.props.groupName,t,e.selectedUserItems),P.RnDropdown.setShouldUpdatePosition(!0),(0,k.Nav)().backToPageContactEdit()},e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.listItem.forEach((function(t){w.userStore.selectedUserIds[t.user_id]&&(e.selectedUserItems[t.user_id]=t)})),A.BackgroundTimer.setTimeout((function(){return e.setState({didMount:!0})}),300)}},{key:"render",value:function(){var e=this;return(0,I.jsxs)(C.Layout,{fabOnBack:(0,k.Nav)().goToPageContactEdit,fabOnNext:this.create,fabOnNextText:(0,x.intl)("SAVE",{}),onBack:(0,k.Nav)().backToPageContactEdit,title:(0,x.intl)("Add/Remove Contact",{}),children:[(0,I.jsx)(y.Field,{label:(0,x.intl)("GROUP NAME",{}),value:this.props.groupName,disabled:!0}),(0,I.jsx)(y.Field,{isGroup:!0,label:(0,x.intl)("Members",{}),disabled:!0}),this.state.didMount?(0,I.jsx)(v.FlatList,{data:w.userStore.dataListAllUser,renderItem:function(t){var n=t.item,r=t.index;return(0,I.jsx)(_,{item:n,index:r,selectedUsers:e.selectedUserItems})},keyExtractor:function(e){return e.user_id}}):(0,I.jsx)(v.ActivityIndicator,{size:"large"})]})}}]),n}(b.Component),i=(0,p.default)(o.prototype,"selectedUserItems",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=o))||a;t.PageContactGroupEdit=j;var _=(0,h.observer)((function(e){var t=e.item,n=e.index,r=e.selectedUsers,a=function(e){r[t.user_id]?delete r[t.user_id]:r[t.user_id]=t};return(0,I.jsx)(v.View,{children:(0,I.jsx)(S.RnTouchableOpacity,{style:T.css.loadingIcon,onPress:function(){return a()},children:(0,I.jsx)(m.UserItem,{id:t.user_id,name:t.name||t.user_id,avatar:t.profile_image_url,isSelected:!!r[t.user_id],onSelect:function(){return a()},isSelection:!0})})},"PageContactGroupEdit-"+t.user_id+"-"+n)}))},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageContactPhonebook=void 0;var a,o=r(n(12)),i=r(n(13)),l=r(n(5)),s=r(n(14)),u=r(n(18)),c=r(n(17)),d=n(21),f=n(6),p=n(1),g=n(2),h=n(50),b=n(16),v=n(51),m=n(44),y=n(30),C=n(8),S=n(19),x=n(26),k=n(4),P=n(10),w=n(15),A=n(85),T=n(33),I=n(3),j=g.StyleSheet.create({Loading:{marginTop:20}}),_=(0,f.observer)(a=function(e){(0,u.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).update=function(t){var n=x.contactStore.getPhonebookById(t);null!==n&&void 0!==n&&n.loaded?(0,P.Nav)().goToPagePhonebookUpdate({contact:n}):e.loadContactDetail(t,(function(e){(0,P.Nav)().goToPagePhonebookUpdate({contact:e})}))},e.loadContactDetail=function(e,t){h.pbx.getContact(e).then((function(e){if(e){var n=Object.assign({},e,{loaded:!0});x.contactStore.upsertPhonebook(n),t(n)}})).catch((function(t){w.RnAlert.error({message:(0,k.intlDebug)("Failed to load contact detail for {{$0}}",{$0:e}),err:t})}))},e.callRequest=function(t,n){""!==t?(0,S.getCallStore)().startCall(t.replace(/\s+/g,"")):(e.update(n.id),w.RnAlert.error({message:(0,k.intlDebug)("This contact doesn't have any phone number",{})}))},e.onIcon0=function(t){if(t){var n=function(t){if(t)if(t.info.$tel_work||t.info.$tel_home||t.info.$tel_mobile){var n=[];t.info.$tel_work&&n.push({key:"workNumber",value:t.info.$tel_work,icon:b.mdiBriefcase}),t.info.$tel_mobile&&n.push({key:"cellNumber",value:t.info.$tel_mobile,icon:b.mdiCellphone}),t.info.$tel_home&&n.push({key:"homeNumber",value:t.info.$tel_home,icon:b.mdiHome}),1!==n.length?A.RnPicker.open({options:n.map((function(e){return{key:e.value,label:e.value,icon:e.icon}})),onSelect:function(n){return e.callRequest(n,t)}}):e.callRequest(n[0].value,t)}else e.callRequest("",t)};t.loaded?n(t):e.loadContactDetail(t.id,(function(){n(t)}))}},e.updateSearchText=function(t){x.contactStore.phonebookSearchTerm=t,e.loadContactsDebounced(),x.contactStore.selectedContactIds={}},e.loadContactsDebounced=(0,d.debounce)((function(){x.contactStore.offset=0,x.contactStore.loadContacts()}),500),e.onDelete=(0,i.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,d.isEmpty)(x.contactStore.selectedContactIds)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,h.pbx.deleteContact(Object.keys(x.contactStore.selectedContactIds));case 5:null!==(n=e.sent)&&void 0!==n&&null!==(t=n.succeeded)&&void 0!==t&&t.length&&x.contactStore.removeContacts(n.succeeded),x.contactStore.selectedContactIds={},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),w.RnAlert.error({message:(0,k.intlDebug)("Failed to delete contact",{}),err:e.t0});case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),e.onCancel=function(){x.contactStore.isDeleteState=!1,x.contactStore.selectedContactIds={}},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){x.contactStore.getManageItems();var e=T.BackgroundTimer.setInterval((function(){h.pbx.client&&(x.contactStore.loadContactsFirstTime(),T.BackgroundTimer.clearInterval(e))}),1e3)}},{key:"componentWillUnmount",value:function(){x.contactStore.isDeleteState&&(x.contactStore.isDeleteState=!1,x.contactStore.selectedContactIds={})}},{key:"render",value:function(){var e=this,t=x.contactStore.phoneBooks,n={};t.forEach((function(e){var t,r=null===e||void 0===e||null===(t=e.display_name)||void 0===t?void 0:t.charAt(0).toUpperCase();/[A-Z]/.test(r)||(r="#"),n[r]||(n[r]=[]),n[r].push(e)}));var r=Object.keys(n).map((function(e){return{key:e,phonebooks:n[e]}}));(r=(0,d.orderBy)(r,"key")).forEach((function(e){e.phonebooks=(0,d.orderBy)(e.phonebooks,"name")}));var a=[{label:(0,k.intl)("Delete ",{})+"("+Object.keys(x.contactStore.selectedContactIds).length+")",onPress:this.onDelete},{label:(0,k.intl)("Cancel",{}),onPress:this.onCancel}],o=[{label:(0,k.intl)("Create new contact",{}),onPress:(0,P.Nav)().goToPagePhonebookCreate},{label:(0,k.intl)("Delete contacts",{}),onPress:function(){x.contactStore.isDeleteState=!0}},{label:(0,k.intl)("Reload",{}),onPress:x.contactStore.loadContacts}];return(0,I.jsxs)(y.Layout,{description:(0,k.intl)("Your phonebook contacts",{}),dropdown:x.contactStore.isDeleteState?a:o,menu:"contact",subMenu:"phonebook",title:(0,k.intl)("Phonebook",{}),children:[(0,I.jsx)(m.Field,{icon:b.mdiMagnify,label:(0,k.intl)("SEARCH CONTACTS",{}),onValueChange:this.updateSearchText,value:x.contactStore.phonebookSearchTerm}),(0,I.jsx)(g.View,{children:r.map((function(t){return(0,I.jsxs)(p.Fragment,{children:[(0,I.jsx)(m.Field,{isGroup:!0,label:t.key}),t.phonebooks.map((function(t,n){return x.contactStore.isDeleteState?(0,I.jsx)(C.RnTouchableOpacity,{onPress:function(){return x.contactStore.selectContactId(t.id)},disabled:t.shared,children:(0,I.jsx)(v.UserItem,{name:(null===t||void 0===t?void 0:t.display_name)||(0,k.intl)("<Unnamed>",{}),isSelection:!0,isSelected:x.contactStore.selectedContactIds[t.id],disabled:t.shared,onSelect:function(){return x.contactStore.selectContactId(t.id)}},n)}):(0,I.jsx)(v.UserItem,{iconFuncs:[function(){return e.onIcon0(t)},function(){return e.update(t.id)}],icons:[b.mdiPhone,b.mdiInformation],phonebook:t.phonebook+(t.shared?"\u24c8":""),name:""+((null===t||void 0===t?void 0:t.display_name)||(0,k.intl)("<Unnamed>",{}))},n)}))]},t.key)}))}),x.contactStore.loading?(0,I.jsx)(C.RnText,{style:j.Loading,warning:!0,small:!0,normal:!0,center:!0,children:(0,k.intl)("Loading...",{})}):x.contactStore.hasLoadmore?(0,I.jsx)(C.RnTouchableOpacity,{onPress:x.contactStore.loadMoreContacts,children:(0,I.jsx)(C.RnText,{style:j.Loading,primary:!0,small:!0,normal:!0,center:!0,children:(0,k.intl)("Load more contacts",{})})}):null]})}}]),n}(p.Component))||a;t.PageContactPhonebook=_},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageContactUsers=void 0;var a,o=r(n(34)),i=r(n(5)),l=r(n(14)),s=r(n(18)),u=r(n(17)),c=n(21),d=n(6),f=n(1),p=n(2),g=n(16),h=n(222),b=n(51),v=n(44),m=n(30),y=n(43),C=n(32),S=n(11),x=n(19),k=n(37),P=n(26),w=n(4),A=n(10),T=n(65),I=n(752),j=n(88),_=n(3),R=(0,d.observer)(a=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).displayOfflineUsers=new I.DelayFlag,e.resolveUser=function(e){var t=P.contactStore.getPbxUserById(e)||{},n=P.contactStore.getUcUserById(e)||{};return Object.assign({},t,n)},e.isMatchUser=function(e){if(!e)return!1;var t,n,r=e,a=P.contactStore.getPbxUserById(e);t=a?a.name:"";var o=P.contactStore.getUcUserById(e);n=o?o.name:"",r=r.toLowerCase(),t=t.toLowerCase(),n=n.toLowerCase();var i=P.contactStore.usersSearchTerm.toLowerCase();return r.includes(i)||t.includes(i)||n.includes(i)},e.getDescription=function(t){var n=(0,S.getAuthStore)().getCurrentAccount();if(!n)return"";if(t){var r=P.contactStore.usersSearchTerm.toLowerCase(),a=!n.ucEnabled||e.displayOfflineUsers.enabled,o=T.userStore.filterUser(r,a),i=o.totalContact,l=void 0===i?0:i,s=o.totalOnlineContact,u=void 0===s?0:s,c=(0,w.intl)("Users, {{$0}} total",{$0:l});return n.ucEnabled&&(c=c.replace((0,w.intl)("{{$0}} total",{$0:l}),(0,w.intl)("{{$0}}/{{$1}} online",{$0:u,$1:l}))),c}var d=e.getMatchUserIds().map(e.resolveUser),f=d.filter((function(e){return e.status&&"offline"!==e.status})),p=(0,w.intl)("Users, {{$0}} total",{$0:d.length});return d.length&&n.ucEnabled&&(p=p.replace((0,w.intl)("{{$0}} total",{$0:d.length}),(0,w.intl)("{{$0}}/{{$1}} online",{$0:f.length,$1:d.length}))),p},e.renderUserSelectionMode=function(){var t,n=P.contactStore.usersSearchTerm.toLowerCase(),r=!(null!==(t=(0,S.getAuthStore)().getCurrentAccount())&&void 0!==t&&t.ucEnabled)||e.displayOfflineUsers.enabled,a=T.userStore.filterUser(n,r).displayUsers;return(0,_.jsx)(h.ContactSectionList,{sectionListData:a})},e.renderAllUserMode=function(){var t=(0,S.getAuthStore)().getCurrentAccount();if(!t)return null;var n=e.getMatchUserIds().map(e.resolveUser),r=n.filter((function(e){return e.status&&"offline"!==e.status})),a=!e.displayOfflineUsers.enabled&&t.ucEnabled?r:n,o={};a.forEach((function(e){e.name=e.name||e.id||"";var t=e.name.charAt(0).toUpperCase();/[A-Z]/.test(t)||(t="#"),o[t]||(o[t]=[]),o[t].push(e)}));var i=Object.keys(o).map((function(e){return{title:e,data:o[e]}}));return(i=(0,c.orderBy)(i,"title")).forEach((function(e){e.data=(0,c.orderBy)(e.data,"name")})),(0,_.jsx)(p.SectionList,{sections:i,keyExtractor:function(e,t){return e.id},renderItem:function(e){var t=e.item,n=e.index;return(0,_.jsx)(B,{item:t,index:n})},renderSectionHeader:function(e){var t=e.section.title;return(0,_.jsx)(v.Field,{isGroup:!0,label:t})}})},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"getMatchUserIds",value:function(){return(0,c.uniq)([].concat((0,o.default)(P.contactStore.pbxUsers.map((function(e){return e.id}))),(0,o.default)(P.contactStore.ucUsers.map((function(e){return e.id}))))).filter(this.isMatchUser)}},{key:"componentDidUpdate",value:function(){var e=(0,S.getAuthStore)().getCurrentAccount();this.displayOfflineUsers.enabled!==(null===e||void 0===e?void 0:e.displayOfflineUsers)&&this.displayOfflineUsers.setEnabled(null===e||void 0===e?void 0:e.displayOfflineUsers)}},{key:"render",value:function(){var e,t=(0,S.getAuthStore)(),n=t.getCurrentAccount();if(!n)return null;var r=t.isBigMode()||!n.pbxLocalAllUsers,a=this.getDescription(r);return(0,_.jsxs)(m.Layout,{description:a,dropdown:[{label:(0,w.intl)("Edit buddy list",{}),onPress:(0,A.Nav)().goToPageContactEdit}],menu:"contact",subMenu:"users",title:(0,w.intl)("Users",{}),children:[(0,_.jsx)(v.Field,{icon:g.mdiMagnify,label:(0,w.intl)("SEARCH FOR USERS",{}),onValueChange:function(e){P.contactStore.usersSearchTerm=e},value:P.contactStore.usersSearchTerm}),(null===(e=(0,S.getAuthStore)().getCurrentAccount())||void 0===e?void 0:e.ucEnabled)&&(0,_.jsx)(v.Field,{label:(0,w.intl)("SHOW OFFLINE USERS",{}),onValueChange:function(e){C.accountStore.upsertAccount({id:(0,S.getAuthStore)().signedInId,displayOfflineUsers:e})},type:"Switch",value:n.displayOfflineUsers}),r?this.renderUserSelectionMode():this.renderAllUserMode()]})}}]),n}(f.Component))||a;t.PageContactUsers=R;var O=function(e){var t=(0,j.filterTextOnly)(k.chatStore.getMessagesByThreadId(e));return t.length?t[t.length-1]:{}},B=(0,d.observer)((function(e){var t,n,r=e.item,a=e.index;return(0,_.jsx)(y.RnTouchableOpacity,{onPress:null!==(t=(0,S.getAuthStore)().getCurrentAccount())&&void 0!==t&&t.ucEnabled?function(){return(0,A.Nav)().goToPageChatDetail({buddy:r.id})}:void 0,children:(0,_.jsx)(b.UserItem,Object.assign({iconFuncs:[function(){return(0,x.getCallStore)().startVideoCall(r.id)},function(){return(0,x.getCallStore)().startCall(r.id)}],icons:[g.mdiVideo,g.mdiPhone],lastMessage:null===(n=O(r.id))||void 0===n?void 0:n.text},r))},a)}))},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.DelayFlag=void 0;var a,o,i=r(n(22)),l=r(n(5)),s=r(n(20)),u=(r(n(23)),n(9)),c=n(33),d=(a=function e(){var t=this;(0,l.default)(this,e),(0,i.default)(this,"enabled",o,this),this.timeoutId=0,this.setEnabled=function(e){t.timeoutId&&c.BackgroundTimer.clearTimeout(t.timeoutId),t.timeoutId=c.BackgroundTimer.setTimeout((0,u.action)((function(){t.enabled=!!e,t.timeoutId=0})),300)}},o=(0,s.default)(a.prototype,"enabled",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a);t.DelayFlag=d},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PagePhonebookCreate=void 0;var a,o=r(n(5)),i=r(n(14)),l=r(n(18)),s=r(n(17)),u=n(21),c=n(6),d=n(1),f=n(50),p=n(339),g=n(11),h=n(26),b=n(4),v=n(10),m=n(15),y=n(3),C=(0,c.observer)(a=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).save=function(t){var n;if(!(0,u.isEmpty)(t)){var r=t.phonebook;delete t.phonebook;var a={display_name:null===(n=h.contactStore.getManagerContact(t.$lang))||void 0===n?void 0:n.toDisplayName(t),phonebook:r,shared:!1,info:t};f.pbx.setContact(a).then((function(e){e&&h.contactStore.upsertPhonebook(Object.assign(a,{id:e.aid}))})).then(e.onSaveSuccess).catch(e.onSaveFailure)}},e.onSaveSuccess=function(){(0,v.Nav)().goToPageContactPhonebook()},e.onSaveFailure=function(e){m.RnAlert.error({message:(0,b.intlDebug)("Failed to save the contact",{}),err:e})},e}return(0,i.default)(n,[{key:"render",value:function(){var e=this;return(0,y.jsx)(p.ContactsCreateForm,{phonebook:this.props.phonebook,onBack:(0,v.Nav)().backToPageContactPhonebook,onSave:function(t){f.pbx.client&&"success"===(0,g.getAuthStore)().pbxState&&e.save(t)},title:(0,b.intl)("New Phonebook",{})})}}]),n}(d.Component))||a;t.PagePhonebookCreate=C},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PagePhonebookUpdate=void 0;var a,o=r(n(5)),i=r(n(14)),l=r(n(18)),s=r(n(17)),u=n(21),c=n(6),d=n(1),f=n(50),p=n(339),g=n(11),h=n(26),b=n(4),v=n(10),m=n(15),y=n(3),C=(0,c.observer)(a=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).save=function(t,n){var r,a;if(n){if(!(0,u.isEmpty)(t)){var o=t.phonebook;delete t.phonebook;var i={id:e.props.contact.id,display_name:null===(r=h.contactStore.getManagerContact(t.$lang))||void 0===r?void 0:r.toDisplayName(t),phonebook:o,shared:!(null===(a=e.props.contact)||void 0===a||!a.shared),info:Object.assign({},t)};f.pbx.setContact(i).then((function(){return e.onSaveSuccess(i)})).catch(e.onSaveFailure)}}else(0,v.Nav)().goToPageContactPhonebook()},e.onSaveSuccess=function(e){(0,v.Nav)().goToPageContactPhonebook(),h.contactStore.upsertPhonebook(e)},e.onSaveFailure=function(e){m.RnAlert.error({message:(0,b.intlDebug)("Failed to save the contact",{}),err:e})},e}return(0,i.default)(n,[{key:"render",value:function(){var e=this;return(0,y.jsx)(p.ContactsCreateForm,{onBack:(0,v.Nav)().backToPageContactPhonebook,onSave:function(t,n){f.pbx.client&&"success"===(0,g.getAuthStore)().pbxState&&e.save(t,n)},title:(0,b.intl)("Update Phonebook",{}),updatingPhonebook:this.props.contact})}}]),n}(d.Component))||a;t.PagePhonebookUpdate=C},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PageSettingsCurrentAccount=void 0;var r=n(6),a=n(211),o=n(32),i=n(11),l=n(4),s=n(10),u=n(15),c=n(33),d=n(3),f=(0,r.observer)((function(){return(0,d.jsx)(a.AccountCreateForm,{footerLogout:!0,onBack:(0,s.Nav)().backToPageContactUsers,onSave:function(e,t){t||(0,s.Nav)().backToPageContactPhonebook(),u.RnAlert.prompt({title:(0,l.intl)("Save Account",{}),message:(0,l.intl)("Do you want to update your account?\\nYou'll need to sign out and then sign in again.",{}),onConfirm:function(){o.accountStore.upsertAccount(e),(0,s.Nav)().goToPageAccountSignIn(),c.BackgroundTimer.setTimeout((function(){return(0,i.getAuthStore)().signIn(e)}),300)},confirmText:(0,l.intl)("SAVE",{})})},title:(0,l.intl)("Current Account",{}),updating:(0,i.getAuthStore)().getCurrentAccount()})}));t.PageSettingsCurrentAccount=f},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageSettingsDebug=void 0;var a,o=r(n(5)),i=r(n(14)),l=r(n(18)),s=r(n(17)),u=r(n(757)),c=n(6),d=r(n(77)),f=n(1),p=n(2),g=n(16),h=n(44),b=n(30),v=n(8),m=n(7),y=n(105),C=n(4),S=n(10),x=n(3),k=p.StyleSheet.create({BtnIcon:{transform:[{rotate:"180deg"}]},Text:{paddingHorizontal:20}}),P=(0,c.observer)(a=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"render",value:function(){var e="web"!==p.Platform.OS&&(0,y.compareSemVer)(y.debugStore.remoteVersion,m.currentVersion)>0;return(0,x.jsxs)(b.Layout,{description:(0,C.intl)("App information and debugging",{}),dropdown:"web"!==p.Platform.OS?[{label:(0,C.intl)("Clear all log files",{}),onPress:y.debugStore.clearLogFiles,danger:!0},{label:(0,C.intl)("Manually check for update",{}),onPress:y.debugStore.checkForUpdate}]:void 0,onBack:(0,S.Nav)().backToPageAccountSignIn,title:(0,C.intl)("Debug",{}),children:["web"!==p.Platform.OS&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(h.Field,{isGroup:!0,label:(0,C.intl)("DEBUG LOG",{})}),(0,x.jsx)(h.Field,{label:(0,C.intl)("CAPTURE ALL DEBUG LOG",{}),onValueChange:y.debugStore.toggleCaptureDebugLog,type:"Switch",value:y.debugStore.captureDebugLog}),(0,x.jsx)(h.Field,{createBtnIcon:g.mdiKeyboardBackspace,createBtnIconStyle:k.BtnIcon,label:(0,C.intl)("OPEN DEBUG LOG",{}),onCreateBtnPress:y.debugStore.openLogFile,onTouchPress:y.debugStore.openLogFile,value:(0,u.default)(y.debugStore.getLogSize(),{round:0})}),(0,x.jsx)(h.Field,{hasMargin:!0,isGroup:!0,label:(0,C.intl)("UPDATE",{})}),(0,x.jsx)(h.Field,{createBtnIcon:g.mdiKeyboardBackspace,createBtnIconStyle:k.BtnIcon,label:(0,C.intl)("UPDATE",{}),onCreateBtnPress:y.debugStore.openInStore,onTouchPress:y.debugStore.openInStore,value:(0,C.intl)("Open Brekeke Phone on store",{})}),(0,x.jsxs)(v.RnText,{normal:!0,primary:!e,small:!0,style:k.Text,warning:e,children:[(0,C.intl)("Current version: {{$0}}",{$0:m.currentVersion}),"\n",y.debugStore.isCheckingForUpdate?(0,C.intl)("Checking for update...",{}):e?(0,C.intl)("A new version is available: {{$0}}",{$0:y.debugStore.remoteVersion}):(0,C.intl)("Brekeke Phone is up-to-date, checked {{$0}}",{$0:(0,d.default)(y.debugStore.remoteVersionLastCheck).fromNow()})]})]}),"web"===p.Platform.OS&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(v.RnText,{normal:!0,primary:!0,small:!0,style:k.Text,children:(0,C.intl)("Current version: {{$0}}",{$0:m.currentVersion})}),(0,x.jsx)(v.RnText,{normal:!0,warning:!0,small:!0,style:k.Text,children:(0,C.intl)("You are running an in-browser version of Web Phone",{})})]})]})}}]),n}(f.Component))||a;t.PageSettingsDebug=P},,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageSettingsOther=void 0;var a,o=r(n(34)),i=r(n(5)),l=r(n(14)),s=r(n(18)),u=r(n(17)),c=n(6),d=n(1),f=n(2),p=n(40),g=n(16),h=n(44),b=n(30),v=n(11),m=n(105),y=n(4),C=n(80),S=n(15),x=n(3),k=(0,c.observer)(a=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={status:"",statusText:""},e.setStatusText=function(t){e.setState({statusText:t})},e.submitStatusText=function(){e.setStatus(e.state.status,e.state.statusText)},e.submitStatus=function(t){e.setStatus(t,e.state.statusText)},e.setStatus=function(t,n){p.uc.setStatus(t,n).then((function(){var t=p.uc.me();e.setState({status:t.status,statusText:t.statusText})})).catch((function(e){S.RnAlert.error({message:(0,y.intlDebug)("Failed to change UC status",{}),err:e})}))},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=p.uc.me();this.setState({status:e.status,statusText:e.statusText})}},{key:"render",value:function(){var e=(0,v.getAuthStore)(),t=e.getCurrentAccount();return(0,x.jsxs)(b.Layout,{description:(0,y.intl)("Other settings for PBX/UC",{}),dropdown:[].concat((0,o.default)(e.isConnFailure()?[{label:(0,y.intl)("Reconnect to server",{}),onPress:e.resetFailureStateIncludeUcLoginFromAnotherPlace}]:[]),(0,o.default)("web"!==f.Platform.OS?[{label:(0,y.intl)("Open debug log",{}),onPress:m.debugStore.openLogFile}]:[]),[{label:(0,y.intl)("Logout",{}),onPress:e.signOut,danger:!0}]),menu:"settings",subMenu:"other",title:(0,y.intl)("Other Settings",{}),children:[(0,x.jsx)(h.Field,{isGroup:!0,label:(0,y.intl)("LOCALIZATION",{})}),(0,x.jsx)(h.Field,{icon:g.mdiTranslate,label:(0,y.intl)("LANGUAGE",{}),onTouchPress:C.intlStore.selectLocale,value:C.intlStore.locale,valueRender:function(){return C.intlStore.getLocaleName()}}),(null===t||void 0===t?void 0:t.ucEnabled)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(h.Field,{isGroup:!0,label:"UC"}),(0,x.jsx)(h.Field,{disabled:!t.ucEnabled,label:(0,y.intl)("STATUS",{}),onValueChange:this.submitStatus,options:[{key:"online",label:(0,y.intl)("Online",{})},{key:"offline",label:(0,y.intl)("Invisible",{})},{key:"busy",label:(0,y.intl)("Busy",{})}],type:"RnPicker",value:this.state.status}),(0,x.jsx)(h.Field,{createBtnIcon:g.mdiCheck,disabled:!t.ucEnabled,label:(0,y.intl)("STATUS NOTE",{}),onCreateBtnPress:this.submitStatusText,onSubmitEditing:this.submitStatusText,onValueChange:this.setStatusText,value:this.state.statusText})]})]})}}]),n}(d.Component))||a;t.PageSettingsOther=k},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PageWebChat=void 0;var a,o=r(n(5)),i=r(n(14)),l=r(n(18)),s=r(n(17)),u=n(6),c=n(1),d=n(760),f=n(44),p=n(30),g=n(8),h=n(37),b=n(4),v=n(10),m=n(3),y=(0,u.observer)(a=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"render",value:function(){var e=h.chatStore.groups.filter((function(e){return e.webchat}));return(0,m.jsxs)(p.Layout,{description:(0,b.intl)("UC recent active chat",{}),dropdown:[{label:(0,b.intl)("Create group chat",{}),onPress:(0,v.Nav)().goToPageChatGroupCreate}],menu:"contact",subMenu:"webchat",title:(0,b.intl)("WebChat",{}),children:[(0,m.jsx)(f.Field,{isGroup:!0,label:(0,b.intl)("WEBCHAT THREADS",{})}),!e.length&&(0,m.jsx)(g.RnText,{center:!0,normal:!0,small:!0,warning:!0,style:{marginTop:5},children:(0,b.intl)("There's no active chat thread",{})}),(0,m.jsx)(d.ListWebchats,{datas:e})]})}}]),n}(c.Component))||a;t.PageWebChat=y},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ListWebchats=void 0;var r=n(6),a=n(761),o=n(3),i=(0,r.observer)((function(e){return(0,o.jsx)(o.Fragment,{children:e.datas.map((function(e){return e.webchat&&(0,o.jsx)(a.WebchatItem,{data:e.webchat},e.id)}))})}));t.ListWebchats=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebchatItem=void 0;var r=n(6),a=n(1),o=n(2),i=n(40),l=n(16),s=n(37),u=n(4),c=n(10),d=n(107),f=n(8),p=n(7),g=n(3),h=o.StyleSheet.create({Row:{flexDirection:"row",paddingHorizontal:5,alignItems:"center",borderBottomWidth:.5,borderBottomColor:p.v.borderBg},Column:{padding:5},BtnText:{paddingVertical:5,paddingHorizontal:10,minWidth:80,backgroundColor:p.v.colors.primary,borderRadius:4,justifyContent:"center",alignItems:"center",marginVertical:5},Text:{paddingLeft:10,paddingHorizontal:5,paddingVertical:10,textAlign:"left",minWidth:80},TextMessage:{flex:1},icon:{padding:10},bgUnread:{backgroundColor:p.v.colors.primaryFn(.5)}}),b=(0,r.observer)((function(e){var t=e.data,n=s.chatStore.getMessagesByThreadId(t.conf_id),r=t.conf_status===i.Constants.CONF_STATUS_INVITED_WEBCHAT,b=t.conf_status===i.Constants.CONF_STATUS_INVITED,v=t.conf_status===i.Constants.CONF_STATUS_INACTIVE,m=t.conf_status===i.Constants.CONF_STATUS_JOINED,y=n.slice(Math.max(n.length-5,0)),C=(0,a.useCallback)((function(){i.uc.answerWebchatConference(t.conf_id),(0,c.Nav)().goToPageChatGroupDetail({groupId:t.conf_id})}),[t.conf_id]),S=(0,a.useCallback)((function(){(0,c.Nav)().goToPageChatGroupDetail({groupId:t.conf_id})}),[t.conf_id]),x=(0,a.useCallback)((function(){i.uc.joinWebchatConference(t.conf_id),(0,c.Nav)().goToPageChatGroupDetail({groupId:t.conf_id})}),[t.conf_id]),k=(0,a.useCallback)((function(){s.chatStore.removeWebchatItem(t.conf_id)}),[t.conf_id]);return(0,g.jsxs)(o.View,{style:[h.Row,r?h.bgUnread:null],children:[(0,g.jsxs)(o.View,{style:h.Column,children:[r?(0,g.jsx)(f.RnTouchableOpacity,{onPress:C,style:h.BtnText,children:(0,g.jsx)(f.RnText,{normal:!0,white:!0,bold:!0,children:(0,u.intl)("Answer",{})})}):(0,g.jsx)(f.RnTouchableOpacity,{onPress:S,style:[h.BtnText,{backgroundColor:m?p.v.layerBg:p.v.borderBg}],children:(0,g.jsx)(f.RnText,{normal:!0,white:!0,bold:!0,children:(0,u.intl)("Show",{})})}),(0,g.jsx)(f.RnTouchableOpacity,{disabled:!b,onPress:x,style:[h.BtnText,{backgroundColor:b?p.v.layerBg:p.v.borderBg}],children:(0,g.jsx)(f.RnText,{normal:!0,white:!0,bold:!0,children:(0,u.intl)("Join",{})})})]}),r?(0,g.jsx)(d.Duration,{normal:!0,singleLine:!0,small:!0,style:h.Text,children:t.created_tstamp}):(0,g.jsx)(f.RnText,{normal:!0,singleLine:!0,small:!0,style:h.Text,children:t.assigned.user_id||""}),(0,g.jsx)(f.RnText,{normal:!0,singleLine:!0,small:!0,style:h.Text,children:t.webchatinfo.profinfo_formatted||""}),(0,g.jsx)(f.RnText,{normal:!0,small:!0,style:[h.Text,h.TextMessage],children:y.map((function(e,t,n){var r=n.length;return e.text+(t===r-1?"":"\n")}))}),v&&(0,g.jsx)(f.RnTouchableOpacity,{onPress:k,children:(0,g.jsx)(f.RnIcon,{path:l.mdiClose,style:h.icon})})]})}));t.WebchatItem=b},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.CallStore=void 0;var a,o,i,l,s,u,c,d,f,p,g,h,b,v,m,y,C,S,x,k,P,w,A,T,I,j,_,R=r(n(12)),O=r(n(763)),B=r(n(34)),M=r(n(13)),U=r(n(22)),L=r(n(5)),F=r(n(20)),D=(r(n(23)),n(21)),V=n(9),N=n(2),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=ce(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(63)),H=r(n(63)),z=n(121),W=n(50),G=n(64),K=n(40),X=n(127),Z=n(49),J=n(33),q=n(62),Y=n(328),$=n(32),Q=n(764),ee=n(130),te=n(11),ne=n(221),re=n(19),ae=n(4),oe=n(10),ie=n(15),le=n(341),se=n(75),ue=n(107);function ce(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ce=function(e){return e?n:t})(e)}var de=(a=function e(){var t=this;(0,L.default)(this,e),(0,U.default)(this,"inPageCallManage",o,this),this.recentCallActivityAt=0,this.getCallKeep=function(e,n){var r=t.getPnIdFromUuid(e);return t.calls.find((function(t){return(!r||t.pnId===r)&&(!t.callkeepUuid||t.callkeepUuid===e)&&((null===n||void 0===n?void 0:n.includingOutgoing)||t.incoming)&&((null===n||void 0===n?void 0:n.includingAnswered)||!t.answered&&!t.callkeepAlreadyAnswered)&&((null===n||void 0===n?void 0:n.includingRejected)||!t.callkeepAlreadyRejected)&&!t.isAboutToHangup}))},this.autoAnswer=function(e){"ios"===N.Platform.OS&&E.default.answerIncomingCall(e),q.BrekekeUtils.onCallKeepAction(e,"answerCall")},(0,U.default)(this,"onCallKeepDidDisplayIncomingCall",i,this),(0,U.default)(this,"onCallKeepAnswerCall",l,this),(0,U.default)(this,"onCallKeepEndCall",s,this),(0,U.default)(this,"calls",u,this),this.setCurrentCallId=function(e){t.displayingCallId=e,t.ongoingCallId=e},(0,U.default)(this,"ongoingCallId",c,this),(0,U.default)(this,"displayingCallId",d,this),this.prevDisplayingCallId="",this.getOngoingCall=function(){t.updateCurrentCallDebounce();var e=t.calls.find((function(e){return e.id===t.ongoingCallId}));if(e){var n,r,a,o=null===(n=(0,te.getAuthStore)())||void 0===n||null===(r=n.getCurrentAccount())||void 0===r?void 0:r.ucEnabled;e.answered||e.partyImageUrl&&null!==(a=e.partyImageUrl)&&void 0!==a&&a.length||(e.partyImageUrl=o?t.getOriginalUserImageUrl(e.pbxTenant,e.partyNumber):"",e.partyImageSize=o?"large":""),!e.answered||e.talkingImageUrl&&e.talkingImageUrl.length||(e.talkingImageUrl=o?t.getOriginalUserImageUrl(e.pbxTenant,e.partyNumber):"")}return e},(0,U.default)(this,"updateCallAvatar",f,this),this.getOriginalUserImageUrl=function(e,t){if(!e||!t)return"";var n=(0,te.getAuthStore)().getCurrentAccount();if(!n)return"";var r=n.pbxHostname+":"+n.pbxPort;return r.indexOf(":")<0&&(r+=":443"),(r.endsWith(":80")?"http":"https")+"://"+r+"/uc/image?ACTION=DOWNLOAD&tenant="+e+"&user="+t+"&SIZE=ORIGINAL"},this.incallManagerStarted=!1,this.onCallUpsert=function(e){t.upsertCall(e),"android"===N.Platform.OS&&!t.incallManagerStarted&&t.calls.find((function(e){return e.answered||!e.incoming}))&&(t.incallManagerStarted=!0,H.default.start(),H.default.setForceSpeakerphoneOn(!1))},(0,U.default)(this,"upsertCall",p,this),(0,U.default)(this,"onCallRemove",g,this),(0,U.default)(this,"onSelectBackgroundCall",h,this),this.startCallIntervalAt=0,this.startCallIntervalId=0,this.clearStartCallIntervalTimer=function(){t.startCallIntervalId&&(J.BackgroundTimer.clearInterval(t.startCallIntervalId),t.startCallIntervalId=0)},this.startCall=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o=(0,te.getAuthStore)();o.sipTotalFailure=0;var i=function(){var t;return null===(t=G.sip.phone)||void 0===t?void 0:t.makeCall.apply(t,[e].concat(r))};if("waiting"===o.sipState||"failure"===o.sipState||"stopped"===o.sipState)return(0,te.reconnectAndWaitSip)().then(i),void(0,oe.Nav)().goToPageCallManage({isOutgoingCall:!0});if("connecting"===o.sipState)return(0,te.waitSip)().then(i),void(0,oe.Nav)().goToPageCallManage({isOutgoingCall:!0});if(t.calls.filter((function(e){return!e.incoming&&!e.answered})).length)ie.RnAlert.error({message:(0,ae.intlDebug)("Only make one outgoing call",{})});else{var l=!1;try{W.pbx,i()}catch(c){l=!0,(0,te.reconnectAndWaitSip)().then(i)}(0,oe.Nav)().goToPageCallManage({isOutgoingCall:!0});var s="";"web"!==N.Platform.OS&&(s=(0,z.v4)().toUpperCase(),"ios"===N.Platform.OS&&E.default.startCall(s,e,"Brekeke Phone"),t.setAutoEndCallKeepTimer(s)),(0,V.runInAction)((function(){t.setCurrentCallId("")}));var u=(0,Z.arrToMap)(t.calls,"id");t.clearStartCallIntervalTimer(),t.startCallIntervalAt=Date.now(),t.startCallIntervalId=J.BackgroundTimer.setInterval((0,V.action)((function(){var e=t.calls.find((function(e){return!e.incoming&&!u[e.id]}));if(e)return s&&(e.callkeepUuid=s),t.setCurrentCallId(e.id),void t.clearStartCallIntervalTimer();var n=Date.now()-t.startCallIntervalAt;if(n>1e4)return s&&t.endCallKeep(s),void t.clearStartCallIntervalTimer();!e&&!l&&n>3e3&&(l=!0,(0,te.reconnectAndWaitSip)().then(i),t.clearStartCallIntervalTimer())})),500)}},this.startVideoCall=function(e){return t.startCall(e,void 0,!0)},this.updateBackgroundCalls=function(){t.ongoingCallId&&t.calls.filter((function(e){return e.id!==t.ongoingCallId&&e.answered&&!e.transferring&&!e.holding&&!e.isAboutToHangup})).forEach((function(e){return e.toggleHoldWithCheck()}))},this.updateBackgroundCallsDebounce=(0,D.debounce)(this.updateBackgroundCalls,300,{maxWait:1e3}),(0,U.default)(this,"updateCurrentCall",b,this),this.updateCurrentCallDebounce=(0,D.debounce)(this.updateCurrentCall,300,{maxWait:1e3}),(0,U.default)(this,"callkeepMap",v,this),this.getUuidFromPnId=function(e){var n;return null===(n=Object.values(t.callkeepMap).map((function(e){return e.incomingPnData})).find((function(t){return(null===t||void 0===t?void 0:t.id)===e})))||void 0===n?void 0:n.callkeepUuid},this.getPnIdFromUuid=function(e){var n,r;return null===(n=t.callkeepMap[e])||void 0===n||null===(r=n.incomingPnData)||void 0===r?void 0:r.id},this.getSetUuidPnId=function(e){e.callkeepUuid&&!e.pnId&&(e.pnId=t.getPnIdFromUuid(e.callkeepUuid)),e.pnId&&!e.callkeepUuid&&(e.callkeepUuid=t.getUuidFromPnId(e.pnId))},this.autoEndCallKeepTimerId=0,this.clearAutoEndCallKeepTimer=function(){"web"!==N.Platform.OS&&t.autoEndCallKeepTimerId&&(J.BackgroundTimer.clearInterval(t.autoEndCallKeepTimerId),t.autoEndCallKeepTimerId=0)},(0,U.default)(this,"setAutoEndCallKeepTimer",m,this),(0,U.default)(this,"endCallKeep",y,this),this.endCallKeepAllCalls=function(){"web"!==N.Platform.OS&&E.default.endAllCalls(),q.BrekekeUtils.closeAllIncomingCalls(),t.onCallKeepAction()},(0,U.default)(this,"onCallKeepAction",C,this),this.alreadyShowIncomingCallUi={},this.showIncomingCallUi=function(e){var n=e.callUUID.toUpperCase();if(t.alreadyShowIncomingCallUi[n])console.log("SIP PN debug: showIncomingCallUi: already show this uuid");else{if(t.alreadyShowIncomingCallUi[n]=!0,t.isCallRejected({callkeepUuid:n,pnId:e.pnData.id}))return console.log("SIP PN debug: showIncomingCallUi: call already rejected on js side"),void t.endCallKeep(n);t.onCallKeepDidDisplayIncomingCall(n,e.pnData)}},(0,U.default)(this,"callkeepActionMap",S,this),this.setCallKeepAction=function(e,n){t.getSetUuidPnId(e),e.callkeepUuid&&(t.callkeepActionMap[e.callkeepUuid]=n),e.pnId&&(t.callkeepActionMap[e.pnId]=n),t.onCallKeepAction()},this.getCallKeepAction=function(e){return e.callkeepUuid&&t.callkeepActionMap[e.callkeepUuid]||e.pnId&&t.callkeepActionMap[e.pnId]},this.isCallRejected=function(e){return e&&"rejectCall"===t.getCallKeepAction(e)},this.calleeRejectedMap={},this.setCalleeRejected=function(e){t.getSetUuidPnId(e),e.callkeepUuid&&(t.calleeRejectedMap[e.callkeepUuid]=!0),e.pnId&&(t.calleeRejectedMap[e.pnId]=!0)},this.getCallInNotify=function(){return t.calls.find((function(e){var n=t.callkeepMap[e.callkeepUuid];return e.incoming&&!e.answered&&(!n||n.hasAction||ue.timerStore.now-e.createdAt>1e3)}))},this.shouldRingInNotify=function(e){var n;return(null===(n=(0,te.getAuthStore)().getCurrentAccount())||void 0===n||!n.pushNotificationEnabled)&&("web"===N.Platform.OS||!e||"active"===le.RnAppState.currentState&&(!t.calls.some((function(e){return e.answered}))&&("ios"!==N.Platform.OS||!Object.keys(t.callkeepMap).some((function(n){return n!==e&&!t.callkeepActionMap[n]})))))},this.onSipUaCancel=function(e){if(null!==e&&void 0!==e&&e.pnId){var n=t.getUuidFromPnId(e.pnId);console.log("SIP PN debug: cancel PN uuid="+n),t.setCallKeepAction({pnId:e.pnId},"rejectCall"),n&&t.endCallKeep(n,{completedElseWhere:e.completedElseWhere})}},(0,U.default)(this,"parkNumbers",x,this),(0,U.default)(this,"addParkNumber",k,this),(0,U.default)(this,"removeParkNumber",P,this),(0,U.default)(this,"isLoudSpeakerEnabled",w,this),(0,U.default)(this,"toggleLoudSpeaker",A,this),(0,U.default)(this,"newVoicemailCount",T,this),(0,U.default)(this,"setNewVoicemailCount",I,this),(0,U.default)(this,"videoPositionT",j,this),(0,U.default)(this,"videoPositionL",_,this),"android"===N.Platform.OS&&(q.BrekekeUtils.setIsAppActive("active"===N.AppState.currentState,!1),N.AppState.addEventListener("change",(function(e){q.BrekekeUtils.setIsAppActive("active"===e,!1),"active"!==e&&J.BackgroundTimer.setTimeout((0,M.default)(R.default.mark((function e(){return R.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.BrekekeUtils.isLocked();case 2:if(!e.sent){e.next=4;break}q.BrekekeUtils.setIsAppActive(!1,!0);case 4:case"end":return e.stop()}}),e)}))),300)})))},o=(0,F.default)(a.prototype,"inPageCallManage",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),i=(0,F.default)(a.prototype,"onCallKeepDidDisplayIncomingCall",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,M.default)(R.default.mark((function t(n,r){var a,o,i,l,s,u,c,d,f;return R.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.sipPn.autoAnswer&&!e.calls.some((function(e){return e.callkeepUuid!==n}))&&(le.RnAppState.foregroundOnce&&"active"!==N.AppState.currentState&&E.default.backToForeground(),J.BackgroundTimer.setTimeout((function(){return e.autoAnswer(n)}),2e3)),e.setAutoEndCallKeepTimer(n,r),(0,G.checkAndRemovePnTokenViaSip)(r),(a=e.getCallKeep(n))&&(a.callkeepUuid=n,q.BrekekeUtils.setCallConfig(n,JSON.stringify(a.callConfig))),o=e.isCallRejected({callkeepUuid:n,pnId:r.id}),i=!1,t.next=9,$.accountStore.findDataByPn(r);case 9:if(l=t.sent,s=Number(null===l||void 0===l?void 0:l.pnExpires)||5e4,u=Date.now(),r.time&&(i=u>r.time+s),console.log("SIP PN debug: onCallKeepDidDisplayIncomingCall uuid="+n+" pnId="+r.id+" sessionId="+(null===a||void 0===a?void 0:a.id)+" rejected="+o+" now="+u+" n.time="+r.time+" pnExpires="+s+" expired="+i),!o&&!i){t.next=17;break}return e.endCallKeep(n),t.abrupt("return");case 17:if(!(u-e.recentCallActivityAt>3e3)){t.next=23;break}if("connecting"!==(d=(0,te.getAuthStore)()).sipState){t.next=21;break}return t.abrupt("return");case 21:(f=null===(c=G.sip.phone)||void 0===c?void 0:c.getSessionCount())||(console.log("SIP PN debug: new notification: phone.getSessionCount()="+f+" | call destroyWebRTC()"),d.sipState="stopped",G.sip.destroyWebRTC(),ee.authSIP.authWithCheck());case 23:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),l=(0,F.default)(a.prototype,"onCallKeepAnswerCall",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setCallKeepAction({callkeepUuid:t},"answerCall");var n=e.getCallKeep(t);console.log("SIP PN debug: onCallKeepAnswerCall found: "+!!n),n&&!n.callkeepAlreadyAnswered&&(n.callkeepAlreadyAnswered=!0,n.answer())}}}),s=(0,F.default)(a.prototype,"onCallKeepEndCall",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setCallKeepAction({callkeepUuid:t},"rejectCall");var n=e.getCallKeep(t,{includingAnswered:!0,includingRejected:"android"===N.Platform.OS,includingOutgoing:"ios"===N.Platform.OS});console.log("SIP PN debug: onCallKeepEndCall found: "+!!n),n&&(n.callkeepAlreadyRejected=!0,n.hangupWithUnhold()),e.endCallKeep(t)}}}),u=(0,F.default)(a.prototype,"calls",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,F.default)(a.prototype,"ongoingCallId",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=(0,F.default)(a.prototype,"displayingCallId",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=(0,F.default)(a.prototype,"updateCallAvatar",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){var r=e.getOngoingCall();r&&(r.partyImageUrl=t,r.partyImageSize=n||"small")}}}),p=(0,F.default)(a.prototype,"upsertCall",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.updateCurrentCallDebounce();var n=Date.now();e.recentCallActivityAt=n;var r=e.calls.find((function(e){return e.id===t.id}));if(r)return t.callConfig&&Object.assign(r.callConfig,t.callConfig),delete t.callConfig,r.callkeepUuid&&q.BrekekeUtils.setCallConfig(r.callkeepUuid,JSON.stringify(r.callConfig)),t.rawSession&&r.rawSession&&(Object.assign(r.rawSession,t.rawSession),delete t.rawSession),t.videoSessionId&&r.videoSessionId&&t.videoSessionId!==r.videoSessionId&&!t.remoteVideoEnabled&&(delete t.videoSessionId,delete t.remoteVideoEnabled,delete t.remoteVideoStreamObject),!r.answered&&t.answered&&(e.setCurrentCallId(r.id),r.answerCallKeep(),t.answeredAt=n,q.BrekekeUtils.onCallConnected(r.callkeepUuid)),Object.assign(r,t,{withSDPControls:r.withSDPControls||t.withSDP}),r.incoming&&r.callkeepUuid&&q.BrekekeUtils.setRemoteVideoStreamURL(r.callkeepUuid,r.remoteVideoStreamObject?r.remoteVideoStreamObject.toURL():""),r.talkingImageUrl&&r.talkingImageUrl.length>0&&q.BrekekeUtils.setTalkingAvatar(r.callkeepUuid,r.talkingImageUrl,"large"===r.partyImageSize),r.incoming&&r.callkeepUuid&&"boolean"===typeof r.localVideoEnabled&&q.BrekekeUtils.setIsVideoCall(r.callkeepUuid,!!r.localVideoEnabled),void(window._BrekekePhoneWebRoot||X.embedApi.emit("call_update",r));var a=new ne.Call(e);if(Object.assign(a,t),e.calls=[a].concat((0,B.default)(e.calls)),e.displayingCallId=a.id,q.BrekekeUtils.setJsCallsSize(e.calls.length),window._BrekekePhoneWebRoot||X.embedApi.emit("call",a),"web"===N.Platform.OS&&a.incoming&&!a.answered&&(0,Y.webShowNotification)(a.getDisplayName()+" "+(0,ae.intl)("Incoming call",{}),a.getDisplayName()),"web"!==N.Platform.OS&&a.incoming&&!a.answered){a.callkeepUuid=a.callkeepUuid||e.getUuidFromPnId(a.pnId)||"";var o=e.getCallKeepAction(a);console.log("PN ID debug: upsertCall pnId="+a.pnId+" callkeepUuid="+a.callkeepUuid+" callkeepAction="+o),"answerCall"===o?(a.callkeepAlreadyAnswered=!0,a.answer(),console.log("SIP PN debug: answer by recentPnAction")):"rejectCall"===o&&(a.callkeepAlreadyRejected=!0,a.hangupWithUnhold(),console.log("SIP PN debug: reject by recentPnAction"))}}}}),g=(0,F.default)(a.prototype,"onCallRemove",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,M.default)(R.default.mark((function t(n){var r;return R.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.updateCurrentCallDebounce(),e.recentCallActivityAt=Date.now(),r=e.calls.find((function(e){return e.id===n.sessionId}))){t.next=5;break}return t.abrupt("return");case 5:return r.rawSession?Object.assign(r.rawSession,n):r.rawSession=n,e.onSipUaCancel({pnId:r.pnId}),r.callkeepUuid&&e.endCallKeep(r.callkeepUuid),t.next=10,(0,Q.addCallHistory)(r);case 10:r.callkeepUuid="",r.callkeepAlreadyRejected=!0,e.calls=e.calls.filter((function(e){return e!==r})),q.BrekekeUtils.setJsCallsSize(e.calls.length),"success"===(0,te.getAuthStore)().ucState&&r.answeredAt&&!r.incoming&&K.uc.sendCallResult(r.getDuration(),r.partyNumber),"web"===N.Platform.OS||e.calls.length||(e.isLoudSpeakerEnabled=!1,H.default.setForceSpeakerphoneOn(!1)),"android"===N.Platform.OS&&e.incallManagerStarted&&!e.calls.length&&(e.incallManagerStarted=!1,H.default.stop()),window._BrekekePhoneWebRoot||X.embedApi.emit("call_end",r);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),h=(0,F.default)(a.prototype,"onSelectBackgroundCall",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.holding&&t.toggleHoldWithCheck(),e.calls.filter((function(e){return e.id!==t.id&&e.answered&&!e.holding})).forEach((function(e){return e.toggleHoldWithCheck()})),e.setCurrentCallId(t.id),(0,oe.Nav)().backToPageCallManage()}}}),b=(0,F.default)(a.prototype,"updateCurrentCall",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.calls.find((function(t){return t.id===e.ongoingCallId}))||e.calls.find((function(e){return e.answered&&!e.holding&&!e.isAboutToHangup}))||e.calls.find((function(e){return e}));if(e.setCurrentCallId((null===t||void 0===t?void 0:t.id)||""),!e.ongoingCallId){var n=(0,O.default)(se.RnStacker.stacks),r=n[0];n.slice(1).some((function(e){return e.name.startsWith("PageCall")}))&&(se.RnStacker.stacks=[r])}e.updateBackgroundCallsDebounce()}}}),v=(0,F.default)(a.prototype,"callkeepMap",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=(0,F.default)(a.prototype,"setAutoEndCallKeepTimer",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){"web"!==N.Platform.OS&&(n&&(n.callkeepUuid=t),e.callkeepMap[t]={uuid:t,at:Date.now(),incomingPnData:n},e.clearAutoEndCallKeepTimer(),e.autoEndCallKeepTimerId=J.BackgroundTimer.setInterval((function(){var t=Date.now();Object.values(e.callkeepMap).forEach((function(n){t-n.at>2e4&&(e.calls.find((function(e){return e.callkeepUuid===n.uuid}))||e.endCallKeep(n.uuid))})),Object.keys(e.callkeepMap).length||e.clearAutoEndCallKeepTimer()}),500))}}}),y=(0,F.default)(a.prototype,"endCallKeep",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.setAction,o=void 0===a||a,i=r.completedElseWhere;if(t){console.log("PN callkeep debug: endCallKeep "+t),o&&e.setCallKeepAction({callkeepUuid:t},"rejectCall");var l=null===(n=e.callkeepMap[t])||void 0===n?void 0:n.incomingPnData;!l||e.calls.some((function(e){return e.callkeepUuid===t||e.pnId===l.id}))||i||(0,Q.addCallHistory)(l),(e.callkeepMap[t]||"ios"!==N.Platform.OS)&&(delete e.callkeepMap[t],E.default.rejectCall(t),E.default.endCall(t),E.default.reportEndCallWithUUID(t,E.CONSTANTS.END_CALL_REASONS.REMOTE_ENDED),q.BrekekeUtils.closeIncomingCall(t))}}}}),C=(0,F.default)(a.prototype,"onCallKeepAction",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.calls.map((function(t){return e.callkeepMap[t.callkeepUuid]})).filter((function(e){return e})).forEach((function(e){e.hasAction=!0}))}}}),S=(0,F.default)(a.prototype,"callkeepActionMap",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),x=(0,F.default)(a.prototype,"parkNumbers",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),k=(0,F.default)(a.prototype,"addParkNumber",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.parkNumbers[t]=!0}}}),P=(0,F.default)(a.prototype,"removeParkNumber",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){delete e.parkNumbers[t]}}}),w=(0,F.default)(a.prototype,"isLoudSpeakerEnabled",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=(0,F.default)(a.prototype,"toggleLoudSpeaker",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){"web"!==N.Platform.OS&&(e.isLoudSpeakerEnabled=!e.isLoudSpeakerEnabled,H.default.setForceSpeakerphoneOn(e.isLoudSpeakerEnabled))}}}),T=(0,F.default)(a.prototype,"newVoicemailCount",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=(0,F.default)(a.prototype,"setNewVoicemailCount",[V.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.newVoicemailCount=t}}}),j=(0,F.default)(a.prototype,"videoPositionT",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),_=(0,F.default)(a.prototype,"videoPositionL",[V.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),a);t.CallStore=de;var fe=new de;(0,re.setCallStore)(fe)},,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.addCallHistory=void 0;var a=r(n(12)),o=r(n(13)),i=r(n(213)),l=r(n(77)),s=n(2),u=r(n(325)),c=n(121),d=n(26),f=n(46),p=n(32),g=n(11),h=n(221),b=n(19),v=n(4),m={},y=function(){var e=(0,o.default)(a.default.mark((function e(t){var n,r,o,i,s,u,v;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t instanceof h.Call||"partyNumber"in t)||"8"!==t.partyNumber){e.next=3;break}return e.abrupt("return");case 3:if(!(r=n?t.pnId:t.id)){e.next=8;break}if(!m[r]){e.next=7;break}return e.abrupt("return");case 7:m[r]=!0;case 8:if(e.t0=!n,!e.t0){e.next=13;break}return e.next=12,p.accountStore.findByPn(t);case 12:e.t0=!e.sent;case 13:if(!e.t0){e.next=16;break}return console.log("checkAndRemovePnTokenViaSip debug: do not add history account not exist"),e.abrupt("return");case 16:if(o=(0,c.v4)(),i=(0,l.default)().format("HH:mm - MMM D"),s=n?{id:o,created:i,incoming:t.incoming,answered:t.answered,partyName:t.getDisplayName(),partyNumber:t.partyNumber,duration:t.getDuration(),isAboutToHangup:t.isAboutToHangup}:{id:o,created:i,incoming:!0,answered:!1,partyName:(0,d.getPartyName)(t.from)||t.displayName||t.from,partyNumber:t.from,duration:0,isAboutToHangup:!1},u=(0,b.getCallStore)().calleeRejectedMap,u[t.callkeepUuid]||u[r]||C(s),v=(0,g.getAuthStore)(),v.getCurrentAccount()){e.next=27;break}return e.next=27,(0,f.waitTimeout)();case 27:if(v.getCurrentAccount()){e.next=29;break}return e.abrupt("return");case 29:v.pushRecentCall(s);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.addCallHistory=y;var C=function(e){if("web"!==s.Platform.OS&&!e.answered&&e.incoming&&!e.isAboutToHangup){var t=(0,v.intl)("Missed call",{}),n=e.partyName||e.partyNumber;"android"===s.Platform.OS?u.default.presentLocalNotification({title:t,body:n,number:0,priority:"high",show_in_foreground:!0,local_notification:!0,wake_screen:!1,ongoing:!1,lights:!0,channel:"default",icon:"ic_launcher",id:"missedcall-"+Date.now(),pre_app_state:s.AppState.currentState,my_custom_data:"local_notification",is_local_notification:"local_notification"}):i.default.getApplicationIconBadgeNumber((function(e){e=1+(Number(e)||0),i.default.addNotificationRequest({id:"missedcall-"+Date.now(),title:t,body:n,sound:void 0,badge:e,userInfo:{id:"missedcall-"+Date.now(),aps:{title:t,body:n,my_custom_data:"local_notification",pre_app_state:s.AppState.currentState,local_notification:!0,is_local_notification:"local_notification"}}}),i.default.setApplicationIconBadgeNumber(e)}))}}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.AuthStore=void 0;var a,o,i,l,s,u,c,d,f,p,g,h,b,v,m,y,C,S,x,k=r(n(12)),P=r(n(34)),w=r(n(13)),A=r(n(22)),T=r(n(5)),I=r(n(14)),j=r(n(20)),_=(r(n(23)),n(21)),R=n(9),O=n(2),B=n(64),M=n(33),U=n(766),L=n(32),F=n(225),D=n(130),V=n(11),N=n(226),E=n(19),H=n(37),z=n(26),W=n(4),G=n(10),K=n(15),X=n(341),Z=n(65),J=(a=function(){function e(){var t=this;(0,T.default)(this,e),this.hasInternetConnected=null,(0,A.default)(this,"sipPn",o,this),(0,A.default)(this,"pbxState",i,this),(0,A.default)(this,"pbxTotalFailure",l,this),(0,A.default)(this,"sipState",s,this),(0,A.default)(this,"sipTotalFailure",u,this),(0,A.default)(this,"ucState",c,this),(0,A.default)(this,"ucTotalFailure",d,this),(0,A.default)(this,"ucLoginFromAnotherPlace",f,this),this.pbxShouldAuth=function(){return t.getCurrentAccount()&&"waiting"!==t.pbxState&&(!t.sipPn.sipAuth||"success"===t.sipState||"failure"===t.sipState)&&("stopped"===t.pbxState||"failure"===t.pbxState&&"active"===X.RnAppState.currentState)},this.pbxConnectingOrFailure=function(){return["waiting","connecting","failure"].some((function(e){return e===t.pbxState}))},this.sipShouldAuth=function(){return"waiting"!==t.sipState&&"connecting"!==t.sipState&&"success"!==t.sipState&&(t.signedInId&&t.sipPn.sipAuth||"success"===t.pbxState&&("stopped"===t.sipState||"failure"===t.sipState&&"active"===X.RnAppState.currentState))},this.sipConnectingOrFailure=function(){return["waiting","connecting","failure"].some((function(e){return e===t.sipState}))},this.ucShouldAuth=function(){var e;return(null===(e=t.getCurrentAccount())||void 0===e?void 0:e.ucEnabled)&&!t.ucLoginFromAnotherPlace&&!t.isSignInByNotification&&"success"===t.pbxState&&"waiting"!==t.ucState&&("stopped"===t.ucState||"failure"===t.ucState&&"active"===X.RnAppState.currentState)},this.ucConnectingOrFailure=function(){var e;return(null===(e=t.getCurrentAccount())||void 0===e?void 0:e.ucEnabled)&&["waiting","connecting","failure"].some((function(e){return e===t.ucState}))},this.isConnFailure=function(){var e;return[t.pbxState,t.sipState,(null===(e=t.getCurrentAccount())||void 0===e?void 0:e.ucEnabled)&&t.ucState].some((function(e){return"failure"===e}))},(0,A.default)(this,"signedInId",p,this),this.getCurrentAccount=function(){return L.accountStore.accounts.find((function(e){return e.id===t.signedInId}))},this.getCurrentData=function(){return L.accountStore.findDataSync(t.getCurrentAccount())},this.getCurrentDataAsync=function(){return L.accountStore.findDataAsync(t.getCurrentAccount())},(0,A.default)(this,"ucConfig",g,this),(0,A.default)(this,"pbxConfig",h,this),this.signIn=function(){var e=(0,w.default)(k.default.mark((function e(n,r){var a;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,L.accountStore.findDataAsync(n);case 4:if(a=e.sent,n.pbxPassword||a.accessToken){e.next=9;break}return(0,G.Nav)().goToPageAccountUpdate({id:n.id}),K.RnAlert.error({message:(0,W.intlDebug)("The account password is empty",{})}),e.abrupt("return",!0);case 9:if(t.signedInId=n.id,r){e.next=13;break}return e.next=13,(0,L.saveLastSignedInId)((0,L.getAccountUniqueId)(n));case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.autoSignInEmbed=(0,w.default)(k.default.mark((function e(){var n;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.getLastSignedInId)();case 2:n=e.sent,t.signIn(L.accountStore.accounts.find((function(e){return(0,L.getAccountUniqueId)(e)===n.id}))||L.accountStore.accounts[0]);case 4:case"end":return e.stop()}}),e)}))),this.signOut=function(){console.log("signOut debug: autoStore.signOut"),(0,L.saveLastSignedInId)(!1),t.signOutWithoutSaving()},this.signOutWithoutSaving=function(){try{(0,E.getCallStore)().calls.forEach((function(e){return e.hangupWithUnhold()})),"web"!==O.Platform.OS&&(0,E.getCallStore)().endCallKeepAllCalls(),t.resetState()}catch(e){console.error("signOut debug: signOutWithoutSaving error:",e)}console.log("signOut debug: goToPageAccountSignIn"),(0,G.Nav)().goToPageAccountSignIn(),console.log("signOut debug: goToPageAccountSignIn done")},(0,A.default)(this,"resetState",b,this),(0,A.default)(this,"resetFailureState",v,this),(0,A.default)(this,"reconnectPbx",m,this),(0,A.default)(this,"reconnectSip",y,this),(0,A.default)(this,"resetFailureStateIncludeUcLoginFromAnotherPlace",C,this),this.pushRecentCall=function(){var e=(0,w.default)(k.default.mark((function e(n){var r;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCurrentDataAsync();case 2:(r=e.sent).recentCalls=[n].concat((0,P.default)(r.recentCalls)),r.recentCalls.length>20&&r.recentCalls.pop(),L.accountStore.saveAccountsToLocalStorageDebounced();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updatePartyNameRecentCall=function(){var e=(0,w.default)(k.default.mark((function e(n){var r,a;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCurrentDataAsync();case 2:if(a=e.sent,null!==(r=a.recentCalls)&&void 0!==r&&r.length){e.next=5;break}return e.abrupt("return");case 5:a.recentCalls.filter((function(e){return e.partyNumber===n.partyNumber})).forEach((function(e){return Object.assign(e,n)})),L.accountStore.saveAccountsToLocalStorageDebounced();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.savePbxBuddyList=function(){var e=(0,w.default)(k.default.mark((function e(n){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCurrentDataAsync();case 2:e.sent.pbxBuddyList=n,L.accountStore.saveAccountsToLocalStorageDebounced();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleUrlParams=(0,w.default)(k.default.mark((function e(){var n,r,a,o,i,l,s,u,c,d,f,p,g;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys((0,E.getCallStore)().callkeepMap).length||null!==(n=B.sip.phone)&&void 0!==n&&n.getSessionCount()||(0,E.getCallStore)().calls.length)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,(0,U.getUrlParams)();case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:if(a=r._wn,o=r.host,i=r.phone_idx,l=r.port,s=r.tenant,u=r.user,s&&u){e.next=10;break}return e.abrupt("return",!1);case 10:return e.next=12,L.accountStore.find({pbxUsername:u,pbxTenant:s,pbxHostname:o,pbxPort:l});case 12:if(c=e.sent,(!(d=parseInt(i))||d<=0||d>4)&&(d=4),!c){e.next=26;break}return c.pbxHostname||(c.pbxHostname=o),c.pbxPort||(c.pbxPort=l),c.pbxPhoneIndex=""+d,e.next=21,L.accountStore.findDataAsync(c);case 21:return f=e.sent,a&&(f.accessToken=a),L.accountStore.upsertAccount(c),c.pbxPassword||f.accessToken?t.signIn(c):(0,G.Nav)().goToPageAccountUpdate({id:c.id}),e.abrupt("return",!0);case 26:return p=Object.assign({},L.accountStore.genEmptyAccount(),{pbxTenant:s,pbxUsername:u,pbxHostname:o,pbxPort:l,pbxPhoneIndex:""+d}),e.next=29,L.accountStore.findDataAsync(p);case 29:return g=e.sent,L.accountStore.upsertAccount(p),g.accessToken?t.signIn(p):(0,G.Nav)().goToPageAccountUpdate({id:p.id}),e.abrupt("return",!0);case 33:case"end":return e.stop()}}),e)}))),(0,A.default)(this,"isSignInByNotification",S,this),this.clearSignInByNotification=(0,_.debounce)((function(){"active"!==O.AppState.currentState?M.BackgroundTimer.setTimeout(t.clearSignInByNotification,17):t.isSignInByNotification=!1}),1e4,{maxWait:15e3}),(0,A.default)(this,"signInByNotification",x,this),this.userExtensionProperties=null}return(0,I.default)(e,[{key:"isBigMode",value:function(){var e;return"false"===(null===(e=this.pbxConfig)||void 0===e?void 0:e["webphone.allusers"])}}]),e}(),o=(0,j.default)(a.prototype,"sipPn",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=(0,j.default)(a.prototype,"pbxState",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"stopped"}}),l=(0,j.default)(a.prototype,"pbxTotalFailure",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=(0,j.default)(a.prototype,"sipState",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"stopped"}}),u=(0,j.default)(a.prototype,"sipTotalFailure",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=(0,j.default)(a.prototype,"ucState",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"stopped"}}),d=(0,j.default)(a.prototype,"ucTotalFailure",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=(0,j.default)(a.prototype,"ucLoginFromAnotherPlace",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=(0,j.default)(a.prototype,"signedInId",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=(0,j.default)(a.prototype,"ucConfig",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=(0,j.default)(a.prototype,"pbxConfig",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=(0,j.default)(a.prototype,"resetState",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.signedInId="",e.pbxState="stopped",console.log("SIP PN debug: set sipState stopped sign out"),e.sipState="stopped",e.sipPn={},B.sip.stopWebRTC(),e.ucState="stopped",e.resetFailureStateIncludeUcLoginFromAnotherPlace(),e.pbxConfig=void 0,e.ucConfig=void 0,Z.userStore.clearStore(),z.contactStore.clearStore(),H.chatStore.clearStore()}}}),v=(0,j.default)(a.prototype,"resetFailureState",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.pbxTotalFailure=0,e.sipTotalFailure=0,e.ucTotalFailure=0}}}),m=(0,j.default)(a.prototype,"reconnectPbx",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.resetFailureState(),e.pbxState="stopped",F.authPBX.authWithCheck()}}}),y=(0,j.default)(a.prototype,"reconnectSip",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){console.log("SIP PN debug: set sipState stopped reconnect"),e.resetFailureState(),e.sipState="stopped",D.authSIP.authWithCheck()}}}),C=(0,j.default)(a.prototype,"resetFailureStateIncludeUcLoginFromAnotherPlace",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.resetFailureState(),e.ucLoginFromAnotherPlace=!1,N.authUC.authWithCheck()}}}),S=(0,j.default)(a.prototype,"isSignInByNotification",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=(0,j.default)(a.prototype,"signInByNotification",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,w.default)(k.default.mark((function t(n){var r;return k.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("SIP PN debug: signInByNotification pnId="+n.id+" token="+n.sipPn.sipAuth),e.sipPn=n.sipPn,e.resetFailureState(),t.next=5,L.accountStore.findByPn(n);case 5:if(null!==(r=t.sent)&&void 0!==r&&r.id){t.next=9;break}return console.log("SIP PN debug: can not find account from notification"),t.abrupt("return",!1);case 9:if(n.isCall&&(e.isSignInByNotification=!0,e.clearSignInByNotification()),e.signedInId===r.id){t.next=12;break}return t.abrupt("return",e.signIn(r));case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),a);t.AuthStore=J;var q=new J;(0,V.setAuthStore)(q)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlParams=void 0;var r=n(342),a=!1,o=(0,r.parse)(window.location);t.getUrlParams=function(){return a?Promise.resolve(null):(a=!0,Promise.resolve(o))}},,,,function(e,t){},,,,function(e,t,n){var r=n(0),a=r(n(12)),o=r(n(13)),i=n(2),l=n(775),s=n(32),u=n(105),c=n(346),d=n(62),f=n(87),p=n(46),g=n(50),h=n(322),b=n(124),v=n(340),m=function(){var e=(0,o.default)(a.default.mark((function e(t,n){var r,o,l,p,b,m,y,C,x,k,P,w,A,T,I,j,_,R,O,B,M;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.noUpsert,console.log("PN sync debug: syncPnTokenWithoutCatch"),"web"!==i.Platform.OS){e.next=5;break}return console.log("PN sync debug: not implemented yet on web browser"),e.abrupt("return");case 5:if(t.pbxUsername){e.next=8;break}return console.log("PN sync debug: invalid data"),e.abrupt("return");case 8:return o=t.pushNotificationEnabled,console.log("PN sync debug: trying to turn "+(o?"on":"off")+" PN for account "+t.pbxUsername),(l=new g.PBX).isMainInstance=!1,p=function(e){console.log("PN sync debug: pbx disconnect by syncPnToken success="+e+" noUpsert="+r),l.disconnect(),e&&!r&&t.id&&s.accountStore.upsertAccount({id:t.id,pushNotificationEnabledSynced:!0})},e.prev=13,e.next=16,l.connect(t);case 16:if(e.sent){e.next=20;break}return console.log("PN sync debug: failed to connect to pbx"),e.abrupt("return",p());case 20:return e.next=22,(0,v.updatePhoneIndex)(t,l);case 22:if(m=e.sent){e.next=26;break}return console.log("PN sync debug: can not find webphone"),e.abrupt("return",p());case 26:return y=m.id,e.next=29,c.PushNotification.getToken();case 29:if(C=e.sent,x=C,"ios"!==i.Platform.OS){e.next=38;break}return e.next=34,c.PushNotification.getVoipToken();case 34:if(x=e.sent){e.next=37;break}throw new Error("PN sync debug: Empty ios voip PN token");case 37:C||(C=x);case 38:if(C){e.next=40;break}throw new Error("PN sync debug: Empty PN token");case 40:return e.next=42,l.getConfig();case 42:if(k=e.sent,P=(0,u.compareSemVer)(null===k||void 0===k?void 0:k.version,"3.14.5")>=0,console.log("PN sync debug: pbx version="+(null===k||void 0===k?void 0:k.version)+" pnmanageNew="+P),w={username:y,device_id:C},A=P?Object.assign({},w,{command:o?h.PnCommand.set:h.PnCommand.remove,service_id:["android"===i.Platform.OS?h.PnServiceId.fcm:h.PnServiceId.apns],pnmanageNew:!0,device_id_voip:x}):void 0,"android"!==i.Platform.OS){e.next=57;break}if(!A){e.next=53;break}return e.next=51,l.pnmanage(A);case 51:e.next=56;break;case 53:return T=o?l.setFcmPnToken:l.removeFcmPnToken,e.next=56,Promise.all([T(w),T(Object.assign({},w,{voip:!0}))]);case 56:return e.abrupt("return",p(!0));case 57:if(I=parseInt((null===k||void 0===k?void 0:k["webphone.lpc.port"])||"0",10),j=(null===k||void 0===k?void 0:k["webphone.lpc.keyhash"])||"",_=I&&j,I&&!j&&console.warn("webphone.lpc.port is present but empty webphone.lpc.keyhash, thus lpc is disabled since we dont allow non-tls lpc connection"),_&&A){e.next=72;break}if(d.BrekekeUtils.disableLPC(),!A){e.next=68;break}return e.next=66,l.pnmanage(A);case 66:e.next=71;break;case 68:return R=o?l.setApnsToken:l.removeApnsToken,e.next=71,Promise.all([R(w),R(Object.assign({},w,{device_id:x,voip:!0}))]);case 71:return e.abrupt("return",p(!0));case 72:if(!(O=(null===k||void 0===k||null===(b=k["webphone.lpc.wifi"])||void 0===b?void 0:b.split(",").map((function(e){return e.trim()})).filter((function(e){return e})))||[]).length){e.next=77;break}e.t0="",e.next=80;break;case 77:return e.next=79,S();case 79:e.t0=e.sent;case 80:return B=e.t0,M=(0,f.toBoolean)(null===k||void 0===k?void 0:k["webphone.lpc.pn"]),console.log("PN sync debug: lpc data",{pnmanageNew:P,lpcPort:I,remoteSsids:O,localSsid:B,tlsKeyHash:j,lpcPn:M}),o?d.BrekekeUtils.enableLPC(C,x,y,t.pbxHostname,I,O,B,j):d.BrekekeUtils.disableLPC(),A.service_id=[h.PnServiceId.lpc],M&&A.service_id.push(h.PnServiceId.apns),e.next=88,l.pnmanage(A);case 88:return e.abrupt("return",p(!0));case 91:return e.prev=91,e.t1=e.catch(13),console.error("PN sync debug: catch error:",e.t1),e.abrupt("return",p());case 95:case"end":return e.stop()}}),e,null,[[13,91]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,o.default)(a.default.mark((function e(t){var n,r=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:{},!s.accountStore.pnSyncLoadingMap[t.id]){e.next=4;break}return console.log("PN sync debug: sync is loading"),e.abrupt("return");case 4:return s.accountStore.pnSyncLoadingMap[t.id]=!0,e.next=7,m(t,n).catch((function(e){n.onError?n.onError(e):console.error("Failed to sync Push Notification settings for "+t.pbxUsername,e)}));case 7:s.accountStore.pnSyncLoadingMap[t.id]=!1;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={sync:y,syncForAllAccounts:function(){s.accountStore.accounts.forEach((function(e){e.pushNotificationEnabledSynced||y(e)}))}};(0,b.setSyncPnTokenModule)(C);var S=function(){return Promise.race([(0,l.getCurrentWifiSSID)(),(0,p.waitTimeout)(1e4)]).then((function(e){return e||""})).catch((function(){return""}))}},,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var a=r(n(35)),o=r(n(343)),i=n(1),l=n(779),s=n(2),u=r(n(782)),c=n(16),d=r(n(783)),f=n(317),p=n(4),g=n(342),h=n(784),b=n(217),v=n(8),m=n(7),y=n(3);requestAnimationFrame((function(){var e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode("* {\n  outline: none !important;\n  box-sizing: border-box;\n}\na {\n  text-decoration: none;\n}")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}));var C=s.StyleSheet.create({WebApp:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:window._BrekekePhoneWebRoot?"fixed":"absolute",top:0,bottom:0,left:0,right:0},WebApp_Logo:{width:80,height:80,opacity:0},WebApp_Brand:{width:150,height:54,marginTop:10,opacity:0},WebApp_Btn:{position:"relative",width:270,padding:15,borderRadius:m.v.borderRadius,marginTop:10},WebApp_Btn__app:{marginTop:30,backgroundColor:"black"},WebApp_Btn__browser:{backgroundColor:"white",marginBottom:50},WebApp_BtnTxt__browser:{color:"white"},WebApp_Icon:{position:"absolute",top:11,right:10}});t.App=function(){var e=(0,i.useState)(!l.isIOS&&!l.isAndroid),t=(0,a.default)(e,2),n=t[0],r=t[1],m=null;if(n)m=(0,y.jsx)(h.App,{});else{var S=(0,g.parse)(window.location),x=o.default.stringify(S),k=l.isIOS?"brekekeapp://open?"+x:"intent://open?"+x+"#Intent;scheme=brekekeapp;package="+f.bundleIdentifier+";end";m=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(v.RnImage,{source:{uri:d.default},style:C.WebApp_Logo}),(0,y.jsx)(v.RnImage,{source:{uri:u.default},style:C.WebApp_Brand}),(0,y.jsx)("a",{href:k,children:(0,y.jsxs)(v.RnTouchableOpacity,{style:[C.WebApp_Btn,C.WebApp_Btn__app],children:[(0,y.jsx)(v.RnText,{small:!0,style:C.WebApp_BtnTxt__browser,children:(0,p.intl)("OPEN IN APP",{})}),(0,y.jsx)(v.RnIcon,{color:"white",path:l.isIOS?c.mdiApple:c.mdiAndroid,style:C.WebApp_Icon})]})}),(0,y.jsxs)(v.RnTouchableOpacity,{onPress:function(){return r(!0)},style:[C.WebApp_Btn,C.WebApp_Btn__browser],children:[(0,y.jsx)(v.RnText,{small:!0,children:(0,p.intl)("OPEN IN BROWSER",{})}),(0,y.jsx)(v.RnIcon,{path:c.mdiWeb,style:C.WebApp_Icon})]})]})}var P=n?s.View:b.BrekekeGradient;return(0,y.jsx)(P,{style:C.WebApp,children:m})}},,,,function(e,t,n){"use strict";n.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfgAAACzCAMAAABSHv5WAAADAFBMVEX///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+/LkhhAAAA/3RSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7rCNk1AAAZeklEQVR42u2dd2AURRfAJ70Seg+QEAgBEqkBgYBSBKkqAUQITUVUBBS/IIKAIiAISq+CIkVKQAWpUlWUIghSpAQp0ksoCYSE5LIfYS/JzpuZ3dm5vRhk3l/J3cy7d/u7nTcz7+0bhKRIkfIYiYJLU3lFJHgpErwUCf6RkOKVMSmaN6xyx62qLMFbLpPxbzU6b1hVGrcqTYKX4CV4CV6Cl+AleAlegpfgJXgJXoKX4CV4CV6Cl+AleAlegpfgJXgJXoKX4CV4CV6Cl+AleAlegpfgJXgJXoKX4CV4CV6Cl+AleAnerPgULR8RWtLfJU+Bd8sfGBZerpBH3gLvVzwkokJxX8fBuz7RfdBni5fOnzXxf+2r+TtiUkCzwXM2Hzt/8+6Vk7sXDWvuydep1cgl+xLtxqUe+XZM+4I83aY4FbxLeN8Zm89m2JVf3j6r3xMu/z74otGfrDx0z6777v6lHz7rJww+MHb9Le27tj8mRxcQsqr26D9t+CclruhRxKBTlVF70hUotr1jqlp7x/sHYuJtcEvFrLhGGKVcXfqit8XgS2NWGTwMVHfSoQzCqPu/DC0nAN4jZrON/IZKyspoL5PUi7x3SqGJbWWEzr3+zh8KS/b2y2ch+CF44xZ6bZ9aeIdl1K3Zta0E74GD3KLTtOSIeJZRGVu7e5oD7/7yaeZ1v/aBmdu+1KwUpqaMOMbdW2TULUVPbgwvYBn4SXjjSHbLNr/pGqVsaGAd+FJ44zhmw6AZKbpGnXvL2wT4FvG6ym6P4XX3/uOSdTVlfEHR5DXsrmIkt2LdLQK/BG8cwhxO9xoapfxYySrwNfDGsxnN8k9LMzTqYnde8PnmGCo734GLe7PThpri68JOzU8oPHKwvjXgt+CNGbPHQnMyeIxKHeltDfhn8caf0FvFXOa6VNvCuMBHnOZRttb44WP3KTyK0t7Eb/cZCqdkjHe3AvxJfOJBn6A/fZHXqqPhloB/DW8cS2tTcBWvUakDOMA3ucWn7HwDo0nddj5+TbSdyu9T+GVHacfBl8XbnqUu4Iam8xt1t4cV4JfijV+kNIk8beJSxQUYgW9/n1dX2lu6pged4lMzXdupwU3FjFyNdBj8q8azKK+VpoxSpro6DN71Ot44mGzSKdWUUceD9MHXSTah7EM97mf4dJzS7jO0vGvuEitJTR0FH4e3fZcyQd1s0ihliYej4CPxtlcovsBm0qgLVfXAl7lsStkkpuUlOLlnPK3pxD/a5OwrPOcYeA8wxEQRLfLtNm2Uss7LQfDD8bariQYDzRuVEKkDfpVJZR8zDPf8lXdY1HRqmGL+2ygpjRwC/zKg4UP8MjYKGKXEuToE3usC3nYobNA1Q8Coa6FM8ONNK3uFbvkczu5/awb6yjdELrFys6oD4N3/BtNFosV8IaOUyQ6B7wu0wZVrk1Qho04VZ4E3P9SmNaYZ3pZ3Raa5XfOdFLvEyj+FxcH3BLpet2BIVaWvA+A9z4HbA65EbgoatceTAZ4ye4rfsWLZLyfZU77zhSj7SecZk/Cty2d8vvTXq9T7YgFjg2fxgLYNw8tUqte6z3zGfuJqYfCeQGMK3L6pSb+1EreO7dysdki5Gk07jd5On5CmVBcH/5b+JNptBz32cWhen9b1q5SpHNWu/7Jz9Ev1GRf45HX9s71C0Zi4JHqrlaThU2nttr5ZJWut0vgLVddJTeC4C63PiUEl8B3sof/QmvUXBT8dKFoBY3HHKZ92b3FjzIN7tFpDm2Ef9xMFXwVGgsA28ofUyNXr+bFGFccn0IbYVsbgz70FJjrebelBihhiT4S8TdIX1cAJZu6Q2xpqtkQpZh5qRsl/6HCWcndVFANP/NjagQbjKJtgoyibusFfU67LNEHw/scU3YlHZcr2/E81ST3efSiTpsv5DcCffY0Wz2tPuwMuwJ/2bHIO9yS5GX0TWwxOI3fABtF3ZP2nkPfXOiHwVeGdFQ8+sQL5C94aRtfVnNxGS68uBn4ZVNQRf59cZlxlbBYWX86cdTK3IPIzZsFvU+Z/o8ASnmiykBY/r7RGM6JEEHuil6qxAxikV31OAHwosbUIN0Z/ID5nAjPXxv9HckdZBLzLBGIQxz+zHfE5RwKZl6o3cZOkR+iAv9OLPfFoRCag3CuJtfgffH++cWbSd4R3D9ZpXZ+Y1ca7mQbfkHAufwA7nyQ85Ls6RnnGERemg3nwPisILc/gLQ4Rvy+9dLQOxKC1gQ3+RnU9RsHEJytjsAaHwbs/uBtyD4U/zIsldNtXS9K9WXnAdyWHcZh8Q2zRx+oa5UYMrPtMgy+2i7AKJN+0hO/v10+tbE3c8zVZ4G8Z5BAF/En8UrRevhrcNfAxjtvDWUFalEGHl4ivbw58qS8pWRSgTUWb8foFH+3/giqbmwPvEkOug9MBja1w/6q8gVXDocblDPBJ9YwwBV3T262I1R3v6Hkk90CfgYZdpukNiEbg/UdS1t4Jgfo5WcqJACOjiHXYJlPgG+8zDoSFw/fbGhnlsh6u98vTwfc0BtUITt92ad4En/MzR6IO3D874GrYxRPu8y3iBl/pfWok6gUYGb0EGrQ0/iJw58UWyA3eL3otNeXADW822uQolOk+boM+w6ngV/OkVA2AvXKCve5JZG6HkWwwcLY06QgnpH484F0ix/xFn9ASWW2N9X0tPdZ3QmdWoAO+SM9V9+iBCJggDWILaaEcVg2BW0s08NeL84B3Owq6vZf9Vhhw/8YzO1QkTWeAZAqcBnVlgl/VtUvXHq+8MWTCon3MeP8hX4N5R0YtHqPaA7V/ssHbunbp0q3Xa++MmrnxHDOWAf1kbdBgBo9RPnDmEEkB35froqPn4c4Ra5m5iENZB70pEVOawK0HJnieKGEpQj9Y5W/muzC/A8VlmOB5pB9U/z74YZTnMqoPUPsRCT7Bl+/7IRBvv+fJWMV34tAFOJ1z5TMBDKsXHQB/PsgolkZuTHNlcindHAE/hFAPJlDb+YzyTyJuU/hR3I+ZgfRfJTvzcib+Os+RO/v1dgXYMhiYUEkY/FXKPmxnEI/jvCPygYn9PAfAjyVT8W6bnog/lHkgtuFNxONL8oL3ALm4g7Le+AZ/neMhR1+wXq7KaUJJMDV4VRT8mQjjYWgB74UBGwQnxMFTspvAYu4+73Mt9YHqRhD8b4hbAOAvs15fjceyODRFACMOH+CUFEas2ST4rdSnN8GgepXXKBA3TvcUBH+ng/Hc0cZr1AEi38RwcGHKi4zlOr6z9A+HphcUa+QHMfCT6euOeIusqiwG/m/qA6WDLDLqcwi+FT/4AMbUCl9lHeLQFGvRtzkuAv56V0YYMs0iq54TAh9XiGrVHIuMWgPAZ+TnB49Ayr+7MPjJFn2bFPMabbMLM4wqbZFRmuwgfpUnWAvadRYZdRCAv2GCOzqI9y0gDH6eVdfYwyz4vXWYRlWyyqihpsEnD2WWC/nZIqNOA/DxZsCDfdZAYfDLrLrGhcyC78M2qqZVRo01Df4QO5z5h0VGXQfgd5sBD9YtYcLg11p1jcuaBX+PnXjQyCqjppkf6r/k3bNywCviYbY9ZsB/YRX49VZd4/KmfXw8M9L6tFVGzRLw8cx9mZMWGZWO8PSj82bAgxu1tDD4OKuucSnz00VmiZFIq4yaJAD+LusZ+wMWGXUX4Y82prmaAA82WgOEwc+36hoXZICfWSFLphN9BjCMqmyVUZ+wwKdnWxVFVFQ65s8VIRGWazBzr7gJ8CCbwVUY/DSLvk2Gq2E83hMGz5T7delGlbUK/CCOeHwM0WsJ3aqNFhkVDxeGkfzcfWx0L2Ee/IcWfZsbHIkYwUS5j7P0rRJfq8D35knEmEt0e5Nq1WKLjNqNJrIWnYbSBu+5RRx8jLN37rQhx2ii21p68vdFi6x6jge8z0Fi3k3N+/jIst3t14XXc2BSP0McfD3ogATle66cO7Ig0/s8eyV3RK2qyZVzF0a4+VO0Sn7dwTRB1KjP4XI1gzss6wJSEd8SB18UfOVayFHRA+9JlKtLb0TT8RXeaLnDRuknW5LD3vcUFQ3ABKWIsDHeKdx7WbjAp0yqiYNHoPzDVKeCR+UJN3+RNqftD4begs4FT3HzlMd28qWzAgGmZRuu6agbZz/wpM91FwfAg9JeCZ5OBU9x85spy9gaXLMt68D7EA8opVEqOILM+/3i1gwDn/YqX7c6zI0QAfCw8EcH54KnuPmRpA43kOX0u5PBU9z8OXIkn8QaaE1Ldfhh3lzdQB1QpYcj4GEKzhEP54In3bytuXEI9AUng0fdiN/jBheDFBz4fLgZgSPMYJ5O8Mm9u/6OgCdiD0OcC57i5q+SNTJhvuy5fE4GT4lPD4NN/OCw0FHYHJjNk9rAuE+ZK6CTJnteBPxIGJHmSxfv2VwQPJHJryg7iASsgvA5sYlcRhUZ5yMKnnTztiawDai1rVwI4KNMxiFLwe93qbThUoAYKps5Br4K1PcbTzJzy3TbR65i4ClVeiYQbWBZhPTWPMuk35SDoYLgUWXCzV+G6+vnYIvlPPGVvsq93kZxdUXZY3QExULYQ/scuAh4tBNq3Gg8s38m8ymBTcXEwHvt1dlis8vzRPj+KUOj/DJjzImdBMFT3Px2sMzyvABbzDG+vL0yV4EL4M1EFCVQNuoOH25kiKu9o+DJRNsVRuvKbupIdSFKCDwKIdz8TViDwxUWIVISjU4fKWYPAk3xFANPcfNjDFyzoow3urr2J+QPh+kvozObBLG1BJB5E0dcHAVPXmPllzJ6HXyzq9qnxQqBp7j5370MpncPJrEv6w9C2U8n7i4nBt73MBFzBJnPAbfJpALdc1qKZpeZSXoJfyeYrF54hXn6Q9Bhcssfm2MJgUc9KME2nfVTI231rVUFRMBT3Px06A8oldWWsEfDAlM1BWYTWgmBp7j5hLJ4i1GkUWd0all00IbPp+O/7Q8ouTmzqaF53xF3jLJYxMC77KLEkNYykmCrrgbxjFoi4L3I+hOw6lU0xahLb9Nn7V4D8WymjDFuIuBhHOaB7MK3NfwoD1WnL2BMKKNAacLfsbHci5bDlziE+IKuPS9QGiYFWgAe1aaWX1/XgtjLcWu3nqjcnPK6AHgUQgyaifAsoU00oy7FkuueoE+uEO22lRABT062YXH4F6lZdAvrE7s9Xt12kuMoVjolklq8OOHLNpqRwbXhxLPU2C4440gQPJrOyK74Ojoo5xsV7fAVvaD+Yj/z4Clu/iD4sYfRa/hm7IytkzNH9qz1wU7qz/bS0yLgSTevROMtfqRfqovTW2me8i/TYxn1jJmMcdodi3cYAfvEuKHRUdXC67d99yvWCQbzkTXgyVyEbLm9Y+nsT0dOmr+JfYqCrYUAeErS11egRW/2Jx5fNX/yx+Nmxx1il/zeJAKe4uZvV8AalGBfh2tbv5k59uMpC35il4C/iz2N/L1oLscRP4vAU4IUJuQdJAKe4uZhacdvHDDqrwJC4Clufj8eQWlmEzfKhtfr9dstpuZ8WWQVeNRJ/OtMRULgKW4+GTylmk88o/lKMBIDT3HzoDTT++LgYQi/yDERLTfJBHBx8ER4lluWuwmCJ2pnKcpxEIspIfoQw41IJAqe4uZj9MOz3EI+CF9O4Aveoiz3HQCPRoh9memuSBQ8xc0vhaE8sbTLc1WRMHhUmajOdacKvvxdKGRUxv8oH1Z8v1k11ALTjoBHsSJn7HwgtHPHdvOw8FeIyBNrR8ogB8BTNrTAZMpthoBR9+kVnAK2mlNDLzDtEHjU2fQpO3e6I0fAU9x8KtyRL7LT9CXeUBA5BB7mej6QhaDFYNM3yZVmjA9zH2tGVxx989Ix8KjBGXNf5vdQ5Bh4ipsnMpt95poz6l5/F+QgeIqbh4HV9iZP7VpbjP1xra7zakllnS/qIHiUf4mZtckYD+QoeMrW0SqiTfsEE1YdDBcNy2pzFAg3TzzUHbjNhFHJ+qUri33Np2YL86B0R8Ej9OI/vF9mc3XBDBzczZPlBsg5UGnu8g0Jb3siC8BT3DzxULdrf96bPmNpsNFlb3TQWM2FLuz+joNHPsO49nIOM0s1mQOPKhBuPo2Sf9ZgD49RKROYMVKT4ClufgXRptAUriJNv9ThCZRFGxTcOPumXoqOBeAfrDBGXjP6Ljs6s1M1TIJHnciNKcqjlC7tDIfWhPHl2J9iFrzvEUI/xb+GTE0y8odrnuW97q2+ZU6uM7Z3109+XnpUK6uQoHj3/lVnpnl3jm5CuVnwCK6NMkbTM9lqzNUbW/f20s1NNwuedPN/UR1sgdiDur/F8maue+G+WygF1NP3fBCEck1K999GLeJ+blYbH4s/Crj5RHYOiEeLudQpSOqmASGWXwFwgMMKZoJ36NDd1CH/+GeNzT+j4N1k5Hd/ZUeebKfWTWiXH+WyeNR9Z/EuTaT7+rbJrzzhjA/C3PzRMP3GgZ0mbTiRMyamHf5mcKt8Tvn+2mIhNv0nHnyfGrJ8n2Y8urjh024VxD/ZvVxE/RYto6qV90b/nviH1ohq0aZRtXJO/OFp3Py3XBBdA8PrNmn7TJ3Q4h7Os0rj5hOe4elQIKxWo5ato8LL+CMpfJLl5m1DXPKQVdlu/o8gicg5YnfzCS3ylll2N7/ARxJyllRIfHCBDwTnNbMy3fz9fhKPE+WBm1+U926sB27+UpSE41SZMiAvWlV1cymJRooUKVKkSJEiRYoUKVKkSJEiRYoUKVKkSJEiRYoUKVKkSJEiRYoUKVKkSJEiRYqwFHsiUyrKC/G4iVqF+4C8EP8l8WoOpGm1Em4S/H9fStHKI6ztV1yCfwzBZ7IfX0SCfxzBK8qVhhL8Ywleud9Lgn8swStpTSX4/zz42U1UadZzdFx8dpWQQAn+vw5ee8icS6+sIzrmSvCPE3iEAlbaB/sKEvxjBR4VuKAtYSjBPzbgURv15X008O6BQXqHUnuUqlG1qOFRzPkr6LTxCa4dIuuK/Svg0VG1BGkRAN67y8YLmUcoJ8T1oJW8zRf95fmHFVPTj0xojJ8cP/fPTHl4bnv4pGOZ1ZRtf46vTKoo3GOFWk4wcfVrJSWfXAe/Qn09Egf/hqbE406iAKz3IKwi7fEO2jfVQsUvIFTuZ01N6vfAz8d/lPYowpTxBSWhXAb/kfp6ay14L/xAieS38ZKF9YnDWXeUIME/jdfP3oX9fJrBI/8SmkpEuQs+Rn29hxb8Igh2mLZHR0pl5LNVIfjqsH73RY0z75LKe86PFGeBj1Vff14DnjwDOllTRT6aWg39RjAOvjNZCXxMtopOOSpyzkjMaCEh5SZ4e33nejngL2aO0VfWjO782uStNuJoh+Csk3Z3fNoxKOLlmVkH0e/2wMBnFg/O2DuvX4chi7KOUk7JqvseZFeR/Fmnim4VO463e/vLxSSlXAS/V329TA74TGRT7BUqG/5tf6VxVnv7eer3sw4e9/zC3mIUBj7zB2S/hX2n2G/w5fYWv9iP+8jK8apkP53sG0kp98CHqt72JNKCT8o5X83ffjTsBPv/Lex3p+bMmTfUmvxJBXDwPxXObvG6PQBsn9jZj4HLWd67/aAe41BOYsot8K471JenYOC1Ff3tmNbY/92i/osdY/QZ1ssOPlVT5N/Vfgac+tNYrx5ao62dX0Y9FmaixJRb4N9VNC4+C3w8dvzXJs2QgCrZD4/BlJRUp/lnMfCfYgsB9bWHRzmFqH+3xFQMVA/nkphyB3y5uKwzFJEWfB+s4zB19q0enPWGZg2QI/aDhUO04LHNuGDNic69aYwDtRqkOBN8wbrdJmZtnt2vhoHHj7h+SX1RPYx56cO/z4AzKELVJi9rwN/EGrirJ/2MyPxbPcZ5GTBP3e3pKTk5C3xqkirYwVxZt7gdPH5kXB31xVoP/1H37NYD3W73NVF9FfwuvMXphy9+kvMnPADuR9I/SLESPE0+Rxj4a3jHShrwLuqdOxMq/1vjMLbRjm4+nLOFo/5ITu7HRT16dp7klHvg7+cclquCP413DNOAL6D+PQgq36K5y7dpc3pw8Jl3fIDemY7fS065Bv7nuogfvH1G3gkqn6eZ+RuAD9YDv11yyh3wN5ZjQTFD8KHUST1CszQdDcCH6Z7dKzk5C/zPn2fJ2IExdUGQ3BB8YfXvt6Hy9ZrVvQH4YqqKX9fQZJzklEsbOCbBu6pBm0mwo5rGs5EHvLuqrq0k8iiBR1cf/g2PuHZJ1szkDcCjmw//fE8SeaTAr33492HQz36+d38u8OoK4GtJ5JECP0j950m8yXD11Wpc4Idr0nqlPCrg7dt467AW+dTdlwRXLvBPqSqa4A3qvZApQZJTHgXvckj9r7a2xWBsA9AIvJu6Z3sMCwGWTqaNJFLyDHjUQ/3vQNmcBk3U6VpaWT7wqJ+q4mPN265q8CfBTXLKq+A91PtVuZadizUwXX1lPuIE76cuDZRvs3PsfL9TcqJ3UvIkeFQ/zf6c5Re9Itx86vdfb990O1OQFzxqbc/Bu9q/rt8D7xH00UX1//MBElPeBZ/l0R8W0EnLKa5QD3GDz8rVyszvOH48O0v/ciVJKS+Dd/mYssl+pw0yAd59NkXFtXAJKU+DR6gX8RzMhZrIDHiEBtmgitPVJaO8Dh4FLcC4JY7QPurMBR5VXYVhP9bDXSLK++ARqjxsp5198pq+RbG3+MAjVGvMfnWSl3ZiTSdXCeiRkfzhTTpHR4V6OaCi8BPNXmoRIu91KVKk5HH5P7kQpBCGK22nAAAAAElFTkSuQmCC"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/logo.136d176f.png"},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var a=r(n(12)),o=r(n(13));n(785);var i=r(n(786)),l=n(21),s=n(9),u=n(6),c=n(1),d=n(2),f=r(n(791)),p=r(n(63)),g=n(64),h=n(124),b=n(792),v=n(32),m=n(225),y=n(130),C=n(11),S=n(226),x=n(19),k=n(37),P=n(26),w=n(4),A=n(80),T=n(10),I=n(15),j=n(800),_=n(801),R=n(802),O=n(65),B=n(33),M=n(333),U=n(320),L=n(346),F=n(803),D=n(46),V=n(319),N=n(215),E=n(329),H=n(349),z=n(804),W=n(806),G=n(807),K=n(808),X=n(8),Z=n(43),J=n(7),q=n(3),Y=function(){var e=(0,o.default)(a.default.mark((function e(){var t,n,r,u,c,f,p,b;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.intlStore.wait();case 2:return t=(0,C.getAuthStore)(),n=(0,x.getCallStore)(),r=(0,T.Nav)(),u=(0,h.SyncPnToken)(),f=(c=function(){var e;return Object.keys(n.callkeepMap).length||(null===(e=g.sip.phone)||void 0===e?void 0:e.getSessionCount())||n.calls.length||t.sipPn.sipAuth})(),p=function(){var e=(0,o.default)(a.default.mark((function e(){var n,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.getLastSignedInId)(!0);case 2:if(n=e.sent,o=v.accountStore.accounts.find((function(e){return(0,v.getAccountUniqueId)(e)===n.id})),e.t0=n.autoSignInBrekekePhone,!e.t0){e.next=9;break}return e.next=8,t.signIn(o,!0);case 8:e.t0=e.sent;case 9:if(!e.t0){e.next=13;break}console.log("App navigated by auto signin"),e.next=14;break;case 13:r.goToPageIndex();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),(0,F.registerOnUnhandledError)((function(e){return B.BackgroundTimer.setTimeout((function(){return I.RnAlert.error({unexpectedErr:e})}),300),!1})),d.AppState.addEventListener("change",(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("active"===d.AppState.currentState){e.next=2;break}return e.abrupt("return");case 2:if(t.resetFailureState(),n.onCallKeepAction(),u.syncForAllAccounts(),"ios"===d.Platform.OS){e.next=7;break}return e.abrupt("return");case 7:if(e.t0=!c(),!e.t0){e.next=12;break}return e.next=11,t.handleUrlParams();case 11:e.t0=!e.sent;case 12:if(!e.t0){e.next=15;break}return e.next=15,p();case 15:case"end":return e.stop()}}),e)})))),i.default.addEventListener((function(e){var n=e.isConnected;t.hasInternetConnected!==n&&(t.hasInternetConnected=n,n&&(t.resetFailureState(),m.authPBX.auth(),y.authSIP.auth(),S.authUC.auth()))})),"web"===d.Platform.OS?window._BrekekePhoneWebRoot&&(0,V.webPromptPermission)():"active"!==d.AppState.currentState||f||(0,U.getAudioVideoPermission)(),(0,M.setupCallKeep)(),e.next=16,v.accountStore.loadAccountsFromLocalStorage();case 16:return b=(0,l.debounce)((function(){r.goToPageIndex(),k.chatStore.clearStore(),P.contactStore.clearStore(),O.userStore.clearStore(),t.signedInId?(t.resetFailureState(),m.authPBX.auth(),y.authSIP.auth(),S.authUC.auth()):(m.authPBX.dispose(),y.authSIP.dispose(),S.authUC.dispose())}),17),(0,s.reaction)((function(){return t.signedInId}),b),e.next=21,t.handleUrlParams();case 21:if(!e.sent){e.next=25;break}console.log("App navigated by url params"),e.next=31;break;case 25:if("web"===d.Platform.OS||"active"!==d.AppState.currentState||f){e.next=30;break}return e.next=28,p();case 28:e.next=31;break;case 30:r.goToPageIndex();case 31:"active"===d.AppState.currentState&&u.syncForAllAccounts();case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=!1;L.PushNotification.register((0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$){e.next=2;break}return e.abrupt("return");case 2:return $=!0,e.next=5,Y().catch(console.error);case 5:return e.next=7,(0,D.waitTimeout)(100);case 7:(0,s.runInAction)((function(){v.accountStore.appInitDone=!0}));case 8:case"end":return e.stop()}}),e)}))));var Q=d.StyleSheet.create({App:{backgroundColor:J.v.bg},App_Inner:{flex:1},App_ConnectionStatus:{backgroundColor:J.v.colors.warning},App_ConnectionStatus__failure:{backgroundColor:J.v.colors.danger},App_ConnectionStatusInner:{paddingHorizontal:5,paddingTop:4,paddingBottom:5},App_ConnectionStatusIncreaseTouchSize:{position:"absolute",top:0,left:0,right:0,height:30},LoadingFullscreen:Object.assign({},d.StyleSheet.absoluteFillObject,{backgroundColor:"#74bf53",alignItems:"center",justifyContent:"center"})}),ee=(0,u.observer)((function(){(0,c.useEffect)((function(){"web"!==d.Platform.OS&&p.default.hide()}),[]);var e=(0,C.getAuthStore)(),t=e.isConnFailure,n=e.pbxConnectingOrFailure,r=e.sipConnectingOrFailure,a=e.ucConnectingOrFailure,o=e.ucLoginFromAnotherPlace,i=e.signedInId,l=e.resetFailureStateIncludeUcLoginFromAnotherPlace,s=n()?"PBX":r()?"SIP":a()?"UC":"",u=t(),g=u&&o?(0,w.intl)("UC signed in from another location",{}):s?u?(0,w.intl)("{{$0}} connection failed",{$0:s}):(0,w.intl)("Connecting to {{$0}}...",{$0:s}):"";return(0,q.jsxs)(d.View,{style:[d.StyleSheet.absoluteFill,Q.App],children:[k.chatStore.chatNotificationSoundRunning&&(0,q.jsx)(X.AudioPlayer,{}),(0,q.jsx)(X.RnStatusBar,{}),!!i&&!!g&&(0,q.jsx)(N.AnimatedSize,{style:[Q.App_ConnectionStatus,u&&Q.App_ConnectionStatus__failure],children:(0,q.jsx)(Z.RnTouchableOpacity,{style:Q.App_ConnectionStatusInner,onPress:u?l:void 0,children:(0,q.jsx)(X.RnText,{small:!0,white:!0,children:g})})}),(0,q.jsx)(H.CallNotify,{}),(0,q.jsx)(E.CallBar,{}),(0,q.jsx)(z.CallVideos,{}),(0,q.jsx)(W.CallVoices,{}),(0,q.jsx)(G.ChatGroupInvite,{}),(0,q.jsx)(G.UnreadChatNoti,{}),(0,q.jsxs)(d.View,{style:Q.App_Inner,children:[(0,q.jsx)(R.RnStackerRoot,{}),(0,q.jsx)(b.RenderAllCalls,{}),(0,q.jsx)(_.RnPickerRoot,{}),(0,q.jsx)(K.PhonebookAddItem,{}),(0,q.jsx)(j.RnAlertRoot,{}),u&&(0,q.jsx)(Z.RnTouchableOpacity,{style:Q.App_ConnectionStatusIncreaseTouchSize,onPress:l})]}),"ios"===d.Platform.OS&&(0,q.jsx)(f.default,{}),!v.accountStore.appInitDone&&(0,q.jsx)(d.View,{style:Q.LoadingFullscreen,children:(0,q.jsx)(d.ActivityIndicator,{size:"large",color:"white"})})]})}));t.App=ee},function(e,t,n){var r,a,o,i=n(0),l=i(n(12)),s=i(n(13)),u=i(n(22)),c=i(n(5)),d=i(n(20)),f=(i(n(23)),n(9)),p=n(225),g=n(130),h=n(11),b=n(226),v=n(19),m=n(37),y=n(26),C=n(4),S=n(150),x=n(65),k=n(87),P=n(50),w=n(64),A=n(124),T=n(40);new(r=function e(){(0,c.default)(this,e),(0,u.default)(this,"onPBXConnectionStarted",a,this),this.onPBXConnectionStopped=function(){(0,h.getAuthStore)().pbxState="stopped",(0,h.getAuthStore)().pbxTotalFailure+=1},this.onPBXConnectionTimeout=function(){(0,h.getAuthStore)().pbxState="failure",(0,h.getAuthStore)().pbxTotalFailure+=1,p.authPBX.authWithCheck()},this.onPBXUserCalling=function(e){y.contactStore.setTalkerStatus(e.user,e.talker,"calling")},this.onPBXUserRinging=function(e){y.contactStore.setTalkerStatus(e.user,e.talker,"ringing")},this.onPBXUserTalking=function(e){y.contactStore.setTalkerStatus(e.user,e.talker,"talking")},this.onPBXUserHolding=function(e){y.contactStore.setTalkerStatus(e.user,e.talker,"holding")},this.onPBXUserHanging=function(e){y.contactStore.setTalkerStatus(e.user,e.talker,"")},this.onVoiceMailUpdated=function(e){(0,v.getCallStore)().setNewVoicemailCount((null===e||void 0===e?void 0:e.new)||0)},this.onPBXUserParkStarted=function(e){console.log("onPBXUserParkStarted",e),(0,v.getCallStore)().addParkNumber(e)},this.onPBXUserParkStopped=function(e){console.log("onPBXUserParkStopped",e),(0,v.getCallStore)().removeParkNumber(e)},this.onPbxCallRecording=function(e){var t;null===(t=(0,v.getCallStore)().calls.find((function(t){return t.pbxTalkerId===e.talker_id})))||void 0===t||t.updateRecordingStatus((0,k.toBoolean)(e.status))},(0,u.default)(this,"onSIPConnectionStarted",o,this),this.onSIPConnectionStopped=function(e){var t=(0,h.getAuthStore)();null!==e&&void 0!==e&&e.reason||null!==e&&void 0!==e&&e.response?(console.log("SIP PN debug: set sipState failure stopped"),t.sipState="failure"):(console.log("SIP PN debug: set sipState stopped"),t.sipState="stopped"),t.sipTotalFailure+=1,t.sipTotalFailure>3&&(t.sipPn={}),"failure"===t.sipState&&g.authSIP.authWithCheck()},this.onSIPConnectionTimeout=function(){console.log("SIP PN debug: set sipState failure timeout"),(0,h.getAuthStore)().sipState="failure",(0,h.getAuthStore)().sipTotalFailure+=1,w.sip.stopWebRTC(),g.authSIP.authWithCheck()},this.onSIPSessionStarted=function(e){"8"===e.partyNumber&&(e.partyName=(0,C.intl)("Voicemail",{})),e.partyName||(e.partyName=(0,y.getPartyName)(e.partyNumber)||e.partyNumber),(0,v.getCallStore)().onCallUpsert(e)},this.onSIPSessionUpdated=function(e){(0,v.getCallStore)().onCallUpsert(e)},this.onSIPSessionStopped=function(e){(0,v.getCallStore)().onCallRemove(e)},this.onUCConnectionStopped=function(){(0,h.getAuthStore)().ucState="stopped"},this.onUCConnectionTimeout=function(){(0,h.getAuthStore)().ucState="failure",(0,h.getAuthStore)().ucTotalFailure+=1,b.authUC.authWithCheck()},this.onUCUserUpdated=function(e){y.contactStore.updateUcUser(e),x.userStore.updateStatusBuddy(e.id,e.status,e.avatar)},this.onBuddyChatCreated=function(e){m.chatStore.pushMessages(e.creator,e,!0)},this.onGroupChatCreated=function(e){m.chatStore.pushMessages(e.group,e,!0)},this.onChatGroupInvited=function(e){m.chatStore.upsertGroup(e)},this.onChatGroupUpdated=function(e){m.chatStore.upsertGroup(e)},this.onChatGroupRevoked=function(e){m.chatStore.removeGroup(e.id)},this.onFileReceived=function(e){m.chatStore.upsertFile(e)},this.onFileProgress=function(e){m.chatStore.upsertFile(e,m.FileEvent.onFileProgress)},this.onFileFinished=function(e){m.chatStore.upsertFile(e)},P.pbx.on("connection-started",this.onPBXConnectionStarted),P.pbx.on("connection-stopped",this.onPBXConnectionStopped),P.pbx.on("connection-timeout",this.onPBXConnectionTimeout),P.pbx.on("user-calling",this.onPBXUserCalling),P.pbx.on("user-ringing",this.onPBXUserRinging),P.pbx.on("user-talking",this.onPBXUserTalking),P.pbx.on("user-holding",this.onPBXUserHolding),P.pbx.on("user-hanging",this.onPBXUserHanging),P.pbx.on("voicemail-updated",this.onVoiceMailUpdated),P.pbx.on("park-started",this.onPBXUserParkStarted),P.pbx.on("park-stopped",this.onPBXUserParkStopped),P.pbx.on("call-recording",this.onPbxCallRecording),w.sip.on("connection-started",this.onSIPConnectionStarted),w.sip.on("connection-stopped",this.onSIPConnectionStopped),w.sip.on("connection-timeout",this.onSIPConnectionTimeout),w.sip.on("session-started",this.onSIPSessionStarted),w.sip.on("session-updated",this.onSIPSessionUpdated),w.sip.on("session-stopped",this.onSIPSessionStopped),T.uc.on("connection-stopped",this.onUCConnectionStopped),T.uc.on("user-updated",this.onUCUserUpdated),T.uc.on("buddy-chat-created",this.onBuddyChatCreated),T.uc.on("group-chat-created",this.onGroupChatCreated),T.uc.on("chat-group-invited",this.onChatGroupInvited),T.uc.on("chat-group-revoked",this.onChatGroupRevoked),T.uc.on("chat-group-updated",this.onChatGroupUpdated),T.uc.on("file-received",this.onFileReceived),T.uc.on("file-progress",this.onFileProgress),T.uc.on("file-finished",this.onFileFinished)},a=(0,d.default)(r.prototype,"onPBXConnectionStarted",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,s.default)(l.default.mark((function e(){var t,n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PBX PN debug: set pbxState success"),(t=(0,h.getAuthStore)()).pbxState="success",t.pbxTotalFailure=0,g.authSIP.authWithCheck(),e.next=7,(0,h.waitSip)();case 7:return e.next=9,P.pbx.getConfig();case 9:if(n=t.getCurrentAccount()){e.next=12;break}return e.abrupt("return");case 12:if(y.contactStore.loadContacts(),void 0===n.pbxLocalAllUsers&&(n.pbxLocalAllUsers=!0),t.isBigMode()||!n.pbxLocalAllUsers?n.ucEnabled?x.userStore.loadUcBuddyList():x.userStore.loadPbxBuddyList():y.contactStore.getPbxUsers(),!t.isSignInByNotification){e.next=17;break}return e.abrupt("return");case 17:(0,A.SyncPnToken)().sync(n).then((function(){return(0,A.SyncPnToken)().syncForAllAccounts()}));case 18:case"end":return e.stop()}}),e)})))}}),o=(0,d.default)(r.prototype,"onSIPConnectionStarted",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){console.log("SIP PN debug: set sipState success"),S.sipErrorEmitter.removeAllListeners();var e=(0,h.getAuthStore)();e.sipState="success",e.sipTotalFailure=0,p.authPBX.auth()}}}),r)},,,,,,,function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RenderAllCalls=void 0;var a,o,i,l,s,u,c,d=r(n(12)),f=r(n(13)),p=r(n(22)),g=r(n(53)),h=r(n(20)),b=(r(n(23)),r(n(5))),v=r(n(14)),m=r(n(18)),y=r(n(17)),C=n(9),S=n(6),x=n(1),k=n(2),P=n(16),w=n(217),A=n(128),T=n(349),I=n(795),j=n(30),_=n(8),R=n(70),O=n(796),B=n(7),M=n(351),U=n(11),L=n(19),F=n(4),D=n(10),V=n(71),N=n(107),E=n(62),H=n(46),z=n(799),W=n(3),G=k.Dimensions.get("window").height,K=k.StyleSheet.create({BtnSwitchCamera:{position:"absolute",top:10,right:10,zIndex:100},cameraStyle:{position:"absolute",top:50,right:10,zIndex:100},Video:{position:"absolute",top:40,bottom:0,left:0,right:0,backgroundColor:"black"},Video_Space:{flex:1,alignSelf:"stretch"},Btns:{marginTop:10},BtnFuncCalls:{marginBottom:10},Btns_Hidden:{opacity:0},Btns_Inner:{flexDirection:"row",alignSelf:"center",width:k.Dimensions.get("screen").width,flexWrap:"wrap",justifyContent:"center",alignItems:"center"},Btns_Space:{height:20},Btns_VerticalMargin:{flex:1},Hangup:{marginBottom:40},Hangup_incoming:{marginLeft:180},Hangup_answer:{marginRight:180},Hangup_incomingText:{bottom:void 0,top:100},Hangup_incomingText_avoidLargeImg:{bottom:void 0,top:200},labelStyle:{paddingRight:50},Image_wrapper:{marginHorizontal:15,flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},ImageSize:{height:130,width:130,borderRadius:75},ImageLargeSize:{height:"100%",width:30*G/100,backgroundColor:"white"},styleTextBottom:{marginTop:20},Hangup_avoidAvatar:{top:"35%"},Hangup_avoidAvatar_Large:{top:"60%"},LoadingFullScreen:Object.assign({},k.StyleSheet.absoluteFillObject,{backgroundColor:"white",alignItems:"center",justifyContent:"center"}),hidden:{position:"absolute",width:"100%",height:"100%",top:"-100%",left:"-100%"},viewHangupBtns:{marginBottom:10,justifyContent:"center",alignItems:"center",alignSelf:"stretch",marginTop:10},viewHangupBtn:{marginBottom:10,justifyContent:"center",alignItems:"center",alignSelf:"stretch",flexDirection:"row"},txtHold:{height:65,marginBottom:10},smallAvatar:{width:200,height:200,borderRadius:100,overflow:"hidden"},vContainer:{flex:1,flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},vContainerVideo:{position:"absolute",width:"100%",height:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"}}),X=(0,S.observer)(a=function(e){(0,m.default)(n,e);var t=(0,y.default)(n);function n(){var e;(0,b.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).prevCallsLength=(0,L.getCallStore)().calls.length,e}return(0,v.default)(n,[{key:"componentDidUpdate",value:function(){var e=(0,L.getCallStore)().calls.length;this.prevCallsLength&&!e&&(0,D.Nav)().backToPageCallRecents(),this.prevCallsLength=e}},{key:"render",value:function(){var e=(0,L.getCallStore)();return e.inPageCallManage&&!e.calls.length?(0,W.jsx)(j.Layout,{compact:!0,noScroll:!0,onBack:(0,D.Nav)().backToPageCallRecents,title:(0,F.intl)("Connecting...",{})}):(0,W.jsx)(W.Fragment,{children:e.calls.map((function(e){return(0,W.jsx)(Z,{call:e},e.id)}))})}}]),n}(x.Component))||a;t.RenderAllCalls=X;var Z=(0,S.observer)((i=function(e){(0,m.default)(n,e);var t=(0,y.default)(n);function n(){var e;(0,b.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)(e,"showButtonsInVideoCall",l,(0,g.default)(e)),e.alreadySetShowButtonsInVideoCall=!1,(0,p.default)(e,"toggleButtons",s,(0,g.default)(e)),(0,p.default)(e,"hideButtonsIfVideo",u,(0,g.default)(e)),(0,p.default)(e,"hasJavaPn",c,(0,g.default)(e)),e.checkJavaPn=(0,f.default)(d.default.mark((function t(){var n,r,a,o;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("android"===k.Platform.OS&&e.props.call.incoming&&null!==(n=(0,U.getAuthStore)().getCurrentAccount())&&void 0!==n&&n.pushNotificationEnabled){t.next=3;break}return(0,C.runInAction)((function(){e.hasJavaPn=!1})),t.abrupt("return");case 3:r=0;case 4:if(!(r<5)){t.next=21;break}if(a=e.props.call.callkeepUuid){t.next=10;break}return t.next=9,(0,H.waitTimeout)(1e3);case 9:return t.abrupt("continue",18);case 10:return t.next=12,E.BrekekeUtils.hasIncomingCallActivity(a);case 12:if(o=t.sent,console.log("hasIncomingCallActivity",o),!o){t.next=16;break}return t.abrupt("return");case 16:return t.next=18,(0,H.waitTimeout)(1e3);case 18:r++,t.next=4;break;case 21:(0,C.runInAction)((function(){console.warn("No incoming call activity for uuid="+e.props.call.callkeepUuid),e.hasJavaPn=!1}));case 22:case"end":return t.stop()}}),t)}))),e.openJavaPnOnVisible=function(){var t=e.props.call,n=(0,L.getCallStore)();e.hasJavaPn&&e.isVisible()&&t.callkeepUuid&&!t.transferring&&n.prevDisplayingCallId!==t.id&&(n.prevDisplayingCallId=t.id,E.BrekekeUtils.onPageCallManage(t.callkeepUuid))},e.onAppStateChange=function(){if("active"===k.AppState.currentState){var t=e.props.call;e.hasJavaPn&&e.isVisible()&&t.callkeepUuid&&!t.transferring&&((0,L.getCallStore)().inPageCallManage=void 0)}},e.isVisible=function(){var t=(0,L.getCallStore)(),n=e.props.call;return t.inPageCallManage&&t.displayingCallId===n.id},e.isBtnHidden=function(t){var n=e.props.call.callConfig;if(null!==n&&void 0!==n&&n[t])return"false"===n[t];var r=(0,U.getAuthStore)().pbxConfig;return"false"===(null===r||void 0===r?void 0:r["webphone.call."+t])},e.renderLayout=function(){var t=e.props.call;return(0,W.jsx)(j.Layout,{compact:!0,dropdown:t.localVideoEnabled&&!t.transferring?[{label:e.showButtonsInVideoCall?(0,F.intl)("Hide call menu buttons",{}):(0,F.intl)("Show call menu buttons",{}),onPress:e.toggleButtons}]:void 0,noScroll:!0,onBack:(0,D.Nav)().backToPageCallRecents,title:t.getDisplayName()||(0,F.intl)("Connecting...",{}),transparent:!t.transferring,children:(0,W.jsx)(k.View,{style:e.props.call.localVideoEnabled||t.localVideoEnabled?K.vContainerVideo:K.vContainer,children:e.renderCall()})})},e.renderCall=function(){var t=e.props.call,n=function(){return(0,W.jsx)(k.View,{style:K.LoadingFullScreen,children:(0,W.jsx)(z.PageCallTransferAttend,{})})};return e.hasJavaPn?t.transferring?n():(0,W.jsx)(k.View,{style:K.LoadingFullScreen,children:(0,W.jsx)(k.ActivityIndicator,{size:"large",color:"black"})}):(0,W.jsxs)(W.Fragment,{children:[t.localVideoEnabled&&e.renderVideo(),e.renderAvatar(),e.renderBtns(),e.renderHangupBtn(),t.transferring?n():null]})},e.renderVideo=function(){var t=e.props.call;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(k.View,{style:K.cameraStyle,children:(0,W.jsx)(A.ButtonIcon,{color:"white",noborder:!0,onPress:t.toggleSwitchCamera,path:t.isFrontCamera?P.mdiCameraFrontVariant:P.mdiCameraRearVariant,size:40})}),(0,W.jsx)(k.View,{style:K.Video_Space}),(0,W.jsx)(k.View,{style:K.Video,children:(0,W.jsx)(M.VideoPlayer,{sourceObject:t.remoteVideoStreamObject})}),(0,W.jsx)(_.RnTouchableOpacity,{onPress:e.toggleButtons,style:k.StyleSheet.absoluteFill})]})},e.renderAvatar=function(){var t=e.props.call,n=t.incoming&&!t.answered,r=!(!t.partyImageSize||"large"!==t.partyImageSize),a=(t.partyImageUrl||t.talkingImageUrl)&&!t.localVideoEnabled,o=t.localVideoEnabled?{flex:1,maxHeight:k.Dimensions.get("window").height/2-20}:{flex:1},i=r?o:K.smallAvatar;return(0,W.jsxs)(k.View,{style:[K.Image_wrapper,{flex:1}],children:[(0,W.jsxs)(k.View,{style:a?i:{height:0,opacity:0},children:[t.answered&&(0,W.jsx)(O.SmartImage,{uri:""+t.talkingImageUrl,style:{flex:1,aspectRatio:1}},t.talkingImageUrl),!t.answered&&(0,W.jsx)(O.SmartImage,{uri:""+t.partyImageUrl,style:{flex:1,aspectRatio:1}},t.partyImageUrl)]}),(0,W.jsxs)(k.View,{style:a?{}:K.styleTextBottom,children:[(0,W.jsx)(R.RnText,{title:!0,white:!0,center:!0,numberOfLines:2,children:""+t.getDisplayName()}),t.answered&&(0,W.jsx)(N.Duration,{subTitle:!0,white:!0,center:!0,children:t.answeredAt}),n&&(0,W.jsx)(R.RnText,{bold:!0,white:!0,center:!0,children:(0,F.intl)("Incoming Call",{})})]})]})},e.renderBtns=function(){var t=e.props.call,n=(0,L.getCallStore)().calls.filter((function(e){return e.id!==t.id})).length;if(t.localVideoEnabled&&!e.showButtonsInVideoCall)return null;var r=t.localVideoEnabled?_.RnTouchableOpacity:k.View,a=t.localVideoEnabled?B.v.colors.primary:B.v.colors.warning,o=(t.incoming||!t.withSDPControls&&"web"===k.Platform.OS)&&!t.answered,i=t.incoming&&!t.answered;return(0,W.jsxs)(r,{onPress:t.localVideoEnabled?e.toggleButtons:void 0,style:[K.Btns,{marginTop:i?0:30}],children:[n>0&&(0,W.jsx)(I.FieldButton,{label:(0,F.intl)("BACKGROUND CALLS",{}),onCreateBtnPress:(0,D.Nav)().goToPageCallBackgrounds,textInputStyle:K.labelStyle,value:n>1?(0,F.intl)("{{$0}} other calls are in background",{$0:n}):(0,F.intl)("{{$0}} other call is in background",{$0:n})}),(0,W.jsx)(k.View,{style:{paddingTop:10}}),(0,W.jsxs)(k.View,{style:[K.Btns_Inner,o&&K.Btns_Hidden],children:[!e.isBtnHidden("transfer")&&(0,W.jsx)(A.ButtonIcon,{styleContainer:K.BtnFuncCalls,disabled:!t.answered,bgcolor:"white",color:"black",name:(0,F.intl)("TRANSFER",{}),noborder:!0,onPress:(0,D.Nav)().goToPageCallTransferChooseUser,path:P.mdiCallSplit,size:40,textcolor:"white"}),!e.isBtnHidden("park")&&(0,W.jsx)(A.ButtonIcon,{styleContainer:K.BtnFuncCalls,disabled:!t.answered,bgcolor:"white",color:"black",name:(0,F.intl)("PARK",{}),noborder:!0,onPress:(0,D.Nav)().goToPageCallParks2,path:P.mdiAlphaPCircle,size:40,textcolor:"white"}),!e.isBtnHidden("video")&&(0,W.jsx)(A.ButtonIcon,{styleContainer:K.BtnFuncCalls,disabled:!t.answered,bgcolor:t.localVideoEnabled?a:"white",color:t.localVideoEnabled?"white":"black",name:(0,F.intl)("VIDEO",{}),noborder:!0,onPress:t.toggleVideo,path:t.localVideoEnabled?P.mdiVideo:P.mdiVideoOff,size:40,textcolor:"white"}),"web"!==k.Platform.OS&&!e.isBtnHidden("speaker")&&(0,W.jsx)(A.ButtonIcon,{styleContainer:K.BtnFuncCalls,bgcolor:(0,L.getCallStore)().isLoudSpeakerEnabled?a:"white",color:(0,L.getCallStore)().isLoudSpeakerEnabled?"white":"black",name:(0,F.intl)("SPEAKER",{}),noborder:!0,onPress:(0,L.getCallStore)().toggleLoudSpeaker,path:(0,L.getCallStore)().isLoudSpeakerEnabled?P.mdiVolumeHigh:P.mdiVolumeMedium,size:40,textcolor:"white"}),!e.isBtnHidden("mute")&&(0,W.jsx)(A.ButtonIcon,{styleContainer:K.BtnFuncCalls,disabled:!t.answered,bgcolor:t.muted?a:"white",color:t.muted?"white":"black",name:t.muted?(0,F.intl)("UNMUTE",{}):(0,F.intl)("MUTE",{}),noborder:!0,onPress:function(){return t.toggleMuted()},path:t.muted?P.mdiMicrophoneOff:P.mdiMicrophone,size:40,textcolor:"white"}),!e.isBtnHidden("record")&&(0,W.jsx)(A.ButtonIcon,{styleContainer:K.BtnFuncCalls,disabled:!t.answered,bgcolor:t.recording?a:"white",color:t.recording?"white":"black",name:(0,F.intl)("RECORD",{}),noborder:!0,onPress:t.toggleRecording,path:t.recording?P.mdiRecordCircle:P.mdiRecord,size:40,textcolor:"white"}),!e.isBtnHidden("dtmf")&&(0,W.jsx)(A.ButtonIcon,{styleContainer:K.BtnFuncCalls,disabled:!(t.withSDPControls||t.answered),bgcolor:"white",color:"black",name:(0,F.intl)("KEYPAD",{}),noborder:!0,onPress:(0,D.Nav)().goToPageCallDtmfKeypad,path:P.mdiDialpad,size:40,textcolor:"white"}),!e.isBtnHidden("hold")&&(0,W.jsx)(A.ButtonIcon,{styleContainer:K.BtnFuncCalls,disabled:!t.answered,bgcolor:t.holding?a:"white",color:t.holding?"white":"black",name:t.holding?(0,F.intl)("UNHOLD",{}):(0,F.intl)("HOLD",{}),noborder:!0,onPress:t.toggleHoldWithCheck,path:t.holding?P.mdiPlayCircle:P.mdiPauseCircle,size:40,textcolor:"white"})]}),(0,W.jsx)(k.View,{style:{paddingBottom:10}})]})},e.renderHangupBtn=function(){var t=e.props.call,n=t.incoming&&!t.answered,r=!(!t.partyImageSize||"large"!==t.partyImageSize),a=n&&e.isBtnHidden("hangup");return(0,W.jsx)(k.View,{style:[K.viewHangupBtns,{marginTop:r?10:40}],children:t.holding?(0,W.jsx)(k.View,{style:K.txtHold,children:(0,W.jsx)(R.RnText,{small:!0,white:!0,center:!0,children:(0,F.intl)("CALL IS ON HOLD",{})})}):(0,W.jsxs)(k.View,{style:K.viewHangupBtn,children:[n&&e.isVisible()&&(0,W.jsx)(T.IncomingItemWithTimer,{}),n&&(0,W.jsx)(A.ButtonIcon,{bgcolor:B.v.colors.primary,color:"white",noborder:!0,onPress:function(){return t.answer({ignoreNav:!0})},path:P.mdiPhone,size:40,textcolor:"white"}),n&&(0,W.jsx)(k.View,{style:{width:a?0:100}}),!a&&(0,W.jsx)(A.ButtonIcon,{bgcolor:B.v.colors.danger,color:"white",noborder:!0,onPress:t.hangupWithUnhold,path:P.mdiPhoneHangup,size:40,textcolor:"white"})]})})},e}return(0,v.default)(n,[{key:"componentDidMount",value:function(){this.checkJavaPn(),this.componentDidUpdate(),this.appStateSubscription=k.AppState.addEventListener("change",this.onAppStateChange)}},{key:"componentDidUpdate",value:function(){V.RnKeyboard.isKeyboardShowing&&k.Keyboard.dismiss(),this.hideButtonsIfVideo(),this.openJavaPnOnVisible()}},{key:"componentWillUnmount",value:function(){var e;(0,L.getCallStore)().onCallKeepAction(),null===(e=this.appStateSubscription)||void 0===e||e.remove()}},{key:"render",value:function(){return V.RnKeyboard.isKeyboardShowing,(0,W.jsx)(w.BrekekeGradient,{white:this.props.call.localVideoEnabled,style:this.isVisible()?void 0:K.hidden,children:this.renderLayout()})}}]),n}(x.Component),l=(0,h.default)(i.prototype,"showButtonsInVideoCall",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s=(0,h.default)(i.prototype,"toggleButtons",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showButtonsInVideoCall=!e.showButtonsInVideoCall}}}),u=(0,h.default)(i.prototype,"hideButtonsIfVideo",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;null!==(t=(0,L.getCallStore)().inPageCallManage)&&void 0!==t&&t.isFromCallBar||e.alreadySetShowButtonsInVideoCall||!e.props.call.remoteVideoEnabled||(e.showButtonsInVideoCall=!1,e.alreadySetShowButtonsInVideoCall=!0)}}}),c=(0,h.default)(i.prototype,"hasJavaPn",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o=i))||o},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/incallmanager_ringback.8588f1a1.mp3"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/incallmanager_ringtone.55d244b2.mp3"},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.FieldButton=void 0;var a=r(n(54)),o=n(2),i=n(16),l=n(44),s=n(8),u=n(7),c=n(3),d=["style"],f=o.StyleSheet.create({FieldButton:{alignSelf:"center",marginTop:15,paddingHorizontal:10,minWidth:305,maxWidth:360,backgroundColor:"white",borderRadius:u.v.borderRadius,overflow:"hidden"},Inner:Object.assign({},o.Platform.select({android:{top:1},default:{top:-5}})),CreateBtn:Object.assign({},o.Platform.select({android:{top:8},default:{top:15}})),CreateBtnIcon:{transform:[{rotate:"180deg"}]}});t.FieldButton=function(e){var t=e.style,n=(0,a.default)(e,d);return(0,c.jsx)(s.RnTouchableOpacity,{onPress:n.onCreateBtnPress,style:[f.FieldButton,t],children:(0,c.jsx)(o.View,{style:f.Inner,children:(0,c.jsx)(l.Field,Object.assign({},n,{createBtnIcon:i.mdiKeyboardBackspace,createBtnIconStyle:f.CreateBtnIcon,createBtnStyle:f.CreateBtn,transparent:!0}))})})}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.SmartImage=void 0;var a=r(n(35)),o=n(1),i=n(2),l=r(n(797)),s=n(798),u=n(3),c="string"===typeof l.default?{uri:l.default}:l.default,d=i.StyleSheet.create({image:{overflow:"hidden",backgroundColor:"white",justifyContent:"center",alignItems:"center"},imageError:{overflow:"hidden",backgroundColor:"white",position:"absolute",top:0,left:0,zIndex:100},loading:{position:"absolute",top:0,left:0,backgroundColor:"#00000030",overflow:"hidden",zIndex:100},full:{width:"100%",height:"100%"}});t.SmartImage=function(e){var t=(0,o.useState)(0),n=(0,a.default)(t,2),r=n[0],l=n[1],f=(0,o.useState)(0),p=(0,a.default)(f,2),g=p[0],h=p[1];(0,o.useEffect)((function(){l(0)}),[e.uri]);var b=(0,s.checkImageUrl)(e.uri);return(0,u.jsxs)(i.View,{style:[d.image,e.style],onLayout:function(e){var t=e.nativeEvent.layout.height;h(t)},children:[!r&&(0,u.jsx)(i.ActivityIndicator,{size:"small",color:"white",style:[d.loading,d.full]}),b?(0,u.jsx)(i.Image,{source:{uri:e.uri},style:[d.image,{width:g,height:g}],onError:function(){l(2)},onLoad:function(){l(1)},resizeMode:"cover"}):(0,u.jsx)("div",{children:(0,u.jsx)("iframe",{title:"Load Image",src:e.uri,height:g,width:g,onLoad:function(){l(1)},frameBorder:"0"})}),2===r&&b&&(0,u.jsx)(i.Image,{source:c,style:[d.imageError,{width:g,height:g}],resizeMode:"cover"})]})}},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/no_photo.5f82ddb3.png"},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.checkImageUrl=void 0;var a=r(n(345));t.checkImageUrl=function(e){e=e.toLowerCase();var t=new a.default(e);return console.log("checkImageUrl pathname="+t.pathname),/\.(jpeg|jpg|gif|png)$/.test(t.pathname)||e.includes("/uc/image?action=download&tenant")}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.css=t.PageCallTransferAttend=void 0;var a,o=r(n(5)),i=r(n(14)),l=r(n(18)),s=r(n(17)),u=n(6),c=n(1),d=n(2),f=n(64),p=n(16),g=n(218),h=n(8),b=n(7),v=n(19),m=n(26),y=n(4),C=n(10),S=n(3),x=d.StyleSheet.create({Outer:{alignItems:"center",backgroundColor:"white"},Inner:{width:"100%",flexDirection:"row",maxWidth:320},Inner__info:{maxWidth:280,marginBottom:100},Info:{position:"absolute",alignItems:"center"},Info__from:{left:20,top:30},Info__to:{right:20,top:30},Arrow:{marginLeft:"auto",marginRight:"auto",top:60},BtnOuter:{width:100/3+"%",alignItems:"center"},Btn:{borderRadius:25,width:50,height:50},Btn__stop:{backgroundColor:b.v.colors.warning},Btn__hangup:{backgroundColor:b.v.colors.danger},Btn__conference:{backgroundColor:b.v.colors.primary},Space:{height:10}});t.css=x;var k=(0,u.observer)(a=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).resolveMatch=function(e){return{avatar:(m.contactStore.getUcUserById(e)||{}).avatar,number:e}},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=(0,v.getCallStore)().getOngoingCall();this.prevId&&this.prevId!==(null===e||void 0===e?void 0:e.id)&&(0,C.Nav)().backToPageCallManage(),this.prevId=null===e||void 0===e?void 0:e.id}},{key:"render",value:function(){var e=(0,v.getCallStore)().getOngoingCall();if(!e)return null;var t=this.resolveMatch(e.partyNumber),n=this.resolveMatch(e.transferring);return(0,S.jsxs)(d.View,{style:x.Outer,children:[(0,S.jsx)(h.RnText,{center:!0,subTitle:!0,children:(0,y.intl)("Transferring",{})}),(0,S.jsx)(d.View,{style:x.Space}),(0,S.jsxs)(d.View,{style:[x.Inner,x.Inner__info],children:[(0,S.jsxs)(d.View,{style:[x.Info,x.Info__from],children:[(0,S.jsx)(g.Avatar,{source:{uri:null===t||void 0===t?void 0:t.avatar}}),(0,S.jsx)(h.RnText,{center:!0,singleLine:!0,small:!0,children:e.getDisplayName()})]}),(0,S.jsx)(d.View,{style:x.Arrow,children:(0,S.jsx)(h.RnIcon,{path:p.mdiArrowRight})}),(0,S.jsxs)(d.View,{style:[x.Info,x.Info__to],children:[(0,S.jsx)(g.Avatar,{source:{uri:null===n||void 0===n?void 0:n.avatar}}),(0,S.jsx)(h.RnText,{center:!0,singleLine:!0,small:!0,children:(0,m.getPartyName)(e.transferring)||e.transferring})]})]}),(0,S.jsx)(d.View,{style:x.Space}),(0,S.jsxs)(d.View,{style:x.Inner,children:[(0,S.jsxs)(d.View,{style:x.BtnOuter,children:[(0,S.jsx)(h.RnTouchableOpacity,{onPress:function(){e.stopTransferring(),(0,C.Nav)().backToPageCallManage()},style:[x.Btn,x.Btn__stop],children:(0,S.jsx)(h.RnIcon,{path:p.mdiPhoneOff})}),(0,S.jsx)(h.RnText,{center:!0,singleLine:!0,small:!0,children:(0,y.intl)("CANCEL",{})})]}),(0,S.jsxs)(d.View,{style:x.BtnOuter,children:[(0,S.jsx)(h.RnTouchableOpacity,{onPress:function(){return f.sip.hangupSession(e.id)},style:[x.Btn,x.Btn__hangup],children:(0,S.jsx)(h.RnIcon,{path:p.mdiPhoneHangup})}),(0,S.jsx)(h.RnText,{center:!0,singleLine:!0,small:!0,children:(0,y.intl)("TRANSFER",{})})]}),(0,S.jsxs)(d.View,{style:x.BtnOuter,children:[(0,S.jsx)(h.RnTouchableOpacity,{onPress:function(){e.conferenceTransferring(),(0,C.Nav)().backToPageCallManage()},style:[x.Btn,x.Btn__conference],children:(0,S.jsx)(h.RnIcon,{path:p.mdiPhoneForward})}),(0,S.jsx)(h.RnText,{center:!0,singleLine:!0,small:!0,children:(0,y.intl)("CONFERENCE",{})})]})]})]})}}]),n}(c.Component))||a;t.PageCallTransferAttend=k},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnAlertRoot=void 0;var a=r(n(54)),o=n(21),i=n(6),l=n(2),s=n(8),u=n(7),c=n(81),d=n(4),f=n(15),p=n(3),g=["message","onConfirm","onDismiss","title"],h=["err","message","unexpectedErr"],b=l.StyleSheet.create({RootRnAlert:{alignItems:"center",justifyContent:"center",flexDirection:"row"},RootRnAlert_Backdrop:{backgroundColor:u.v.layerBg},RootRnAlert_Modal:Object.assign({width:"90%",maxWidth:u.v.maxModalWidth,borderRadius:u.v.borderRadius,padding:15,backgroundColor:u.v.bg},u.v.boxShadow),RootRnAlert_Message:{marginTop:15},RootRnAlert_Err:{alignSelf:"flex-start"},RootRnAlert_ErrTxt:{color:u.v.colors.danger,fontWeight:u.v.fontWeight},RootRnAlert_ErrTxt__title:{fontWeight:"bold"},RootRnAlert_Btns:{alignSelf:"flex-end",flexDirection:"row",top:5,left:5,marginTop:15},RootRnAlert_Btn:{borderRadius:u.v.borderRadius,paddingVertical:10,paddingHorizontal:15,backgroundColor:u.v.colors.primary,width:100},RootRnAlert_Btn__cancel:{backgroundColor:u.v.revBg,marginRight:10},RootRnAlert_BtnTxt:{textAlign:"center",color:u.v.revColor}}),v=function(e){var t,n=e.error,r=e.prompt,i=(0,c.useAnimationOnDidMount)({opacity:[0,1],translateY:[l.Dimensions.get("screen").height,0]});if(r){var u=r.message,v=r.onConfirm,m=r.onDismiss,y=r.title,C=(0,a.default)(r,g);t=Object.assign({title:y,message:"string"===typeof u?(0,p.jsx)(s.RnText,{style:b.RootRnAlert_Message,children:u}):(0,p.jsx)(l.View,{style:b.RootRnAlert_Message,children:u}),dismissText:(0,d.intl)("CANCEL",{}),confirmText:(0,d.intl)("REMOVE",{}),onConfirm:(0,o.flow)([f.RnAlert.dismiss,v].filter((function(e){return e}))),onDismiss:(0,o.flow)([f.RnAlert.dismiss,m].filter((function(e){return e})))},C)}else{if(!n)return null;var S=n.err,x=n.message,k=n.unexpectedErr,P=(0,a.default)(n,h),w=(null===k||void 0===k?void 0:k.message)||(null===S||void 0===S?void 0:S.message)||S;t=Object.assign({title:(0,d.intl)("Error",{}),message:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.RnText,{style:b.RootRnAlert_Message,children:k?(0,d.intl)("An unexpected error occurred",{}):x}),!!w&&(0,p.jsx)(s.RnText,{small:!0,children:w})]}),confirmText:"OK",onConfirm:f.RnAlert.dismiss,onDismiss:f.RnAlert.dismiss},P)}return(0,p.jsxs)(l.View,{style:[l.StyleSheet.absoluteFill,b.RootRnAlert],children:[(0,p.jsx)(l.Animated.View,{style:[l.StyleSheet.absoluteFill,b.RootRnAlert_Backdrop,{opacity:i.opacity}],children:(0,p.jsx)(s.RnTouchableOpacity,{onPress:t.onDismiss,style:l.StyleSheet.absoluteFill})}),(0,p.jsxs)(l.Animated.View,{style:[b.RootRnAlert_Modal,{transform:[{translateY:i.translateY}]}],children:[(0,p.jsx)(s.RnText,{subTitle:!0,children:t.title}),t.message,(0,p.jsxs)(l.View,{style:b.RootRnAlert_Btns,children:[t.dismissText&&(0,p.jsx)(s.RnTouchableOpacity,{onPress:t.onDismiss,style:[b.RootRnAlert_Btn,b.RootRnAlert_Btn__cancel],children:(0,p.jsx)(s.RnText,{small:!0,style:b.RootRnAlert_BtnTxt,children:t.dismissText})}),(0,p.jsx)(s.RnTouchableOpacity,{onPress:t.onConfirm,style:b.RootRnAlert_Btn,children:(0,p.jsx)(s.RnText,{small:!0,style:b.RootRnAlert_BtnTxt,children:t.confirmText})})]})]})]})},m=(0,i.observer)((function(){var e=f.RnAlert.alerts.find((function(e){return e}));return f.RnAlert.alertsCount&&e?(0,p.jsx)(v,Object.assign({},e)):null}));t.RnAlertRoot=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RnPickerRoot=void 0;var r=n(6),a=n(2),o=n(16),i=n(8),l=n(7),s=n(81),u=n(4),c=n(85),d=n(3),f=a.StyleSheet.create({RnPicker:{flexDirection:"row",alignItems:"center",justifyContent:"center"},RnPicker_Backdrop:{backgroundColor:l.v.layerBg},RnPicker_Inner:{position:"absolute",bottom:15,width:"90%",maxWidth:l.v.maxModalWidth,maxHeight:"100%"},RnPicker_Options:{borderRadius:l.v.borderRadius,backgroundColor:l.v.bg,overflow:"hidden"},RnPicker_Option:{paddingVertical:12,paddingHorizontal:15,borderBottomWidth:1,borderColor:l.v.hoverBg},RnPicker_Option__last:{borderBottomWidth:0},RnPicker_Option__selected:{backgroundColor:l.v.hoverBg},RnPicker_Option__cancel:{marginTop:15,borderBottomWidth:0,borderRadius:l.v.borderRadius,backgroundColor:l.v.bg},RnPicker_Text__selected:{fontWeight:"bold",color:l.v.colors.primary},RnPicker_Text__cancel:{fontWeight:"bold",color:l.v.colors.danger},RnPicker_Icon:{position:"absolute",top:10,right:10}}),p=function(e){var t=(0,s.useAnimationOnDidMount)({opacity:[0,1]}),n=(0,s.useAnimationOnDidMount)({translateY:[a.Dimensions.get("screen").height,0]});return(0,d.jsxs)(a.View,{style:[a.StyleSheet.absoluteFill,f.RnPicker],children:[(0,d.jsx)(a.Animated.View,{style:[a.StyleSheet.absoluteFill,f.RnPicker_Backdrop,t],children:(0,d.jsx)(i.RnTouchableOpacity,{onPress:c.RnPicker.dismiss,style:a.StyleSheet.absoluteFill})}),(0,d.jsxs)(a.Animated.ScrollView,{style:[f.RnPicker_Inner,{transform:[n]}],children:[(0,d.jsx)(a.View,{style:f.RnPicker_Options,children:e.options.map((function(t,n){var r=""+e.selectedKey===""+t.key;return(0,d.jsxs)(i.RnTouchableOpacity,{onPress:function(){e.onSelect(t.key),c.RnPicker.dismiss()},style:[f.RnPicker_Option,n+1===e.options.length&&f.RnPicker_Option__last,r&&f.RnPicker_Option__selected],children:[(0,d.jsx)(i.RnText,{style:r&&f.RnPicker_Text__selected,children:t.label}),(0,d.jsx)(i.RnIcon,{color:r?l.v.colors.primary:void 0,path:t.icon||(r?o.mdiRadioboxMarked:o.mdiRadioboxBlank),style:f.RnPicker_Icon})]},n)}))}),(0,d.jsxs)(i.RnTouchableOpacity,{onPress:c.RnPicker.dismiss,style:[f.RnPicker_Option,f.RnPicker_Option__cancel],children:[(0,d.jsx)(i.RnText,{style:f.RnPicker_Text__cancel,children:e.cancelLabel||(0,u.intl)("Cancel",{})}),(0,d.jsx)(i.RnIcon,{color:l.v.colors.danger,path:o.mdiClose,style:f.RnPicker_Icon})]})]})]})},g=(0,r.observer)((function(){return c.RnPicker.currentRnPicker&&(0,d.jsx)(p,Object.assign({},c.RnPicker.currentRnPicker))}));t.RnPickerRoot=g},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.RnStackerRoot=void 0;var a=r(n(54)),o=n(6),i=n(2),l=n(7),s=n(81),u=n(75),c=n(3),d=["Component"],f=i.StyleSheet.create({Stack:{backgroundColor:l.v.bg},Stack__hidden:{opacity:0}}),p=function(e){var t=e.Component,n=(0,a.default)(e,d),r=(0,s.useAnimationOnDidMount)({translateX:[i.Dimensions.get("screen").width,0]}),o=n.isRoot?i.View:i.Animated.View;return(0,c.jsx)(o,{style:[i.StyleSheet.absoluteFill,f.Stack,n.isBackgroundStack&&f.Stack__hidden,!n.isRoot&&{transform:[r]}],children:(0,c.jsx)(t,Object.assign({},n))})},g=(0,o.observer)((function(){return(0,c.jsx)(c.Fragment,{children:u.RnStacker.stacks.map((function(e,t){return(0,c.jsx)(p,Object.assign({isBackgroundStack:!(t+1===u.RnStacker.stacks.length)&&!(t+2===u.RnStacker.stacks.length&&u.RnStacker.stackAnimating)},e),t)}))})}));t.RnStackerRoot=g},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.registerOnUnhandledError=void 0;t.registerOnUnhandledError=function(e){window._BrekekePhoneWebRoot&&window.addEventListener("error",e)}},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.CallVideos=void 0;var a,o=r(n(5)),i=r(n(14)),l=r(n(18)),s=r(n(17)),u=n(6),c=n(1),d=n(19),f=n(805),p=n(3),g=(0,u.observer)(a=function(e){(0,l.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).resolveCall=function(){var e;return{sourceObject:null===(e=(0,d.getCallStore)().getOngoingCall())||void 0===e?void 0:e.remoteVideoStreamObject}},e}return(0,i.default)(n,[{key:"render",value:function(){var e=(0,d.getCallStore)().getOngoingCall();return(0,p.jsx)(f.CallVideosUI,{callIds:(e?[e]:[]).filter((function(e){return e.videoSessionId&&e.localVideoEnabled&&e.remoteVideoEnabled})).map((function(e){return e.id})),resolveCall:this.resolveCall})}}]),n}(c.Component))||a;t.CallVideos=g},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.CallVideosUI=void 0;var a,o,i,l,s=r(n(22)),u=r(n(5)),c=r(n(14)),d=r(n(53)),f=r(n(18)),p=r(n(17)),g=r(n(20)),h=(r(n(23)),n(9)),b=n(6),v=n(1),m=n(2),y=n(19),C=n(10),S=n(75),x=n(7),k=n(351),P=n(3),w=m.StyleSheet.create({Mini:Object.assign({position:"absolute",width:150,backgroundColor:"black"},m.Platform.select({android:{borderRadius:75,height:150},ios:{borderRadius:75,height:150},web:{borderRadius:x.v.borderRadius}}),{overflow:"hidden"},x.v.boxShadow,x.v.backdropZindex)}),A=(0,b.observer)((o=function(e){(0,f.default)(n,e);var t=(0,p.default)(n);function n(e){var r;return(0,u.default)(this,n),(r=t.call(this,e)).state={},r.setViewRef=function(e){r.view=e},r.onDrag=function(e,t){var n;null===(n=r.view)||void 0===n||n.setNativeProps({style:{left:(0,y.getCallStore)().videoPositionL+t.dx,top:(0,y.getCallStore)().videoPositionT+t.dy}})},(0,s.default)(r,"onDrop",i,(0,d.default)(r)),r.panResponder=m.PanResponder.create({onStartShouldSetPanResponder:function(){return!0},onMoveShouldSetPanResponder:function(){return!1},onPanResponderMove:r.onDrag,onPanResponderRelease:r.onDrop,onPanResponderTerminate:r.onDrop}),r}return(0,c.default)(n,[{key:"render",value:function(){return(0,P.jsx)(m.View,Object.assign({ref:this.setViewRef,style:[w.Mini,{top:(0,y.getCallStore)().videoPositionT,left:(0,y.getCallStore)().videoPositionL}]},this.panResponder.panHandlers,{children:(0,P.jsx)(k.VideoPlayer,{sourceObject:this.props.sourceObject})}))}}]),n}(v.Component),i=(0,g.default)(o.prototype,"onDrop",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){Object.assign((0,y.getCallStore)(),{videoPositionL:(0,y.getCallStore)().videoPositionL+n.dx,videoPositionT:(0,y.getCallStore)().videoPositionT+n.dy});var r=Date.now();n.dx<=10&&n.dy<=10&&e.lastTap&&r-e.lastTap<=500&&e.props.onDoubleTap(),e.lastTap=r}}}),a=o))||a,T=(0,b.observer)(l=function(e){(0,f.default)(n,e);var t=(0,p.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"render",value:function(){var e=S.RnStacker.stacks[S.RnStacker.stacks.length-1];return(0,y.getCallStore)().inPageCallManage||"PageCallTransferDial"===e.name||"PageCallTransferAttend"===e.name?null:(0,P.jsx)(A,Object.assign({},this.props,{onDoubleTap:(0,C.Nav)().goToPageCallManage}))}}]),n}(v.Component))||l;t.CallVideosUI=function(e){return(0,P.jsx)(P.Fragment,{children:e.callIds.map((function(t){return(0,P.jsx)(T,Object.assign({},e.resolveCall(t)),t)}))})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallVoices=void 0;var r=n(6),a=n(2),o=n(19),i=n(350),l=n(3),s=(0,r.observer)((function(){Object.keys((0,o.getCallStore)().callkeepMap),(0,o.getCallStore)().calls.map((function(e){return e.callkeepUuid}));var e=(0,o.getCallStore)().getOngoingCall(),t=e&&!e.incoming&&!e.answered&&("progress"===e.sessionStatus||"dialing"===e.sessionStatus);return(0,l.jsxs)(l.Fragment,{children:[t&&(null!==e&&void 0!==e&&e.withSDP?(0,l.jsx)(i.OutgoingItemWithSDP,{earlyMedia:e.earlyMedia}):(0,l.jsx)(i.OutgoingItem,{})),"ios"===a.Platform.OS&&t&&(0,l.jsx)(i.VideoRBT,{withSDP:!(null===e||void 0===e||!e.withSDP),isLoudSpeaker:(0,o.getCallStore)().isLoudSpeakerEnabled}),(0,o.getCallStore)().calls.filter((function(e){return e.answered})).map((function(e){return(0,l.jsx)(i.AnsweredItem,{voiceStreamObject:e.voiceStreamObject},e.id)}))]})}));t.CallVoices=s},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.UnreadChatNoti=t.ChatGroupInvite=void 0;var a,o,i,l,s,u,c,d=r(n(35)),f=r(n(22)),p=r(n(5)),g=r(n(14)),h=r(n(53)),b=r(n(18)),v=r(n(17)),m=r(n(20)),y=(r(n(23)),n(21)),C=n(9),S=n(6),x=n(1),k=n(2),P=n(40),w=n(16),A=n(37),T=n(26),I=n(4),j=n(10),_=n(15),R=n(75),O=n(33),B=n(88),M=n(128),U=n(108),L=n(51),F=n(8),D=n(7),V=n(3),N=k.StyleSheet.create({Notify:{flexDirection:"row",alignItems:"center",borderBottomWidth:1,borderColor:D.v.borderBg,backgroundColor:D.v.hoverBg},Notify_Info:{flex:1,paddingLeft:12,paddingVertical:5},Notify_Btn_reject:{borderColor:D.v.colors.danger},Notify_Btn_accept:{borderColor:D.v.colors.primary},NotifyUnread:{borderBottomWidth:0},NotifyUnreadBtn:{flex:1,backgroundColor:D.v.colors.primaryFn(.5)}}),E=(0,S.observer)((function(e){return(0,V.jsx)(k.View,{style:N.Notify,children:!!e.type&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(k.View,{style:N.Notify_Info,children:[(0,V.jsx)(F.RnText,{bold:!0,children:e.name}),(0,V.jsx)(F.RnText,{children:(0,I.intl)("Group chat invited by {{$0}}",{$0:e.inviter})})]}),(0,V.jsx)(M.ButtonIcon,{bdcolor:D.v.colors.danger,color:D.v.colors.danger,onPress:function(){return e.reject(e.id)},path:w.mdiClose,size:20,style:N.Notify_Btn_reject}),(0,V.jsx)(M.ButtonIcon,{bdcolor:D.v.colors.primary,color:D.v.colors.primary,onPress:function(){return e.accept(e.id)},path:w.mdiCheck,size:20,style:N.Notify_Btn_accept,disabled:e.loading})]})})})),H=(0,S.observer)((o=function(e){(0,b.default)(n,e);var t=(0,v.default)(n);function n(){var e;(0,p.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,f.default)(e,"loading",i,(0,h.default)(e)),e.formatGroup=function(e){var t,n=A.chatStore.getGroupById(e)||{},r=n.id,a=n.inviter;return{id:r,name:n.name,inviter:(null===(t=T.contactStore.getUcUserById(a))||void 0===t?void 0:t.name)||a}},e.reject=function(t){P.uc.leaveChatGroup(t).then(e.onRejectSuccess).catch(e.onRejectFailure)},e.onRejectSuccess=function(e){A.chatStore.removeGroup(e.id)},e.onRejectFailure=function(e){_.RnAlert.error({message:(0,I.intlDebug)("Failed to reject the group chat",{}),err:e})},e.accept=function(t){e.loading=!0,P.uc.joinChatGroup(t).then(e.onAcceptSuccess).catch(e.onAcceptFailure)},e.onAcceptSuccess=function(){e.loading=!1},e.onAcceptFailure=function(e){_.RnAlert.error({message:(0,I.intlDebug)("Failed to accept the group chat",{}),err:e})},e}return(0,g.default)(n,[{key:"render",value:function(){var e=this;return A.chatStore.groups.filter((function(e){return!e.webchat&&!e.jointed})).map((function(e){return e.id})).map((function(t){return(0,V.jsx)(E,Object.assign({},e.formatGroup(t),{accept:e.accept,reject:e.reject,type:"inviteChat",loading:e.loading}),t)}))}}]),n}(x.Component),i=(0,m.default)(o.prototype,"loading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=o))||a;t.ChatGroupInvite=H;var z=(0,S.observer)((s=function(e){(0,b.default)(n,e);var t=(0,v.default)(n);function n(){var e;(0,p.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,f.default)(e,"unreadChat",u,(0,h.default)(e)),e.alreadyShowNoti={},e.prevLastMessageId="",e.prevUnreadChatTimeoutId=0,e.updateLatestUnreadChat=function(){if(!e.unreadChat){var t=Object.entries(A.chatStore.threadConfig).filter((function(e){var t=(0,d.default)(e,2),n=t[0];return t[1].isUnread&&(0,B.filterTextOnly)(A.chatStore.getMessagesByThreadId(n)).length})).map((function(e){var t=(0,d.default)(e,2),n=t[0],r=t[1],a=(0,B.filterTextOnly)(A.chatStore.getMessagesByThreadId(n));return Object.assign({},r,{lastMessage:a[a.length-1]})})).filter((function(t){return!e.alreadyShowNoti[t.lastMessage.id]&&t.lastMessage.id!==e.prevLastMessageId}));t.forEach((function(t){e.alreadyShowNoti[t.lastMessage.id]=!0})),t=t.filter((function(e){var t=R.RnStacker.stacks[R.RnStacker.stacks.length-1],n=A.chatStore.isWebchat(e.id),r=A.chatStore.isWebchatJoined(e.id);if(!t)return!0;if(n&&!r)return!1;var a=t.name,o=t.buddy,i=t.groupId;return"PageChatRecents"!==a&&(!("PageChatDetail"===a&&!e.isGroup&&o===e.id)&&("PageChatGroupDetail"!==a||!e.isGroup||i!==e.id))}));var n=(t=(0,y.sortBy)(t,"lastMessage.created"))[t.length-1];n&&(e.unreadChat=n,e.prevLastMessageId=n.lastMessage.id,e.prevUnreadChatTimeoutId=O.BackgroundTimer.setTimeout(e.clear,5e3))}},(0,f.default)(e,"clear",c,(0,h.default)(e)),e.onUnreadPress=function(){if(e.unreadChat){var t=e.unreadChat,n=t.id,r=t.isGroup;return e.clear(),r?(0,j.Nav)().goToPageChatGroupDetail({groupId:n}):(0,j.Nav)().goToPageChatDetail({buddy:n})}},e}return(0,g.default)(n,[{key:"componentDidMount",value:function(){this.updateLatestUnreadChat()}},{key:"componentDidUpdate",value:function(){this.updateLatestUnreadChat()}},{key:"componentWillUnmount",value:function(){this.clear()}},{key:"render",value:function(){if(Object.values(A.chatStore.threadConfig).forEach((function(e){Object.values(e).forEach((function(e){}))})),Object.values(A.chatStore.messagesByThreadId).forEach((function(e){e.forEach((function(e){e.id}))})),R.RnStacker.stacks[R.RnStacker.stacks.length-1],!this.unreadChat)return null;var e=this.unreadChat,t=e.id,n=e.lastMessage,r=n.text,a=n.created,o=e.isGroup;return(0,V.jsx)(k.View,{style:[N.Notify,N.NotifyUnread],children:(0,V.jsx)(F.RnTouchableOpacity,{style:N.NotifyUnreadBtn,onPress:this.onUnreadPress,children:(0,V.jsx)(L.UserItem,Object.assign({},o?A.chatStore.getGroupById(t):T.contactStore.getUcUserById(t),{lastMessage:r,isRecentChat:!0,lastMessageDate:(0,U.formatDateTimeSemantic)(a)}),t)})})}}]),n}(x.Component),u=(0,m.default)(s.prototype,"unreadChat",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=(0,m.default)(s.prototype,"clear",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.prevUnreadChatTimeoutId&&(O.BackgroundTimer.clearTimeout(e.prevUnreadChatTimeoutId),e.prevUnreadChatTimeoutId=0),e.unreadChat=null}}}),l=s))||l;t.UnreadChatNoti=z},function(e,t,n){var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PhonebookAddItem=void 0;var a=r(n(35)),o=n(6),i=n(1),l=n(2),s=n(26),u=n(4),c=n(81),d=n(8),f=n(7),p=n(3),g=l.StyleSheet.create({vBottom:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},listItem:{width:"100%"},txtPb:{width:"100%",textAlign:"left",marginHorizontal:10},itemPb:{width:"100%",paddingVertical:5,borderBottomColor:"grey",borderBottomWidth:.5},RnPicker:{flexDirection:"column",alignItems:"center",justifyContent:"center"},RnPicker_Backdrop:{backgroundColor:f.v.layerBg},RnPicker_Inner:{position:"absolute",bottom:15,width:"90%",maxWidth:f.v.maxModalWidth,maxHeight:"100%"},RnPicker_Options:{borderRadius:f.v.borderRadius,backgroundColor:f.v.bg,overflow:"hidden",height:l.Dimensions.get("screen").height/3,width:"100%",paddingHorizontal:10,paddingVertical:10,alignItems:"center",justifyContent:"flex-start"},RnPicker_Option:{paddingVertical:10,borderBottomWidth:1,borderColor:f.v.hoverBg,flex:1,alignItems:"center",justifyContent:"center"},RnPicker_Option__last:{borderBottomWidth:0},RnPicker_Option__selected:{backgroundColor:f.v.hoverBg},RnPicker_Option__cancel:{marginTop:15,borderBottomWidth:0,borderRadius:f.v.borderRadius,backgroundColor:f.v.bg,marginLeft:10},RnPicker_Option__OK:{marginTop:15,borderBottomWidth:0,borderRadius:f.v.borderRadius,marginRight:10,backgroundColor:f.v.colors.primary},RnPicker_Text__selected:{fontWeight:"bold",color:f.v.colors.primary},RnPicker_Text__Ok:{fontWeight:"bold",color:"white"},RnPicker_Text__cancel:{fontWeight:"bold",color:f.v.layerBg},inputFieldName:Object.assign({backgroundColor:"white",height:40,width:"100%",borderRadius:f.v.borderRadius,borderWidth:.8,borderColor:f.v.borderBg,paddingHorizontal:10,overflow:"hidden"},l.Platform.select({web:{paddingVertical:5}}))}),h=function(e){var t=e.onSelect,n=e.listOption,r=(0,i.useRef)(null),o=(0,i.useState)(n),f=(0,a.default)(o,2),h=f[0],b=f[1],v=(0,i.useState)(""),m=(0,a.default)(v,2),y=m[0],C=m[1],S=(0,c.useAnimationOnDidMount)({opacity:[0,1]}),x=(0,c.useAnimationOnDidMount)({translateY:[l.Dimensions.get("screen").height,0]});return(0,p.jsxs)(l.View,{style:[l.StyleSheet.absoluteFill,g.RnPicker],children:[(0,p.jsx)(l.Animated.View,{style:[l.StyleSheet.absoluteFill,g.RnPicker_Backdrop,S],children:(0,p.jsx)(d.RnTouchableOpacity,{onPress:s.contactStore.dismissPicker,style:l.StyleSheet.absoluteFill})}),(0,p.jsxs)(l.Animated.View,{style:[g.RnPicker_Inner,{transform:[x]}],children:[(0,p.jsxs)(l.View,{style:g.RnPicker_Options,children:[(0,p.jsx)(d.RnTextInput,{keyboardType:"default",onChangeText:function(e){if(!e)return b(n),void C(e.trim());var t=n.filter((function(t){return t.label.toLowerCase().startsWith(e.toLowerCase())}));b(t),C(e)},autoFocus:!0,placeholder:(0,u.intl)("Enter field",{}),ref:r,style:g.inputFieldName,value:y}),(0,p.jsx)(l.ScrollView,{style:g.listItem,keyboardShouldPersistTaps:"always",keyboardDismissMode:"on-drag",children:null===h||void 0===h?void 0:h.map((function(e,t){return(0,p.jsx)(d.RnTouchableOpacity,{style:g.itemPb,onPress:function(){return function(e){C(e.label.trim()),b([])}(e)},children:(0,p.jsx)(d.RnText,{style:g.txtPb,children:e.label})},t)}))})]}),(0,p.jsxs)(l.View,{style:g.vBottom,children:[(0,p.jsx)(d.RnTouchableOpacity,{onPress:function(){return t(y)},style:[g.RnPicker_Option,g.RnPicker_Option__OK],children:(0,p.jsx)(d.RnText,{style:g.RnPicker_Text__Ok,children:"OK"})}),(0,p.jsx)(d.RnTouchableOpacity,{onPress:s.contactStore.dismissPicker,style:[g.RnPicker_Option,g.RnPicker_Option__cancel],children:(0,p.jsx)(d.RnText,{style:g.RnPicker_Text__cancel,children:(0,u.intl)("Cancel",{})})})]})]})]})},b=(0,o.observer)((function(){return s.contactStore.showPickerItem&&(0,p.jsx)(h,Object.assign({},s.contactStore.showPickerItem))}));t.PhonebookAddItem=b},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.exposeEmbedApi=void 0;var r=n(127);t.exposeEmbedApi=function(e){window.Brekeke.Phone.render=function(t,n){return e(t),r.embedApi._rootTag=t,r.embedApi._signIn(n),r.embedApi}}}],[[352,1,2]]]);
//# sourceMappingURL=main.41066e76.chunk.js.map